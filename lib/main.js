"use strict";var Cz=Object.create;var XE=Object.defineProperty;var bz=Object.getOwnPropertyDescriptor;var kz=Object.getOwnPropertyNames;var vz=Object.getPrototypeOf,_z=Object.prototype.hasOwnProperty;var pt=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports),Di=(t,e)=>{for(var r in e)XE(t,r,{get:e[r],enumerable:!0})},Oz=(t,e,r,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let o of kz(e))!_z.call(t,o)&&o!==r&&XE(t,o,{get:()=>e[o],enumerable:!(n=bz(e,o))||n.enumerable});return t};var Ft=(t,e,r)=>(r=t!=null?Cz(vz(t)):{},Oz(e||!t||!t.__esModule?XE(r,"default",{value:t,enumerable:!0}):r,t));var Ln=pt((VSe,x_)=>{"use strict";var dE=process||{},EW=dE.argv||[],mE=dE.env||{},Z$=!(mE.NO_COLOR||EW.includes("--no-color"))&&(!!mE.FORCE_COLOR||EW.includes("--color")||dE.platform==="win32"||(dE.stdout||{}).isTTY&&mE.TERM!=="dumb"||!!mE.CI),eY=(t,e,r=t)=>n=>{let o=""+n,i=o.indexOf(e,t.length);return~i?t+tY(o,e,r,i)+e:t+o+e},tY=(t,e,r,n)=>{let o="",i=0;do o+=t.substring(i,n)+r,i=n+e.length,n=t.indexOf(e,i);while(~n);return o+t.substring(i)},yW=(t=Z$)=>{let e=t?eY:()=>String;return{isColorSupported:t,reset:e("\x1B[0m","\x1B[0m"),bold:e("\x1B[1m","\x1B[22m","\x1B[22m\x1B[1m"),dim:e("\x1B[2m","\x1B[22m","\x1B[22m\x1B[2m"),italic:e("\x1B[3m","\x1B[23m"),underline:e("\x1B[4m","\x1B[24m"),inverse:e("\x1B[7m","\x1B[27m"),hidden:e("\x1B[8m","\x1B[28m"),strikethrough:e("\x1B[9m","\x1B[29m"),black:e("\x1B[30m","\x1B[39m"),red:e("\x1B[31m","\x1B[39m"),green:e("\x1B[32m","\x1B[39m"),yellow:e("\x1B[33m","\x1B[39m"),blue:e("\x1B[34m","\x1B[39m"),magenta:e("\x1B[35m","\x1B[39m"),cyan:e("\x1B[36m","\x1B[39m"),white:e("\x1B[37m","\x1B[39m"),gray:e("\x1B[90m","\x1B[39m"),bgBlack:e("\x1B[40m","\x1B[49m"),bgRed:e("\x1B[41m","\x1B[49m"),bgGreen:e("\x1B[42m","\x1B[49m"),bgYellow:e("\x1B[43m","\x1B[49m"),bgBlue:e("\x1B[44m","\x1B[49m"),bgMagenta:e("\x1B[45m","\x1B[49m"),bgCyan:e("\x1B[46m","\x1B[49m"),bgWhite:e("\x1B[47m","\x1B[49m"),blackBright:e("\x1B[90m","\x1B[39m"),redBright:e("\x1B[91m","\x1B[39m"),greenBright:e("\x1B[92m","\x1B[39m"),yellowBright:e("\x1B[93m","\x1B[39m"),blueBright:e("\x1B[94m","\x1B[39m"),magentaBright:e("\x1B[95m","\x1B[39m"),cyanBright:e("\x1B[96m","\x1B[39m"),whiteBright:e("\x1B[97m","\x1B[39m"),bgBlackBright:e("\x1B[100m","\x1B[49m"),bgRedBright:e("\x1B[101m","\x1B[49m"),bgGreenBright:e("\x1B[102m","\x1B[49m"),bgYellowBright:e("\x1B[103m","\x1B[49m"),bgBlueBright:e("\x1B[104m","\x1B[49m"),bgMagentaBright:e("\x1B[105m","\x1B[49m"),bgCyanBright:e("\x1B[106m","\x1B[49m"),bgWhiteBright:e("\x1B[107m","\x1B[49m")}};x_.exports=yW();x_.exports.createColors=yW});var $W=pt(__=>{"use strict";var XW="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/".split("");__.encode=function(t){if(0<=t&&t<XW.length)return XW[t];throw new TypeError("Must be between 0 and 63: "+t)};__.decode=function(t){var e=65,r=90,n=97,o=122,i=48,s=57,a=43,u=47,f=26,p=52;return e<=t&&t<=r?t-e:n<=t&&t<=o?t-n+f:i<=t&&t<=s?t-i+p:t==a?62:t==u?63:-1}});var D_=pt(F_=>{"use strict";var YW=$W(),O_=5,ZW=1<<O_,eH=ZW-1,tH=ZW;function cY(t){return t<0?(-t<<1)+1:(t<<1)+0}function uY(t){var e=(t&1)===1,r=t>>1;return e?-r:r}F_.encode=function(e){var r="",n,o=cY(e);do n=o&eH,o>>>=O_,o>0&&(n|=tH),r+=YW.encode(n);while(o>0);return r};F_.decode=function(e,r,n){var o=e.length,i=0,s=0,a,u;do{if(r>=o)throw new Error("Expected more digits in base 64 VLQ value.");if(u=YW.decode(e.charCodeAt(r++)),u===-1)throw new Error("Invalid base64 digit: "+e.charAt(r-1));a=!!(u&tH),u&=eH,i=i+(u<<s),s+=O_}while(a);n.value=uY(i),n.rest=r}});var Cl=pt(Lt=>{"use strict";function lY(t,e,r){if(e in t)return t[e];if(arguments.length===3)return r;throw new Error('"'+e+'" is a required argument.')}Lt.getArg=lY;var rH=/^(?:([\w+\-.]+):)?\/\/(?:(\w+:\w+)@)?([\w.-]*)(?::(\d+))?(.*)$/,pY=/^data:.+\,.+$/;function Vf(t){var e=t.match(rH);return e?{scheme:e[1],auth:e[2],host:e[3],port:e[4],path:e[5]}:null}Lt.urlParse=Vf;function Sl(t){var e="";return t.scheme&&(e+=t.scheme+":"),e+="//",t.auth&&(e+=t.auth+"@"),t.host&&(e+=t.host),t.port&&(e+=":"+t.port),t.path&&(e+=t.path),e}Lt.urlGenerate=Sl;var fY=32;function hY(t){var e=[];return function(r){for(var n=0;n<e.length;n++)if(e[n].input===r){var o=e[0];return e[0]=e[n],e[n]=o,e[0].result}var i=t(r);return e.unshift({input:r,result:i}),e.length>fY&&e.pop(),i}}var w_=hY(function(e){var r=e,n=Vf(e);if(n){if(!n.path)return e;r=n.path}for(var o=Lt.isAbsolute(r),i=[],s=0,a=0;;)if(s=a,a=r.indexOf("/",s),a===-1){i.push(r.slice(s));break}else for(i.push(r.slice(s,a));a<r.length&&r[a]==="/";)a++;for(var u,f=0,a=i.length-1;a>=0;a--)u=i[a],u==="."?i.splice(a,1):u===".."?f++:f>0&&(u===""?(i.splice(a+1,f),f=0):(i.splice(a,2),f--));return r=i.join("/"),r===""&&(r=o?"/":"."),n?(n.path=r,Sl(n)):r});Lt.normalize=w_;function nH(t,e){t===""&&(t="."),e===""&&(e=".");var r=Vf(e),n=Vf(t);if(n&&(t=n.path||"/"),r&&!r.scheme)return n&&(r.scheme=n.scheme),Sl(r);if(r||e.match(pY))return e;if(n&&!n.host&&!n.path)return n.host=e,Sl(n);var o=e.charAt(0)==="/"?e:w_(t.replace(/\/+$/,"")+"/"+e);return n?(n.path=o,Sl(n)):o}Lt.join=nH;Lt.isAbsolute=function(t){return t.charAt(0)==="/"||rH.test(t)};function mY(t,e){t===""&&(t="."),t=t.replace(/\/$/,"");for(var r=0;e.indexOf(t+"/")!==0;){var n=t.lastIndexOf("/");if(n<0||(t=t.slice(0,n),t.match(/^([^\/]+:\/)?\/*$/)))return e;++r}return Array(r+1).join("../")+e.substr(t.length+1)}Lt.relative=mY;var oH=function(){var t=Object.create(null);return!("__proto__"in t)}();function iH(t){return t}function dY(t){return sH(t)?"$"+t:t}Lt.toSetString=oH?iH:dY;function xY(t){return sH(t)?t.slice(1):t}Lt.fromSetString=oH?iH:xY;function sH(t){if(!t)return!1;var e=t.length;if(e<9||t.charCodeAt(e-1)!==95||t.charCodeAt(e-2)!==95||t.charCodeAt(e-3)!==111||t.charCodeAt(e-4)!==116||t.charCodeAt(e-5)!==111||t.charCodeAt(e-6)!==114||t.charCodeAt(e-7)!==112||t.charCodeAt(e-8)!==95||t.charCodeAt(e-9)!==95)return!1;for(var r=e-10;r>=0;r--)if(t.charCodeAt(r)!==36)return!1;return!0}function gY(t,e,r){var n=ki(t.source,e.source);return n!==0||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:ki(t.name,e.name)}Lt.compareByOriginalPositions=gY;function EY(t,e,r){var n;return n=t.originalLine-e.originalLine,n!==0||(n=t.originalColumn-e.originalColumn,n!==0||r)||(n=t.generatedColumn-e.generatedColumn,n!==0)||(n=t.generatedLine-e.generatedLine,n!==0)?n:ki(t.name,e.name)}Lt.compareByOriginalPositionsNoSource=EY;function yY(t,e,r){var n=t.generatedLine-e.generatedLine;return n!==0||(n=t.generatedColumn-e.generatedColumn,n!==0||r)||(n=ki(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:ki(t.name,e.name)}Lt.compareByGeneratedPositionsDeflated=yY;function SY(t,e,r){var n=t.generatedColumn-e.generatedColumn;return n!==0||r||(n=ki(t.source,e.source),n!==0)||(n=t.originalLine-e.originalLine,n!==0)||(n=t.originalColumn-e.originalColumn,n!==0)?n:ki(t.name,e.name)}Lt.compareByGeneratedPositionsDeflatedNoLine=SY;function ki(t,e){return t===e?0:t===null?1:e===null?-1:t>e?1:-1}function CY(t,e){var r=t.generatedLine-e.generatedLine;return r!==0||(r=t.generatedColumn-e.generatedColumn,r!==0)||(r=ki(t.source,e.source),r!==0)||(r=t.originalLine-e.originalLine,r!==0)||(r=t.originalColumn-e.originalColumn,r!==0)?r:ki(t.name,e.name)}Lt.compareByGeneratedPositionsInflated=CY;function bY(t){return JSON.parse(t.replace(/^\)]}'[^\n]*\n/,""))}Lt.parseSourceMapInput=bY;function kY(t,e,r){if(e=e||"",t&&(t[t.length-1]!=="/"&&e[0]!=="/"&&(t+="/"),e=t+e),r){var n=Vf(r);if(!n)throw new Error("sourceMapURL could not be parsed");if(n.path){var o=n.path.lastIndexOf("/");o>=0&&(n.path=n.path.substring(0,o+1))}e=nH(Sl(n),e)}return w_(e)}Lt.computeSourceURL=kY});var M_=pt(aH=>{"use strict";var A_=Cl(),R_=Object.prototype.hasOwnProperty,xc=typeof Map<"u";function vi(){this._array=[],this._set=xc?new Map:Object.create(null)}vi.fromArray=function(e,r){for(var n=new vi,o=0,i=e.length;o<i;o++)n.add(e[o],r);return n};vi.prototype.size=function(){return xc?this._set.size:Object.getOwnPropertyNames(this._set).length};vi.prototype.add=function(e,r){var n=xc?e:A_.toSetString(e),o=xc?this.has(e):R_.call(this._set,n),i=this._array.length;(!o||r)&&this._array.push(e),o||(xc?this._set.set(e,i):this._set[n]=i)};vi.prototype.has=function(e){if(xc)return this._set.has(e);var r=A_.toSetString(e);return R_.call(this._set,r)};vi.prototype.indexOf=function(e){if(xc){var r=this._set.get(e);if(r>=0)return r}else{var n=A_.toSetString(e);if(R_.call(this._set,n))return this._set[n]}throw new Error('"'+e+'" is not in the set.')};vi.prototype.at=function(e){if(e>=0&&e<this._array.length)return this._array[e];throw new Error("No element indexed by "+e)};vi.prototype.toArray=function(){return this._array.slice()};aH.ArraySet=vi});var lH=pt(uH=>{"use strict";var cH=Cl();function vY(t,e){var r=t.generatedLine,n=e.generatedLine,o=t.generatedColumn,i=e.generatedColumn;return n>r||n==r&&i>=o||cH.compareByGeneratedPositionsInflated(t,e)<=0}function OE(){this._array=[],this._sorted=!0,this._last={generatedLine:-1,generatedColumn:0}}OE.prototype.unsortedForEach=function(e,r){this._array.forEach(e,r)};OE.prototype.add=function(e){vY(this._last,e)?(this._last=e,this._array.push(e)):(this._sorted=!1,this._array.push(e))};OE.prototype.toArray=function(){return this._sorted||(this._array.sort(cH.compareByGeneratedPositionsInflated),this._sorted=!0),this._array};uH.MappingList=OE});var T_=pt(pH=>{"use strict";var Kf=D_(),gt=Cl(),FE=M_().ArraySet,_Y=lH().MappingList;function yn(t){t||(t={}),this._file=gt.getArg(t,"file",null),this._sourceRoot=gt.getArg(t,"sourceRoot",null),this._skipValidation=gt.getArg(t,"skipValidation",!1),this._ignoreInvalidMapping=gt.getArg(t,"ignoreInvalidMapping",!1),this._sources=new FE,this._names=new FE,this._mappings=new _Y,this._sourcesContents=null}yn.prototype._version=3;yn.fromSourceMap=function(e,r){var n=e.sourceRoot,o=new yn(Object.assign(r||{},{file:e.file,sourceRoot:n}));return e.eachMapping(function(i){var s={generated:{line:i.generatedLine,column:i.generatedColumn}};i.source!=null&&(s.source=i.source,n!=null&&(s.source=gt.relative(n,s.source)),s.original={line:i.originalLine,column:i.originalColumn},i.name!=null&&(s.name=i.name)),o.addMapping(s)}),e.sources.forEach(function(i){var s=i;n!==null&&(s=gt.relative(n,i)),o._sources.has(s)||o._sources.add(s);var a=e.sourceContentFor(i);a!=null&&o.setSourceContent(i,a)}),o};yn.prototype.addMapping=function(e){var r=gt.getArg(e,"generated"),n=gt.getArg(e,"original",null),o=gt.getArg(e,"source",null),i=gt.getArg(e,"name",null);!this._skipValidation&&this._validateMapping(r,n,o,i)===!1||(o!=null&&(o=String(o),this._sources.has(o)||this._sources.add(o)),i!=null&&(i=String(i),this._names.has(i)||this._names.add(i)),this._mappings.add({generatedLine:r.line,generatedColumn:r.column,originalLine:n!=null&&n.line,originalColumn:n!=null&&n.column,source:o,name:i}))};yn.prototype.setSourceContent=function(e,r){var n=e;this._sourceRoot!=null&&(n=gt.relative(this._sourceRoot,n)),r!=null?(this._sourcesContents||(this._sourcesContents=Object.create(null)),this._sourcesContents[gt.toSetString(n)]=r):this._sourcesContents&&(delete this._sourcesContents[gt.toSetString(n)],Object.keys(this._sourcesContents).length===0&&(this._sourcesContents=null))};yn.prototype.applySourceMap=function(e,r,n){var o=r;if(r==null){if(e.file==null)throw new Error(`SourceMapGenerator.prototype.applySourceMap requires either an explicit source file, or the source map's "file" property. Both were omitted.`);o=e.file}var i=this._sourceRoot;i!=null&&(o=gt.relative(i,o));var s=new FE,a=new FE;this._mappings.unsortedForEach(function(u){if(u.source===o&&u.originalLine!=null){var f=e.originalPositionFor({line:u.originalLine,column:u.originalColumn});f.source!=null&&(u.source=f.source,n!=null&&(u.source=gt.join(n,u.source)),i!=null&&(u.source=gt.relative(i,u.source)),u.originalLine=f.line,u.originalColumn=f.column,f.name!=null&&(u.name=f.name))}var p=u.source;p!=null&&!s.has(p)&&s.add(p);var x=u.name;x!=null&&!a.has(x)&&a.add(x)},this),this._sources=s,this._names=a,e.sources.forEach(function(u){var f=e.sourceContentFor(u);f!=null&&(n!=null&&(u=gt.join(n,u)),i!=null&&(u=gt.relative(i,u)),this.setSourceContent(u,f))},this)};yn.prototype._validateMapping=function(e,r,n,o){if(r&&typeof r.line!="number"&&typeof r.column!="number"){var i="original.line and original.column are not numbers -- you probably meant to omit the original mapping entirely and only map the generated position. If so, pass null for the original mapping instead of an object with empty or null values.";if(this._ignoreInvalidMapping)return typeof console<"u"&&console.warn&&console.warn(i),!1;throw new Error(i)}if(!(e&&"line"in e&&"column"in e&&e.line>0&&e.column>=0&&!r&&!n&&!o)){if(e&&"line"in e&&"column"in e&&r&&"line"in r&&"column"in r&&e.line>0&&e.column>=0&&r.line>0&&r.column>=0&&n)return;var i="Invalid mapping: "+JSON.stringify({generated:e,source:n,original:r,name:o});if(this._ignoreInvalidMapping)return typeof console<"u"&&console.warn&&console.warn(i),!1;throw new Error(i)}};yn.prototype._serializeMappings=function(){for(var e=0,r=1,n=0,o=0,i=0,s=0,a="",u,f,p,x,m=this._mappings.toArray(),c=0,l=m.length;c<l;c++){if(f=m[c],u="",f.generatedLine!==r)for(e=0;f.generatedLine!==r;)u+=";",r++;else if(c>0){if(!gt.compareByGeneratedPositionsInflated(f,m[c-1]))continue;u+=","}u+=Kf.encode(f.generatedColumn-e),e=f.generatedColumn,f.source!=null&&(x=this._sources.indexOf(f.source),u+=Kf.encode(x-s),s=x,u+=Kf.encode(f.originalLine-1-o),o=f.originalLine-1,u+=Kf.encode(f.originalColumn-n),n=f.originalColumn,f.name!=null&&(p=this._names.indexOf(f.name),u+=Kf.encode(p-i),i=p)),a+=u}return a};yn.prototype._generateSourcesContent=function(e,r){return e.map(function(n){if(!this._sourcesContents)return null;r!=null&&(n=gt.relative(r,n));var o=gt.toSetString(n);return Object.prototype.hasOwnProperty.call(this._sourcesContents,o)?this._sourcesContents[o]:null},this)};yn.prototype.toJSON=function(){var e={version:this._version,sources:this._sources.toArray(),names:this._names.toArray(),mappings:this._serializeMappings()};return this._file!=null&&(e.file=this._file),this._sourceRoot!=null&&(e.sourceRoot=this._sourceRoot),this._sourcesContents&&(e.sourcesContent=this._generateSourcesContent(e.sources,e.sourceRoot)),e};yn.prototype.toString=function(){return JSON.stringify(this.toJSON())};pH.SourceMapGenerator=yn});var fH=pt(gc=>{"use strict";gc.GREATEST_LOWER_BOUND=1;gc.LEAST_UPPER_BOUND=2;function I_(t,e,r,n,o,i){var s=Math.floor((e-t)/2)+t,a=o(r,n[s],!0);return a===0?s:a>0?e-s>1?I_(s,e,r,n,o,i):i==gc.LEAST_UPPER_BOUND?e<n.length?e:-1:s:s-t>1?I_(t,s,r,n,o,i):i==gc.LEAST_UPPER_BOUND?s:t<0?-1:t}gc.search=function(e,r,n,o){if(r.length===0)return-1;var i=I_(-1,r.length,e,r,n,o||gc.GREATEST_LOWER_BOUND);if(i<0)return-1;for(;i-1>=0&&n(r[i],r[i-1],!0)===0;)--i;return i}});var dH=pt(mH=>{"use strict";function OY(t){function e(o,i,s){var a=o[i];o[i]=o[s],o[s]=a}function r(o,i){return Math.round(o+Math.random()*(i-o))}function n(o,i,s,a){if(s<a){var u=r(s,a),f=s-1;e(o,u,a);for(var p=o[a],x=s;x<a;x++)i(o[x],p,!1)<=0&&(f+=1,e(o,f,x));e(o,f+1,x);var m=f+1;n(o,i,s,m-1),n(o,i,m+1,a)}}return n}function FY(t){let e=OY.toString();return new Function(`return ${e}`)()(t)}var hH=new WeakMap;mH.quickSort=function(t,e,r=0){let n=hH.get(e);n===void 0&&(n=FY(e),hH.set(e,n)),n(t,e,r,t.length-1)}});var EH=pt(DE=>{"use strict";var j=Cl(),N_=fH(),bl=M_().ArraySet,DY=D_(),Qf=dH().quickSort;function Qe(t,e){var r=t;return typeof t=="string"&&(r=j.parseSourceMapInput(t)),r.sections!=null?new Bn(r,e):new qt(r,e)}Qe.fromSourceMap=function(t,e){return qt.fromSourceMap(t,e)};Qe.prototype._version=3;Qe.prototype.__generatedMappings=null;Object.defineProperty(Qe.prototype,"_generatedMappings",{configurable:!0,enumerable:!0,get:function(){return this.__generatedMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__generatedMappings}});Qe.prototype.__originalMappings=null;Object.defineProperty(Qe.prototype,"_originalMappings",{configurable:!0,enumerable:!0,get:function(){return this.__originalMappings||this._parseMappings(this._mappings,this.sourceRoot),this.__originalMappings}});Qe.prototype._charIsMappingSeparator=function(e,r){var n=e.charAt(r);return n===";"||n===","};Qe.prototype._parseMappings=function(e,r){throw new Error("Subclasses must implement _parseMappings")};Qe.GENERATED_ORDER=1;Qe.ORIGINAL_ORDER=2;Qe.GREATEST_LOWER_BOUND=1;Qe.LEAST_UPPER_BOUND=2;Qe.prototype.eachMapping=function(e,r,n){var o=r||null,i=n||Qe.GENERATED_ORDER,s;switch(i){case Qe.GENERATED_ORDER:s=this._generatedMappings;break;case Qe.ORIGINAL_ORDER:s=this._originalMappings;break;default:throw new Error("Unknown order of iteration.")}for(var a=this.sourceRoot,u=e.bind(o),f=this._names,p=this._sources,x=this._sourceMapURL,m=0,c=s.length;m<c;m++){var l=s[m],h=l.source===null?null:p.at(l.source);h!==null&&(h=j.computeSourceURL(a,h,x)),u({source:h,generatedLine:l.generatedLine,generatedColumn:l.generatedColumn,originalLine:l.originalLine,originalColumn:l.originalColumn,name:l.name===null?null:f.at(l.name)})}};Qe.prototype.allGeneratedPositionsFor=function(e){var r=j.getArg(e,"line"),n={source:j.getArg(e,"source"),originalLine:r,originalColumn:j.getArg(e,"column",0)};if(n.source=this._findSourceIndex(n.source),n.source<0)return[];var o=[],i=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",j.compareByOriginalPositions,N_.LEAST_UPPER_BOUND);if(i>=0){var s=this._originalMappings[i];if(e.column===void 0)for(var a=s.originalLine;s&&s.originalLine===a;)o.push({line:j.getArg(s,"generatedLine",null),column:j.getArg(s,"generatedColumn",null),lastColumn:j.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++i];else for(var u=s.originalColumn;s&&s.originalLine===r&&s.originalColumn==u;)o.push({line:j.getArg(s,"generatedLine",null),column:j.getArg(s,"generatedColumn",null),lastColumn:j.getArg(s,"lastGeneratedColumn",null)}),s=this._originalMappings[++i]}return o};DE.SourceMapConsumer=Qe;function qt(t,e){var r=t;typeof t=="string"&&(r=j.parseSourceMapInput(t));var n=j.getArg(r,"version"),o=j.getArg(r,"sources"),i=j.getArg(r,"names",[]),s=j.getArg(r,"sourceRoot",null),a=j.getArg(r,"sourcesContent",null),u=j.getArg(r,"mappings"),f=j.getArg(r,"file",null);if(n!=this._version)throw new Error("Unsupported version: "+n);s&&(s=j.normalize(s)),o=o.map(String).map(j.normalize).map(function(p){return s&&j.isAbsolute(s)&&j.isAbsolute(p)?j.relative(s,p):p}),this._names=bl.fromArray(i.map(String),!0),this._sources=bl.fromArray(o,!0),this._absoluteSources=this._sources.toArray().map(function(p){return j.computeSourceURL(s,p,e)}),this.sourceRoot=s,this.sourcesContent=a,this._mappings=u,this._sourceMapURL=e,this.file=f}qt.prototype=Object.create(Qe.prototype);qt.prototype.consumer=Qe;qt.prototype._findSourceIndex=function(t){var e=t;if(this.sourceRoot!=null&&(e=j.relative(this.sourceRoot,e)),this._sources.has(e))return this._sources.indexOf(e);var r;for(r=0;r<this._absoluteSources.length;++r)if(this._absoluteSources[r]==t)return r;return-1};qt.fromSourceMap=function(e,r){var n=Object.create(qt.prototype),o=n._names=bl.fromArray(e._names.toArray(),!0),i=n._sources=bl.fromArray(e._sources.toArray(),!0);n.sourceRoot=e._sourceRoot,n.sourcesContent=e._generateSourcesContent(n._sources.toArray(),n.sourceRoot),n.file=e._file,n._sourceMapURL=r,n._absoluteSources=n._sources.toArray().map(function(c){return j.computeSourceURL(n.sourceRoot,c,r)});for(var s=e._mappings.toArray().slice(),a=n.__generatedMappings=[],u=n.__originalMappings=[],f=0,p=s.length;f<p;f++){var x=s[f],m=new gH;m.generatedLine=x.generatedLine,m.generatedColumn=x.generatedColumn,x.source&&(m.source=i.indexOf(x.source),m.originalLine=x.originalLine,m.originalColumn=x.originalColumn,x.name&&(m.name=o.indexOf(x.name)),u.push(m)),a.push(m)}return Qf(n.__originalMappings,j.compareByOriginalPositions),n};qt.prototype._version=3;Object.defineProperty(qt.prototype,"sources",{get:function(){return this._absoluteSources.slice()}});function gH(){this.generatedLine=0,this.generatedColumn=0,this.source=null,this.originalLine=null,this.originalColumn=null,this.name=null}var P_=j.compareByGeneratedPositionsDeflatedNoLine;function xH(t,e){let r=t.length,n=t.length-e;if(!(n<=1))if(n==2){let o=t[e],i=t[e+1];P_(o,i)>0&&(t[e]=i,t[e+1]=o)}else if(n<20)for(let o=e;o<r;o++)for(let i=o;i>e;i--){let s=t[i-1],a=t[i];if(P_(s,a)<=0)break;t[i-1]=a,t[i]=s}else Qf(t,P_,e)}qt.prototype._parseMappings=function(e,r){var n=1,o=0,i=0,s=0,a=0,u=0,f=e.length,p=0,x={},m={},c=[],l=[],h,g,y,S,F;let w=0;for(;p<f;)if(e.charAt(p)===";")n++,p++,o=0,xH(l,w),w=l.length;else if(e.charAt(p)===",")p++;else{for(h=new gH,h.generatedLine=n,S=p;S<f&&!this._charIsMappingSeparator(e,S);S++);for(g=e.slice(p,S),y=[];p<S;)DY.decode(e,p,m),F=m.value,p=m.rest,y.push(F);if(y.length===2)throw new Error("Found a source, but no line and column");if(y.length===3)throw new Error("Found a source and line, but no column");if(h.generatedColumn=o+y[0],o=h.generatedColumn,y.length>1&&(h.source=a+y[1],a+=y[1],h.originalLine=i+y[2],i=h.originalLine,h.originalLine+=1,h.originalColumn=s+y[3],s=h.originalColumn,y.length>4&&(h.name=u+y[4],u+=y[4])),l.push(h),typeof h.originalLine=="number"){let z=h.source;for(;c.length<=z;)c.push(null);c[z]===null&&(c[z]=[]),c[z].push(h)}}xH(l,w),this.__generatedMappings=l;for(var M=0;M<c.length;M++)c[M]!=null&&Qf(c[M],j.compareByOriginalPositionsNoSource);this.__originalMappings=[].concat(...c)};qt.prototype._findMapping=function(e,r,n,o,i,s){if(e[n]<=0)throw new TypeError("Line must be greater than or equal to 1, got "+e[n]);if(e[o]<0)throw new TypeError("Column must be greater than or equal to 0, got "+e[o]);return N_.search(e,r,i,s)};qt.prototype.computeColumnSpans=function(){for(var e=0;e<this._generatedMappings.length;++e){var r=this._generatedMappings[e];if(e+1<this._generatedMappings.length){var n=this._generatedMappings[e+1];if(r.generatedLine===n.generatedLine){r.lastGeneratedColumn=n.generatedColumn-1;continue}}r.lastGeneratedColumn=1/0}};qt.prototype.originalPositionFor=function(e){var r={generatedLine:j.getArg(e,"line"),generatedColumn:j.getArg(e,"column")},n=this._findMapping(r,this._generatedMappings,"generatedLine","generatedColumn",j.compareByGeneratedPositionsDeflated,j.getArg(e,"bias",Qe.GREATEST_LOWER_BOUND));if(n>=0){var o=this._generatedMappings[n];if(o.generatedLine===r.generatedLine){var i=j.getArg(o,"source",null);i!==null&&(i=this._sources.at(i),i=j.computeSourceURL(this.sourceRoot,i,this._sourceMapURL));var s=j.getArg(o,"name",null);return s!==null&&(s=this._names.at(s)),{source:i,line:j.getArg(o,"originalLine",null),column:j.getArg(o,"originalColumn",null),name:s}}}return{source:null,line:null,column:null,name:null}};qt.prototype.hasContentsOfAllSources=function(){return this.sourcesContent?this.sourcesContent.length>=this._sources.size()&&!this.sourcesContent.some(function(e){return e==null}):!1};qt.prototype.sourceContentFor=function(e,r){if(!this.sourcesContent)return null;var n=this._findSourceIndex(e);if(n>=0)return this.sourcesContent[n];var o=e;this.sourceRoot!=null&&(o=j.relative(this.sourceRoot,o));var i;if(this.sourceRoot!=null&&(i=j.urlParse(this.sourceRoot))){var s=o.replace(/^file:\/\//,"");if(i.scheme=="file"&&this._sources.has(s))return this.sourcesContent[this._sources.indexOf(s)];if((!i.path||i.path=="/")&&this._sources.has("/"+o))return this.sourcesContent[this._sources.indexOf("/"+o)]}if(r)return null;throw new Error('"'+o+'" is not in the SourceMap.')};qt.prototype.generatedPositionFor=function(e){var r=j.getArg(e,"source");if(r=this._findSourceIndex(r),r<0)return{line:null,column:null,lastColumn:null};var n={source:r,originalLine:j.getArg(e,"line"),originalColumn:j.getArg(e,"column")},o=this._findMapping(n,this._originalMappings,"originalLine","originalColumn",j.compareByOriginalPositions,j.getArg(e,"bias",Qe.GREATEST_LOWER_BOUND));if(o>=0){var i=this._originalMappings[o];if(i.source===n.source)return{line:j.getArg(i,"generatedLine",null),column:j.getArg(i,"generatedColumn",null),lastColumn:j.getArg(i,"lastGeneratedColumn",null)}}return{line:null,column:null,lastColumn:null}};DE.BasicSourceMapConsumer=qt;function Bn(t,e){var r=t;typeof t=="string"&&(r=j.parseSourceMapInput(t));var n=j.getArg(r,"version"),o=j.getArg(r,"sections");if(n!=this._version)throw new Error("Unsupported version: "+n);this._sources=new bl,this._names=new bl;var i={line:-1,column:0};this._sections=o.map(function(s){if(s.url)throw new Error("Support for url field in sections not implemented.");var a=j.getArg(s,"offset"),u=j.getArg(a,"line"),f=j.getArg(a,"column");if(u<i.line||u===i.line&&f<i.column)throw new Error("Section offsets must be ordered and non-overlapping.");return i=a,{generatedOffset:{generatedLine:u+1,generatedColumn:f+1},consumer:new Qe(j.getArg(s,"map"),e)}})}Bn.prototype=Object.create(Qe.prototype);Bn.prototype.constructor=Qe;Bn.prototype._version=3;Object.defineProperty(Bn.prototype,"sources",{get:function(){for(var t=[],e=0;e<this._sections.length;e++)for(var r=0;r<this._sections[e].consumer.sources.length;r++)t.push(this._sections[e].consumer.sources[r]);return t}});Bn.prototype.originalPositionFor=function(e){var r={generatedLine:j.getArg(e,"line"),generatedColumn:j.getArg(e,"column")},n=N_.search(r,this._sections,function(i,s){var a=i.generatedLine-s.generatedOffset.generatedLine;return a||i.generatedColumn-s.generatedOffset.generatedColumn}),o=this._sections[n];return o?o.consumer.originalPositionFor({line:r.generatedLine-(o.generatedOffset.generatedLine-1),column:r.generatedColumn-(o.generatedOffset.generatedLine===r.generatedLine?o.generatedOffset.generatedColumn-1:0),bias:e.bias}):{source:null,line:null,column:null,name:null}};Bn.prototype.hasContentsOfAllSources=function(){return this._sections.every(function(e){return e.consumer.hasContentsOfAllSources()})};Bn.prototype.sourceContentFor=function(e,r){for(var n=0;n<this._sections.length;n++){var o=this._sections[n],i=o.consumer.sourceContentFor(e,!0);if(i||i==="")return i}if(r)return null;throw new Error('"'+e+'" is not in the SourceMap.')};Bn.prototype.generatedPositionFor=function(e){for(var r=0;r<this._sections.length;r++){var n=this._sections[r];if(n.consumer._findSourceIndex(j.getArg(e,"source"))!==-1){var o=n.consumer.generatedPositionFor(e);if(o){var i={line:o.line+(n.generatedOffset.generatedLine-1),column:o.column+(n.generatedOffset.generatedLine===o.line?n.generatedOffset.generatedColumn-1:0)};return i}}}return{line:null,column:null}};Bn.prototype._parseMappings=function(e,r){this.__generatedMappings=[],this.__originalMappings=[];for(var n=0;n<this._sections.length;n++)for(var o=this._sections[n],i=o.consumer._generatedMappings,s=0;s<i.length;s++){var a=i[s],u=o.consumer._sources.at(a.source);u!==null&&(u=j.computeSourceURL(o.consumer.sourceRoot,u,this._sourceMapURL)),this._sources.add(u),u=this._sources.indexOf(u);var f=null;a.name&&(f=o.consumer._names.at(a.name),this._names.add(f),f=this._names.indexOf(f));var p={source:u,generatedLine:a.generatedLine+(o.generatedOffset.generatedLine-1),generatedColumn:a.generatedColumn+(o.generatedOffset.generatedLine===a.generatedLine?o.generatedOffset.generatedColumn-1:0),originalLine:a.originalLine,originalColumn:a.originalColumn,name:f};this.__generatedMappings.push(p),typeof p.originalLine=="number"&&this.__originalMappings.push(p)}Qf(this.__generatedMappings,j.compareByGeneratedPositionsDeflated),Qf(this.__originalMappings,j.compareByOriginalPositions)};DE.IndexedSourceMapConsumer=Bn});var SH=pt(yH=>{"use strict";var wY=T_().SourceMapGenerator,wE=Cl(),AY=/(\r?\n)/,RY=10,kl="$$$isSourceNode$$$";function Xr(t,e,r,n,o){this.children=[],this.sourceContents={},this.line=t??null,this.column=e??null,this.source=r??null,this.name=o??null,this[kl]=!0,n!=null&&this.add(n)}Xr.fromStringWithSourceMap=function(e,r,n){var o=new Xr,i=e.split(AY),s=0,a=function(){var m=l(),c=l()||"";return m+c;function l(){return s<i.length?i[s++]:void 0}},u=1,f=0,p=null;return r.eachMapping(function(m){if(p!==null)if(u<m.generatedLine)x(p,a()),u++,f=0;else{var c=i[s]||"",l=c.substr(0,m.generatedColumn-f);i[s]=c.substr(m.generatedColumn-f),f=m.generatedColumn,x(p,l),p=m;return}for(;u<m.generatedLine;)o.add(a()),u++;if(f<m.generatedColumn){var c=i[s]||"";o.add(c.substr(0,m.generatedColumn)),i[s]=c.substr(m.generatedColumn),f=m.generatedColumn}p=m},this),s<i.length&&(p&&x(p,a()),o.add(i.splice(s).join(""))),r.sources.forEach(function(m){var c=r.sourceContentFor(m);c!=null&&(n!=null&&(m=wE.join(n,m)),o.setSourceContent(m,c))}),o;function x(m,c){if(m===null||m.source===void 0)o.add(c);else{var l=n?wE.join(n,m.source):m.source;o.add(new Xr(m.originalLine,m.originalColumn,l,c,m.name))}}};Xr.prototype.add=function(e){if(Array.isArray(e))e.forEach(function(r){this.add(r)},this);else if(e[kl]||typeof e=="string")e&&this.children.push(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};Xr.prototype.prepend=function(e){if(Array.isArray(e))for(var r=e.length-1;r>=0;r--)this.prepend(e[r]);else if(e[kl]||typeof e=="string")this.children.unshift(e);else throw new TypeError("Expected a SourceNode, string, or an array of SourceNodes and strings. Got "+e);return this};Xr.prototype.walk=function(e){for(var r,n=0,o=this.children.length;n<o;n++)r=this.children[n],r[kl]?r.walk(e):r!==""&&e(r,{source:this.source,line:this.line,column:this.column,name:this.name})};Xr.prototype.join=function(e){var r,n,o=this.children.length;if(o>0){for(r=[],n=0;n<o-1;n++)r.push(this.children[n]),r.push(e);r.push(this.children[n]),this.children=r}return this};Xr.prototype.replaceRight=function(e,r){var n=this.children[this.children.length-1];return n[kl]?n.replaceRight(e,r):typeof n=="string"?this.children[this.children.length-1]=n.replace(e,r):this.children.push("".replace(e,r)),this};Xr.prototype.setSourceContent=function(e,r){this.sourceContents[wE.toSetString(e)]=r};Xr.prototype.walkSourceContents=function(e){for(var r=0,n=this.children.length;r<n;r++)this.children[r][kl]&&this.children[r].walkSourceContents(e);for(var o=Object.keys(this.sourceContents),r=0,n=o.length;r<n;r++)e(wE.fromSetString(o[r]),this.sourceContents[o[r]])};Xr.prototype.toString=function(){var e="";return this.walk(function(r){e+=r}),e};Xr.prototype.toStringWithSourceMap=function(e){var r={code:"",line:1,column:0},n=new wY(e),o=!1,i=null,s=null,a=null,u=null;return this.walk(function(f,p){r.code+=f,p.source!==null&&p.line!==null&&p.column!==null?((i!==p.source||s!==p.line||a!==p.column||u!==p.name)&&n.addMapping({source:p.source,original:{line:p.line,column:p.column},generated:{line:r.line,column:r.column},name:p.name}),i=p.source,s=p.line,a=p.column,u=p.name,o=!0):o&&(n.addMapping({generated:{line:r.line,column:r.column}}),i=null,o=!1);for(var x=0,m=f.length;x<m;x++)f.charCodeAt(x)===RY?(r.line++,r.column=0,x+1===m?(i=null,o=!1):o&&n.addMapping({source:p.source,original:{line:p.line,column:p.column},generated:{line:r.line,column:r.column},name:p.name})):r.column++}),this.walkSourceContents(function(f,p){n.setSourceContent(f,p)}),{code:r.code,map:n}};yH.SourceNode=Xr});var CH=pt(AE=>{"use strict";AE.SourceMapGenerator=T_().SourceMapGenerator;AE.SourceMapConsumer=EH().SourceMapConsumer;AE.SourceNode=SH().SourceNode});var bH=pt((Xf,L_)=>{"use strict";(function(e,r){typeof Xf=="object"&&typeof L_=="object"?L_.exports=r():typeof define=="function"&&define.amd?define([],r):typeof Xf=="object"?Xf.esprima=r():e.esprima=r()})(Xf,function(){return function(t){var e={};function r(n){if(e[n])return e[n].exports;var o=e[n]={exports:{},id:n,loaded:!1};return t[n].call(o.exports,o,o.exports,r),o.loaded=!0,o.exports}return r.m=t,r.c=e,r.p="",r(0)}([function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(1),o=r(3),i=r(8),s=r(15);function a(m,c,l){var h=null,g=function(te,fe){l&&l(te,fe),h&&h.visit(te,fe)},y=typeof l=="function"?g:null,S=!1;if(c){S=typeof c.comment=="boolean"&&c.comment;var F=typeof c.attachComment=="boolean"&&c.attachComment;(S||F)&&(h=new n.CommentHandler,h.attach=F,c.comment=!0,y=g)}var w=!1;c&&typeof c.sourceType=="string"&&(w=c.sourceType==="module");var M;c&&typeof c.jsx=="boolean"&&c.jsx?M=new o.JSXParser(m,c,y):M=new i.Parser(m,c,y);var z=w?M.parseModule():M.parseScript(),Z=z;return S&&h&&(Z.comments=h.comments),M.config.tokens&&(Z.tokens=M.tokens),M.config.tolerant&&(Z.errors=M.errorHandler.errors),Z}e.parse=a;function u(m,c,l){var h=c||{};return h.sourceType="module",a(m,h,l)}e.parseModule=u;function f(m,c,l){var h=c||{};return h.sourceType="script",a(m,h,l)}e.parseScript=f;function p(m,c,l){var h=new s.Tokenizer(m,c),g;g=[];try{for(;;){var y=h.getNextToken();if(!y)break;l&&(y=l(y)),g.push(y)}}catch(S){h.errorHandler.tolerate(S)}return h.errorHandler.tolerant&&(g.errors=h.errors()),g}e.tokenize=p;var x=r(2);e.Syntax=x.Syntax,e.version="4.0.1"},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),o=function(){function i(){this.attach=!1,this.comments=[],this.stack=[],this.leading=[],this.trailing=[]}return i.prototype.insertInnerComments=function(s,a){if(s.type===n.Syntax.BlockStatement&&s.body.length===0){for(var u=[],f=this.leading.length-1;f>=0;--f){var p=this.leading[f];a.end.offset>=p.start&&(u.unshift(p.comment),this.leading.splice(f,1),this.trailing.splice(f,1))}u.length&&(s.innerComments=u)}},i.prototype.findTrailingComments=function(s){var a=[];if(this.trailing.length>0){for(var u=this.trailing.length-1;u>=0;--u){var f=this.trailing[u];f.start>=s.end.offset&&a.unshift(f.comment)}return this.trailing.length=0,a}var p=this.stack[this.stack.length-1];if(p&&p.node.trailingComments){var x=p.node.trailingComments[0];x&&x.range[0]>=s.end.offset&&(a=p.node.trailingComments,delete p.node.trailingComments)}return a},i.prototype.findLeadingComments=function(s){for(var a=[],u;this.stack.length>0;){var f=this.stack[this.stack.length-1];if(f&&f.start>=s.start.offset)u=f.node,this.stack.pop();else break}if(u){for(var p=u.leadingComments?u.leadingComments.length:0,x=p-1;x>=0;--x){var m=u.leadingComments[x];m.range[1]<=s.start.offset&&(a.unshift(m),u.leadingComments.splice(x,1))}return u.leadingComments&&u.leadingComments.length===0&&delete u.leadingComments,a}for(var x=this.leading.length-1;x>=0;--x){var f=this.leading[x];f.start<=s.start.offset&&(a.unshift(f.comment),this.leading.splice(x,1))}return a},i.prototype.visitNode=function(s,a){if(!(s.type===n.Syntax.Program&&s.body.length>0)){this.insertInnerComments(s,a);var u=this.findTrailingComments(a),f=this.findLeadingComments(a);f.length>0&&(s.leadingComments=f),u.length>0&&(s.trailingComments=u),this.stack.push({node:s,start:a.start.offset})}},i.prototype.visitComment=function(s,a){var u=s.type[0]==="L"?"Line":"Block",f={type:u,value:s.value};if(s.range&&(f.range=s.range),s.loc&&(f.loc=s.loc),this.comments.push(f),this.attach){var p={comment:{type:u,value:s.value,range:[a.start.offset,a.end.offset]},start:a.start.offset};s.loc&&(p.comment.loc=s.loc),s.type=u,this.leading.push(p),this.trailing.push(p)}},i.prototype.visit=function(s,a){s.type==="LineComment"?this.visitComment(s,a):s.type==="BlockComment"?this.visitComment(s,a):this.attach&&this.visitNode(s,a)},i}();e.CommentHandler=o},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Syntax={AssignmentExpression:"AssignmentExpression",AssignmentPattern:"AssignmentPattern",ArrayExpression:"ArrayExpression",ArrayPattern:"ArrayPattern",ArrowFunctionExpression:"ArrowFunctionExpression",AwaitExpression:"AwaitExpression",BlockStatement:"BlockStatement",BinaryExpression:"BinaryExpression",BreakStatement:"BreakStatement",CallExpression:"CallExpression",CatchClause:"CatchClause",ClassBody:"ClassBody",ClassDeclaration:"ClassDeclaration",ClassExpression:"ClassExpression",ConditionalExpression:"ConditionalExpression",ContinueStatement:"ContinueStatement",DoWhileStatement:"DoWhileStatement",DebuggerStatement:"DebuggerStatement",EmptyStatement:"EmptyStatement",ExportAllDeclaration:"ExportAllDeclaration",ExportDefaultDeclaration:"ExportDefaultDeclaration",ExportNamedDeclaration:"ExportNamedDeclaration",ExportSpecifier:"ExportSpecifier",ExpressionStatement:"ExpressionStatement",ForStatement:"ForStatement",ForOfStatement:"ForOfStatement",ForInStatement:"ForInStatement",FunctionDeclaration:"FunctionDeclaration",FunctionExpression:"FunctionExpression",Identifier:"Identifier",IfStatement:"IfStatement",ImportDeclaration:"ImportDeclaration",ImportDefaultSpecifier:"ImportDefaultSpecifier",ImportNamespaceSpecifier:"ImportNamespaceSpecifier",ImportSpecifier:"ImportSpecifier",Literal:"Literal",LabeledStatement:"LabeledStatement",LogicalExpression:"LogicalExpression",MemberExpression:"MemberExpression",MetaProperty:"MetaProperty",MethodDefinition:"MethodDefinition",NewExpression:"NewExpression",ObjectExpression:"ObjectExpression",ObjectPattern:"ObjectPattern",Program:"Program",Property:"Property",RestElement:"RestElement",ReturnStatement:"ReturnStatement",SequenceExpression:"SequenceExpression",SpreadElement:"SpreadElement",Super:"Super",SwitchCase:"SwitchCase",SwitchStatement:"SwitchStatement",TaggedTemplateExpression:"TaggedTemplateExpression",TemplateElement:"TemplateElement",TemplateLiteral:"TemplateLiteral",ThisExpression:"ThisExpression",ThrowStatement:"ThrowStatement",TryStatement:"TryStatement",UnaryExpression:"UnaryExpression",UpdateExpression:"UpdateExpression",VariableDeclaration:"VariableDeclaration",VariableDeclarator:"VariableDeclarator",WhileStatement:"WhileStatement",WithStatement:"WithStatement",YieldExpression:"YieldExpression"}},function(t,e,r){"use strict";var n=this&&this.__extends||function(){var c=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(l,h){l.__proto__=h}||function(l,h){for(var g in h)h.hasOwnProperty(g)&&(l[g]=h[g])};return function(l,h){c(l,h);function g(){this.constructor=l}l.prototype=h===null?Object.create(h):(g.prototype=h.prototype,new g)}}();Object.defineProperty(e,"__esModule",{value:!0});var o=r(4),i=r(5),s=r(6),a=r(7),u=r(8),f=r(13),p=r(14);f.TokenName[100]="JSXIdentifier",f.TokenName[101]="JSXText";function x(c){var l;switch(c.type){case s.JSXSyntax.JSXIdentifier:var h=c;l=h.name;break;case s.JSXSyntax.JSXNamespacedName:var g=c;l=x(g.namespace)+":"+x(g.name);break;case s.JSXSyntax.JSXMemberExpression:var y=c;l=x(y.object)+"."+x(y.property);break;default:break}return l}var m=function(c){n(l,c);function l(h,g,y){return c.call(this,h,g,y)||this}return l.prototype.parsePrimaryExpression=function(){return this.match("<")?this.parseJSXRoot():c.prototype.parsePrimaryExpression.call(this)},l.prototype.startJSX=function(){this.scanner.index=this.startMarker.index,this.scanner.lineNumber=this.startMarker.line,this.scanner.lineStart=this.startMarker.index-this.startMarker.column},l.prototype.finishJSX=function(){this.nextToken()},l.prototype.reenterJSX=function(){this.startJSX(),this.expectJSX("}"),this.config.tokens&&this.tokens.pop()},l.prototype.createJSXNode=function(){return this.collectComments(),{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},l.prototype.createJSXChildNode=function(){return{index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}},l.prototype.scanXHTMLEntity=function(h){for(var g="&",y=!0,S=!1,F=!1,w=!1;!this.scanner.eof()&&y&&!S;){var M=this.scanner.source[this.scanner.index];if(M===h)break;if(S=M===";",g+=M,++this.scanner.index,!S)switch(g.length){case 2:F=M==="#";break;case 3:F&&(w=M==="x",y=w||o.Character.isDecimalDigit(M.charCodeAt(0)),F=F&&!w);break;default:y=y&&!(F&&!o.Character.isDecimalDigit(M.charCodeAt(0))),y=y&&!(w&&!o.Character.isHexDigit(M.charCodeAt(0)));break}}if(y&&S&&g.length>2){var z=g.substr(1,g.length-2);F&&z.length>1?g=String.fromCharCode(parseInt(z.substr(1),10)):w&&z.length>2?g=String.fromCharCode(parseInt("0"+z.substr(1),16)):!F&&!w&&p.XHTMLEntities[z]&&(g=p.XHTMLEntities[z])}return g},l.prototype.lexJSX=function(){var h=this.scanner.source.charCodeAt(this.scanner.index);if(h===60||h===62||h===47||h===58||h===61||h===123||h===125){var g=this.scanner.source[this.scanner.index++];return{type:7,value:g,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index-1,end:this.scanner.index}}if(h===34||h===39){for(var y=this.scanner.index,S=this.scanner.source[this.scanner.index++],F="";!this.scanner.eof();){var w=this.scanner.source[this.scanner.index++];if(w===S)break;w==="&"?F+=this.scanXHTMLEntity(S):F+=w}return{type:8,value:F,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:y,end:this.scanner.index}}if(h===46){var M=this.scanner.source.charCodeAt(this.scanner.index+1),z=this.scanner.source.charCodeAt(this.scanner.index+2),g=M===46&&z===46?"...":".",y=this.scanner.index;return this.scanner.index+=g.length,{type:7,value:g,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:y,end:this.scanner.index}}if(h===96)return{type:10,value:"",lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:this.scanner.index,end:this.scanner.index};if(o.Character.isIdentifierStart(h)&&h!==92){var y=this.scanner.index;for(++this.scanner.index;!this.scanner.eof();){var w=this.scanner.source.charCodeAt(this.scanner.index);if(o.Character.isIdentifierPart(w)&&w!==92)++this.scanner.index;else if(w===45)++this.scanner.index;else break}var Z=this.scanner.source.slice(y,this.scanner.index);return{type:100,value:Z,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:y,end:this.scanner.index}}return this.scanner.lex()},l.prototype.nextJSXToken=function(){this.collectComments(),this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;var h=this.lexJSX();return this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.config.tokens&&this.tokens.push(this.convertToken(h)),h},l.prototype.nextJSXText=function(){this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart;for(var h=this.scanner.index,g="";!this.scanner.eof();){var y=this.scanner.source[this.scanner.index];if(y==="{"||y==="<")break;++this.scanner.index,g+=y,o.Character.isLineTerminator(y.charCodeAt(0))&&(++this.scanner.lineNumber,y==="\r"&&this.scanner.source[this.scanner.index]===`
`&&++this.scanner.index,this.scanner.lineStart=this.scanner.index)}this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart;var S={type:101,value:g,lineNumber:this.scanner.lineNumber,lineStart:this.scanner.lineStart,start:h,end:this.scanner.index};return g.length>0&&this.config.tokens&&this.tokens.push(this.convertToken(S)),S},l.prototype.peekJSXToken=function(){var h=this.scanner.saveState();this.scanner.scanComments();var g=this.lexJSX();return this.scanner.restoreState(h),g},l.prototype.expectJSX=function(h){var g=this.nextJSXToken();(g.type!==7||g.value!==h)&&this.throwUnexpectedToken(g)},l.prototype.matchJSX=function(h){var g=this.peekJSXToken();return g.type===7&&g.value===h},l.prototype.parseJSXIdentifier=function(){var h=this.createJSXNode(),g=this.nextJSXToken();return g.type!==100&&this.throwUnexpectedToken(g),this.finalize(h,new i.JSXIdentifier(g.value))},l.prototype.parseJSXElementName=function(){var h=this.createJSXNode(),g=this.parseJSXIdentifier();if(this.matchJSX(":")){var y=g;this.expectJSX(":");var S=this.parseJSXIdentifier();g=this.finalize(h,new i.JSXNamespacedName(y,S))}else if(this.matchJSX("."))for(;this.matchJSX(".");){var F=g;this.expectJSX(".");var w=this.parseJSXIdentifier();g=this.finalize(h,new i.JSXMemberExpression(F,w))}return g},l.prototype.parseJSXAttributeName=function(){var h=this.createJSXNode(),g,y=this.parseJSXIdentifier();if(this.matchJSX(":")){var S=y;this.expectJSX(":");var F=this.parseJSXIdentifier();g=this.finalize(h,new i.JSXNamespacedName(S,F))}else g=y;return g},l.prototype.parseJSXStringLiteralAttribute=function(){var h=this.createJSXNode(),g=this.nextJSXToken();g.type!==8&&this.throwUnexpectedToken(g);var y=this.getTokenRaw(g);return this.finalize(h,new a.Literal(g.value,y))},l.prototype.parseJSXExpressionAttribute=function(){var h=this.createJSXNode();this.expectJSX("{"),this.finishJSX(),this.match("}")&&this.tolerateError("JSX attributes must only be assigned a non-empty expression");var g=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(h,new i.JSXExpressionContainer(g))},l.prototype.parseJSXAttributeValue=function(){return this.matchJSX("{")?this.parseJSXExpressionAttribute():this.matchJSX("<")?this.parseJSXElement():this.parseJSXStringLiteralAttribute()},l.prototype.parseJSXNameValueAttribute=function(){var h=this.createJSXNode(),g=this.parseJSXAttributeName(),y=null;return this.matchJSX("=")&&(this.expectJSX("="),y=this.parseJSXAttributeValue()),this.finalize(h,new i.JSXAttribute(g,y))},l.prototype.parseJSXSpreadAttribute=function(){var h=this.createJSXNode();this.expectJSX("{"),this.expectJSX("..."),this.finishJSX();var g=this.parseAssignmentExpression();return this.reenterJSX(),this.finalize(h,new i.JSXSpreadAttribute(g))},l.prototype.parseJSXAttributes=function(){for(var h=[];!this.matchJSX("/")&&!this.matchJSX(">");){var g=this.matchJSX("{")?this.parseJSXSpreadAttribute():this.parseJSXNameValueAttribute();h.push(g)}return h},l.prototype.parseJSXOpeningElement=function(){var h=this.createJSXNode();this.expectJSX("<");var g=this.parseJSXElementName(),y=this.parseJSXAttributes(),S=this.matchJSX("/");return S&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(h,new i.JSXOpeningElement(g,S,y))},l.prototype.parseJSXBoundaryElement=function(){var h=this.createJSXNode();if(this.expectJSX("<"),this.matchJSX("/")){this.expectJSX("/");var g=this.parseJSXElementName();return this.expectJSX(">"),this.finalize(h,new i.JSXClosingElement(g))}var y=this.parseJSXElementName(),S=this.parseJSXAttributes(),F=this.matchJSX("/");return F&&this.expectJSX("/"),this.expectJSX(">"),this.finalize(h,new i.JSXOpeningElement(y,F,S))},l.prototype.parseJSXEmptyExpression=function(){var h=this.createJSXChildNode();return this.collectComments(),this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.finalize(h,new i.JSXEmptyExpression)},l.prototype.parseJSXExpressionContainer=function(){var h=this.createJSXNode();this.expectJSX("{");var g;return this.matchJSX("}")?(g=this.parseJSXEmptyExpression(),this.expectJSX("}")):(this.finishJSX(),g=this.parseAssignmentExpression(),this.reenterJSX()),this.finalize(h,new i.JSXExpressionContainer(g))},l.prototype.parseJSXChildren=function(){for(var h=[];!this.scanner.eof();){var g=this.createJSXChildNode(),y=this.nextJSXText();if(y.start<y.end){var S=this.getTokenRaw(y),F=this.finalize(g,new i.JSXText(y.value,S));h.push(F)}if(this.scanner.source[this.scanner.index]==="{"){var w=this.parseJSXExpressionContainer();h.push(w)}else break}return h},l.prototype.parseComplexJSXElement=function(h){for(var g=[];!this.scanner.eof();){h.children=h.children.concat(this.parseJSXChildren());var y=this.createJSXChildNode(),S=this.parseJSXBoundaryElement();if(S.type===s.JSXSyntax.JSXOpeningElement){var F=S;if(F.selfClosing){var w=this.finalize(y,new i.JSXElement(F,[],null));h.children.push(w)}else g.push(h),h={node:y,opening:F,closing:null,children:[]}}if(S.type===s.JSXSyntax.JSXClosingElement){h.closing=S;var M=x(h.opening.name),z=x(h.closing.name);if(M!==z&&this.tolerateError("Expected corresponding JSX closing tag for %0",M),g.length>0){var w=this.finalize(h.node,new i.JSXElement(h.opening,h.children,h.closing));h=g[g.length-1],h.children.push(w),g.pop()}else break}}return h},l.prototype.parseJSXElement=function(){var h=this.createJSXNode(),g=this.parseJSXOpeningElement(),y=[],S=null;if(!g.selfClosing){var F=this.parseComplexJSXElement({node:h,opening:g,closing:S,children:y});y=F.children,S=F.closing}return this.finalize(h,new i.JSXElement(g,y,S))},l.prototype.parseJSXRoot=function(){this.config.tokens&&this.tokens.pop(),this.startJSX();var h=this.parseJSXElement();return this.finishJSX(),h},l.prototype.isStartOfExpression=function(){return c.prototype.isStartOfExpression.call(this)||this.match("<")},l}(u.Parser);e.JSXParser=m},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r={NonAsciiIdentifierStart:/[\xAA\xB5\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0370-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386\u0388-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u05D0-\u05EA\u05F0-\u05F2\u0620-\u064A\u066E\u066F\u0671-\u06D3\u06D5\u06E5\u06E6\u06EE\u06EF\u06FA-\u06FC\u06FF\u0710\u0712-\u072F\u074D-\u07A5\u07B1\u07CA-\u07EA\u07F4\u07F5\u07FA\u0800-\u0815\u081A\u0824\u0828\u0840-\u0858\u08A0-\u08B4\u0904-\u0939\u093D\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BD\u09CE\u09DC\u09DD\u09DF-\u09E1\u09F0\u09F1\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A59-\u0A5C\u0A5E\u0A72-\u0A74\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABD\u0AD0\u0AE0\u0AE1\u0AF9\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3D\u0B5C\u0B5D\u0B5F-\u0B61\u0B71\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BD0\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D\u0C58-\u0C5A\u0C60\u0C61\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBD\u0CDE\u0CE0\u0CE1\u0CF1\u0CF2\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D\u0D4E\u0D5F-\u0D61\u0D7A-\u0D7F\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0E01-\u0E30\u0E32\u0E33\u0E40-\u0E46\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB0\u0EB2\u0EB3\u0EBD\u0EC0-\u0EC4\u0EC6\u0EDC-\u0EDF\u0F00\u0F40-\u0F47\u0F49-\u0F6C\u0F88-\u0F8C\u1000-\u102A\u103F\u1050-\u1055\u105A-\u105D\u1061\u1065\u1066\u106E-\u1070\u1075-\u1081\u108E\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176C\u176E-\u1770\u1780-\u17B3\u17D7\u17DC\u1820-\u1877\u1880-\u18A8\u18AA\u18B0-\u18F5\u1900-\u191E\u1950-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u1A00-\u1A16\u1A20-\u1A54\u1AA7\u1B05-\u1B33\u1B45-\u1B4B\u1B83-\u1BA0\u1BAE\u1BAF\u1BBA-\u1BE5\u1C00-\u1C23\u1C4D-\u1C4F\u1C5A-\u1C7D\u1CE9-\u1CEC\u1CEE-\u1CF1\u1CF5\u1CF6\u1D00-\u1DBF\u1E00-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u2071\u207F\u2090-\u209C\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CEE\u2CF2\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D80-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303C\u3041-\u3096\u309B-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA61F\uA62A\uA62B\uA640-\uA66E\uA67F-\uA69D\uA6A0-\uA6EF\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA801\uA803-\uA805\uA807-\uA80A\uA80C-\uA822\uA840-\uA873\uA882-\uA8B3\uA8F2-\uA8F7\uA8FB\uA8FD\uA90A-\uA925\uA930-\uA946\uA960-\uA97C\uA984-\uA9B2\uA9CF\uA9E0-\uA9E4\uA9E6-\uA9EF\uA9FA-\uA9FE\uAA00-\uAA28\uAA40-\uAA42\uAA44-\uAA4B\uAA60-\uAA76\uAA7A\uAA7E-\uAAAF\uAAB1\uAAB5\uAAB6\uAAB9-\uAABD\uAAC0\uAAC2\uAADB-\uAADD\uAAE0-\uAAEA\uAAF2-\uAAF4\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABE2\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D\uFB1F-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE70-\uFE74\uFE76-\uFEFC\uFF21-\uFF3A\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDE80-\uDE9C\uDEA0-\uDED0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF75\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00\uDE10-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE4\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC03-\uDC37\uDC83-\uDCAF\uDCD0-\uDCE8\uDD03-\uDD26\uDD50-\uDD72\uDD76\uDD83-\uDDB2\uDDC1-\uDDC4\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE2B\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEDE\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3D\uDF50\uDF5D-\uDF61]|\uD805[\uDC80-\uDCAF\uDCC4\uDCC5\uDCC7\uDD80-\uDDAE\uDDD8-\uDDDB\uDE00-\uDE2F\uDE44\uDE80-\uDEAA\uDF00-\uDF19]|\uD806[\uDCA0-\uDCDF\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDED0-\uDEED\uDF00-\uDF2F\uDF40-\uDF43\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50\uDF93-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB]|\uD83A[\uDC00-\uDCC4]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]/,NonAsciiIdentifierPart:/[\xAA\xB5\xB7\xBA\xC0-\xD6\xD8-\xF6\xF8-\u02C1\u02C6-\u02D1\u02E0-\u02E4\u02EC\u02EE\u0300-\u0374\u0376\u0377\u037A-\u037D\u037F\u0386-\u038A\u038C\u038E-\u03A1\u03A3-\u03F5\u03F7-\u0481\u0483-\u0487\u048A-\u052F\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u05D0-\u05EA\u05F0-\u05F2\u0610-\u061A\u0620-\u0669\u066E-\u06D3\u06D5-\u06DC\u06DF-\u06E8\u06EA-\u06FC\u06FF\u0710-\u074A\u074D-\u07B1\u07C0-\u07F5\u07FA\u0800-\u082D\u0840-\u085B\u08A0-\u08B4\u08E3-\u0963\u0966-\u096F\u0971-\u0983\u0985-\u098C\u098F\u0990\u0993-\u09A8\u09AA-\u09B0\u09B2\u09B6-\u09B9\u09BC-\u09C4\u09C7\u09C8\u09CB-\u09CE\u09D7\u09DC\u09DD\u09DF-\u09E3\u09E6-\u09F1\u0A01-\u0A03\u0A05-\u0A0A\u0A0F\u0A10\u0A13-\u0A28\u0A2A-\u0A30\u0A32\u0A33\u0A35\u0A36\u0A38\u0A39\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A59-\u0A5C\u0A5E\u0A66-\u0A75\u0A81-\u0A83\u0A85-\u0A8D\u0A8F-\u0A91\u0A93-\u0AA8\u0AAA-\u0AB0\u0AB2\u0AB3\u0AB5-\u0AB9\u0ABC-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AD0\u0AE0-\u0AE3\u0AE6-\u0AEF\u0AF9\u0B01-\u0B03\u0B05-\u0B0C\u0B0F\u0B10\u0B13-\u0B28\u0B2A-\u0B30\u0B32\u0B33\u0B35-\u0B39\u0B3C-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B5C\u0B5D\u0B5F-\u0B63\u0B66-\u0B6F\u0B71\u0B82\u0B83\u0B85-\u0B8A\u0B8E-\u0B90\u0B92-\u0B95\u0B99\u0B9A\u0B9C\u0B9E\u0B9F\u0BA3\u0BA4\u0BA8-\u0BAA\u0BAE-\u0BB9\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD0\u0BD7\u0BE6-\u0BEF\u0C00-\u0C03\u0C05-\u0C0C\u0C0E-\u0C10\u0C12-\u0C28\u0C2A-\u0C39\u0C3D-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C58-\u0C5A\u0C60-\u0C63\u0C66-\u0C6F\u0C81-\u0C83\u0C85-\u0C8C\u0C8E-\u0C90\u0C92-\u0CA8\u0CAA-\u0CB3\u0CB5-\u0CB9\u0CBC-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CDE\u0CE0-\u0CE3\u0CE6-\u0CEF\u0CF1\u0CF2\u0D01-\u0D03\u0D05-\u0D0C\u0D0E-\u0D10\u0D12-\u0D3A\u0D3D-\u0D44\u0D46-\u0D48\u0D4A-\u0D4E\u0D57\u0D5F-\u0D63\u0D66-\u0D6F\u0D7A-\u0D7F\u0D82\u0D83\u0D85-\u0D96\u0D9A-\u0DB1\u0DB3-\u0DBB\u0DBD\u0DC0-\u0DC6\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DE6-\u0DEF\u0DF2\u0DF3\u0E01-\u0E3A\u0E40-\u0E4E\u0E50-\u0E59\u0E81\u0E82\u0E84\u0E87\u0E88\u0E8A\u0E8D\u0E94-\u0E97\u0E99-\u0E9F\u0EA1-\u0EA3\u0EA5\u0EA7\u0EAA\u0EAB\u0EAD-\u0EB9\u0EBB-\u0EBD\u0EC0-\u0EC4\u0EC6\u0EC8-\u0ECD\u0ED0-\u0ED9\u0EDC-\u0EDF\u0F00\u0F18\u0F19\u0F20-\u0F29\u0F35\u0F37\u0F39\u0F3E-\u0F47\u0F49-\u0F6C\u0F71-\u0F84\u0F86-\u0F97\u0F99-\u0FBC\u0FC6\u1000-\u1049\u1050-\u109D\u10A0-\u10C5\u10C7\u10CD\u10D0-\u10FA\u10FC-\u1248\u124A-\u124D\u1250-\u1256\u1258\u125A-\u125D\u1260-\u1288\u128A-\u128D\u1290-\u12B0\u12B2-\u12B5\u12B8-\u12BE\u12C0\u12C2-\u12C5\u12C8-\u12D6\u12D8-\u1310\u1312-\u1315\u1318-\u135A\u135D-\u135F\u1369-\u1371\u1380-\u138F\u13A0-\u13F5\u13F8-\u13FD\u1401-\u166C\u166F-\u167F\u1681-\u169A\u16A0-\u16EA\u16EE-\u16F8\u1700-\u170C\u170E-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176C\u176E-\u1770\u1772\u1773\u1780-\u17D3\u17D7\u17DC\u17DD\u17E0-\u17E9\u180B-\u180D\u1810-\u1819\u1820-\u1877\u1880-\u18AA\u18B0-\u18F5\u1900-\u191E\u1920-\u192B\u1930-\u193B\u1946-\u196D\u1970-\u1974\u1980-\u19AB\u19B0-\u19C9\u19D0-\u19DA\u1A00-\u1A1B\u1A20-\u1A5E\u1A60-\u1A7C\u1A7F-\u1A89\u1A90-\u1A99\u1AA7\u1AB0-\u1ABD\u1B00-\u1B4B\u1B50-\u1B59\u1B6B-\u1B73\u1B80-\u1BF3\u1C00-\u1C37\u1C40-\u1C49\u1C4D-\u1C7D\u1CD0-\u1CD2\u1CD4-\u1CF6\u1CF8\u1CF9\u1D00-\u1DF5\u1DFC-\u1F15\u1F18-\u1F1D\u1F20-\u1F45\u1F48-\u1F4D\u1F50-\u1F57\u1F59\u1F5B\u1F5D\u1F5F-\u1F7D\u1F80-\u1FB4\u1FB6-\u1FBC\u1FBE\u1FC2-\u1FC4\u1FC6-\u1FCC\u1FD0-\u1FD3\u1FD6-\u1FDB\u1FE0-\u1FEC\u1FF2-\u1FF4\u1FF6-\u1FFC\u200C\u200D\u203F\u2040\u2054\u2071\u207F\u2090-\u209C\u20D0-\u20DC\u20E1\u20E5-\u20F0\u2102\u2107\u210A-\u2113\u2115\u2118-\u211D\u2124\u2126\u2128\u212A-\u2139\u213C-\u213F\u2145-\u2149\u214E\u2160-\u2188\u2C00-\u2C2E\u2C30-\u2C5E\u2C60-\u2CE4\u2CEB-\u2CF3\u2D00-\u2D25\u2D27\u2D2D\u2D30-\u2D67\u2D6F\u2D7F-\u2D96\u2DA0-\u2DA6\u2DA8-\u2DAE\u2DB0-\u2DB6\u2DB8-\u2DBE\u2DC0-\u2DC6\u2DC8-\u2DCE\u2DD0-\u2DD6\u2DD8-\u2DDE\u2DE0-\u2DFF\u3005-\u3007\u3021-\u302F\u3031-\u3035\u3038-\u303C\u3041-\u3096\u3099-\u309F\u30A1-\u30FA\u30FC-\u30FF\u3105-\u312D\u3131-\u318E\u31A0-\u31BA\u31F0-\u31FF\u3400-\u4DB5\u4E00-\u9FD5\uA000-\uA48C\uA4D0-\uA4FD\uA500-\uA60C\uA610-\uA62B\uA640-\uA66F\uA674-\uA67D\uA67F-\uA6F1\uA717-\uA71F\uA722-\uA788\uA78B-\uA7AD\uA7B0-\uA7B7\uA7F7-\uA827\uA840-\uA873\uA880-\uA8C4\uA8D0-\uA8D9\uA8E0-\uA8F7\uA8FB\uA8FD\uA900-\uA92D\uA930-\uA953\uA960-\uA97C\uA980-\uA9C0\uA9CF-\uA9D9\uA9E0-\uA9FE\uAA00-\uAA36\uAA40-\uAA4D\uAA50-\uAA59\uAA60-\uAA76\uAA7A-\uAAC2\uAADB-\uAADD\uAAE0-\uAAEF\uAAF2-\uAAF6\uAB01-\uAB06\uAB09-\uAB0E\uAB11-\uAB16\uAB20-\uAB26\uAB28-\uAB2E\uAB30-\uAB5A\uAB5C-\uAB65\uAB70-\uABEA\uABEC\uABED\uABF0-\uABF9\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFA6D\uFA70-\uFAD9\uFB00-\uFB06\uFB13-\uFB17\uFB1D-\uFB28\uFB2A-\uFB36\uFB38-\uFB3C\uFB3E\uFB40\uFB41\uFB43\uFB44\uFB46-\uFBB1\uFBD3-\uFD3D\uFD50-\uFD8F\uFD92-\uFDC7\uFDF0-\uFDFB\uFE00-\uFE0F\uFE20-\uFE2F\uFE33\uFE34\uFE4D-\uFE4F\uFE70-\uFE74\uFE76-\uFEFC\uFF10-\uFF19\uFF21-\uFF3A\uFF3F\uFF41-\uFF5A\uFF66-\uFFBE\uFFC2-\uFFC7\uFFCA-\uFFCF\uFFD2-\uFFD7\uFFDA-\uFFDC]|\uD800[\uDC00-\uDC0B\uDC0D-\uDC26\uDC28-\uDC3A\uDC3C\uDC3D\uDC3F-\uDC4D\uDC50-\uDC5D\uDC80-\uDCFA\uDD40-\uDD74\uDDFD\uDE80-\uDE9C\uDEA0-\uDED0\uDEE0\uDF00-\uDF1F\uDF30-\uDF4A\uDF50-\uDF7A\uDF80-\uDF9D\uDFA0-\uDFC3\uDFC8-\uDFCF\uDFD1-\uDFD5]|\uD801[\uDC00-\uDC9D\uDCA0-\uDCA9\uDD00-\uDD27\uDD30-\uDD63\uDE00-\uDF36\uDF40-\uDF55\uDF60-\uDF67]|\uD802[\uDC00-\uDC05\uDC08\uDC0A-\uDC35\uDC37\uDC38\uDC3C\uDC3F-\uDC55\uDC60-\uDC76\uDC80-\uDC9E\uDCE0-\uDCF2\uDCF4\uDCF5\uDD00-\uDD15\uDD20-\uDD39\uDD80-\uDDB7\uDDBE\uDDBF\uDE00-\uDE03\uDE05\uDE06\uDE0C-\uDE13\uDE15-\uDE17\uDE19-\uDE33\uDE38-\uDE3A\uDE3F\uDE60-\uDE7C\uDE80-\uDE9C\uDEC0-\uDEC7\uDEC9-\uDEE6\uDF00-\uDF35\uDF40-\uDF55\uDF60-\uDF72\uDF80-\uDF91]|\uD803[\uDC00-\uDC48\uDC80-\uDCB2\uDCC0-\uDCF2]|\uD804[\uDC00-\uDC46\uDC66-\uDC6F\uDC7F-\uDCBA\uDCD0-\uDCE8\uDCF0-\uDCF9\uDD00-\uDD34\uDD36-\uDD3F\uDD50-\uDD73\uDD76\uDD80-\uDDC4\uDDCA-\uDDCC\uDDD0-\uDDDA\uDDDC\uDE00-\uDE11\uDE13-\uDE37\uDE80-\uDE86\uDE88\uDE8A-\uDE8D\uDE8F-\uDE9D\uDE9F-\uDEA8\uDEB0-\uDEEA\uDEF0-\uDEF9\uDF00-\uDF03\uDF05-\uDF0C\uDF0F\uDF10\uDF13-\uDF28\uDF2A-\uDF30\uDF32\uDF33\uDF35-\uDF39\uDF3C-\uDF44\uDF47\uDF48\uDF4B-\uDF4D\uDF50\uDF57\uDF5D-\uDF63\uDF66-\uDF6C\uDF70-\uDF74]|\uD805[\uDC80-\uDCC5\uDCC7\uDCD0-\uDCD9\uDD80-\uDDB5\uDDB8-\uDDC0\uDDD8-\uDDDD\uDE00-\uDE40\uDE44\uDE50-\uDE59\uDE80-\uDEB7\uDEC0-\uDEC9\uDF00-\uDF19\uDF1D-\uDF2B\uDF30-\uDF39]|\uD806[\uDCA0-\uDCE9\uDCFF\uDEC0-\uDEF8]|\uD808[\uDC00-\uDF99]|\uD809[\uDC00-\uDC6E\uDC80-\uDD43]|[\uD80C\uD840-\uD868\uD86A-\uD86C\uD86F-\uD872][\uDC00-\uDFFF]|\uD80D[\uDC00-\uDC2E]|\uD811[\uDC00-\uDE46]|\uD81A[\uDC00-\uDE38\uDE40-\uDE5E\uDE60-\uDE69\uDED0-\uDEED\uDEF0-\uDEF4\uDF00-\uDF36\uDF40-\uDF43\uDF50-\uDF59\uDF63-\uDF77\uDF7D-\uDF8F]|\uD81B[\uDF00-\uDF44\uDF50-\uDF7E\uDF8F-\uDF9F]|\uD82C[\uDC00\uDC01]|\uD82F[\uDC00-\uDC6A\uDC70-\uDC7C\uDC80-\uDC88\uDC90-\uDC99\uDC9D\uDC9E]|\uD834[\uDD65-\uDD69\uDD6D-\uDD72\uDD7B-\uDD82\uDD85-\uDD8B\uDDAA-\uDDAD\uDE42-\uDE44]|\uD835[\uDC00-\uDC54\uDC56-\uDC9C\uDC9E\uDC9F\uDCA2\uDCA5\uDCA6\uDCA9-\uDCAC\uDCAE-\uDCB9\uDCBB\uDCBD-\uDCC3\uDCC5-\uDD05\uDD07-\uDD0A\uDD0D-\uDD14\uDD16-\uDD1C\uDD1E-\uDD39\uDD3B-\uDD3E\uDD40-\uDD44\uDD46\uDD4A-\uDD50\uDD52-\uDEA5\uDEA8-\uDEC0\uDEC2-\uDEDA\uDEDC-\uDEFA\uDEFC-\uDF14\uDF16-\uDF34\uDF36-\uDF4E\uDF50-\uDF6E\uDF70-\uDF88\uDF8A-\uDFA8\uDFAA-\uDFC2\uDFC4-\uDFCB\uDFCE-\uDFFF]|\uD836[\uDE00-\uDE36\uDE3B-\uDE6C\uDE75\uDE84\uDE9B-\uDE9F\uDEA1-\uDEAF]|\uD83A[\uDC00-\uDCC4\uDCD0-\uDCD6]|\uD83B[\uDE00-\uDE03\uDE05-\uDE1F\uDE21\uDE22\uDE24\uDE27\uDE29-\uDE32\uDE34-\uDE37\uDE39\uDE3B\uDE42\uDE47\uDE49\uDE4B\uDE4D-\uDE4F\uDE51\uDE52\uDE54\uDE57\uDE59\uDE5B\uDE5D\uDE5F\uDE61\uDE62\uDE64\uDE67-\uDE6A\uDE6C-\uDE72\uDE74-\uDE77\uDE79-\uDE7C\uDE7E\uDE80-\uDE89\uDE8B-\uDE9B\uDEA1-\uDEA3\uDEA5-\uDEA9\uDEAB-\uDEBB]|\uD869[\uDC00-\uDED6\uDF00-\uDFFF]|\uD86D[\uDC00-\uDF34\uDF40-\uDFFF]|\uD86E[\uDC00-\uDC1D\uDC20-\uDFFF]|\uD873[\uDC00-\uDEA1]|\uD87E[\uDC00-\uDE1D]|\uDB40[\uDD00-\uDDEF]/};e.Character={fromCodePoint:function(n){return n<65536?String.fromCharCode(n):String.fromCharCode(55296+(n-65536>>10))+String.fromCharCode(56320+(n-65536&1023))},isWhiteSpace:function(n){return n===32||n===9||n===11||n===12||n===160||n>=5760&&[5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(n)>=0},isLineTerminator:function(n){return n===10||n===13||n===8232||n===8233},isIdentifierStart:function(n){return n===36||n===95||n>=65&&n<=90||n>=97&&n<=122||n===92||n>=128&&r.NonAsciiIdentifierStart.test(e.Character.fromCodePoint(n))},isIdentifierPart:function(n){return n===36||n===95||n>=65&&n<=90||n>=97&&n<=122||n>=48&&n<=57||n===92||n>=128&&r.NonAsciiIdentifierPart.test(e.Character.fromCodePoint(n))},isDecimalDigit:function(n){return n>=48&&n<=57},isHexDigit:function(n){return n>=48&&n<=57||n>=65&&n<=70||n>=97&&n<=102},isOctalDigit:function(n){return n>=48&&n<=55}}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(6),o=function(){function h(g){this.type=n.JSXSyntax.JSXClosingElement,this.name=g}return h}();e.JSXClosingElement=o;var i=function(){function h(g,y,S){this.type=n.JSXSyntax.JSXElement,this.openingElement=g,this.children=y,this.closingElement=S}return h}();e.JSXElement=i;var s=function(){function h(){this.type=n.JSXSyntax.JSXEmptyExpression}return h}();e.JSXEmptyExpression=s;var a=function(){function h(g){this.type=n.JSXSyntax.JSXExpressionContainer,this.expression=g}return h}();e.JSXExpressionContainer=a;var u=function(){function h(g){this.type=n.JSXSyntax.JSXIdentifier,this.name=g}return h}();e.JSXIdentifier=u;var f=function(){function h(g,y){this.type=n.JSXSyntax.JSXMemberExpression,this.object=g,this.property=y}return h}();e.JSXMemberExpression=f;var p=function(){function h(g,y){this.type=n.JSXSyntax.JSXAttribute,this.name=g,this.value=y}return h}();e.JSXAttribute=p;var x=function(){function h(g,y){this.type=n.JSXSyntax.JSXNamespacedName,this.namespace=g,this.name=y}return h}();e.JSXNamespacedName=x;var m=function(){function h(g,y,S){this.type=n.JSXSyntax.JSXOpeningElement,this.name=g,this.selfClosing=y,this.attributes=S}return h}();e.JSXOpeningElement=m;var c=function(){function h(g){this.type=n.JSXSyntax.JSXSpreadAttribute,this.argument=g}return h}();e.JSXSpreadAttribute=c;var l=function(){function h(g,y){this.type=n.JSXSyntax.JSXText,this.value=g,this.raw=y}return h}();e.JSXText=l},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.JSXSyntax={JSXAttribute:"JSXAttribute",JSXClosingElement:"JSXClosingElement",JSXElement:"JSXElement",JSXEmptyExpression:"JSXEmptyExpression",JSXExpressionContainer:"JSXExpressionContainer",JSXIdentifier:"JSXIdentifier",JSXMemberExpression:"JSXMemberExpression",JSXNamespacedName:"JSXNamespacedName",JSXOpeningElement:"JSXOpeningElement",JSXSpreadAttribute:"JSXSpreadAttribute",JSXText:"JSXText"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(2),o=function(){function _(O){this.type=n.Syntax.ArrayExpression,this.elements=O}return _}();e.ArrayExpression=o;var i=function(){function _(O){this.type=n.Syntax.ArrayPattern,this.elements=O}return _}();e.ArrayPattern=i;var s=function(){function _(O,P,pe){this.type=n.Syntax.ArrowFunctionExpression,this.id=null,this.params=O,this.body=P,this.generator=!1,this.expression=pe,this.async=!1}return _}();e.ArrowFunctionExpression=s;var a=function(){function _(O,P,pe){this.type=n.Syntax.AssignmentExpression,this.operator=O,this.left=P,this.right=pe}return _}();e.AssignmentExpression=a;var u=function(){function _(O,P){this.type=n.Syntax.AssignmentPattern,this.left=O,this.right=P}return _}();e.AssignmentPattern=u;var f=function(){function _(O,P,pe){this.type=n.Syntax.ArrowFunctionExpression,this.id=null,this.params=O,this.body=P,this.generator=!1,this.expression=pe,this.async=!0}return _}();e.AsyncArrowFunctionExpression=f;var p=function(){function _(O,P,pe){this.type=n.Syntax.FunctionDeclaration,this.id=O,this.params=P,this.body=pe,this.generator=!1,this.expression=!1,this.async=!0}return _}();e.AsyncFunctionDeclaration=p;var x=function(){function _(O,P,pe){this.type=n.Syntax.FunctionExpression,this.id=O,this.params=P,this.body=pe,this.generator=!1,this.expression=!1,this.async=!0}return _}();e.AsyncFunctionExpression=x;var m=function(){function _(O){this.type=n.Syntax.AwaitExpression,this.argument=O}return _}();e.AwaitExpression=m;var c=function(){function _(O,P,pe){var Pr=O==="||"||O==="&&";this.type=Pr?n.Syntax.LogicalExpression:n.Syntax.BinaryExpression,this.operator=O,this.left=P,this.right=pe}return _}();e.BinaryExpression=c;var l=function(){function _(O){this.type=n.Syntax.BlockStatement,this.body=O}return _}();e.BlockStatement=l;var h=function(){function _(O){this.type=n.Syntax.BreakStatement,this.label=O}return _}();e.BreakStatement=h;var g=function(){function _(O,P){this.type=n.Syntax.CallExpression,this.callee=O,this.arguments=P}return _}();e.CallExpression=g;var y=function(){function _(O,P){this.type=n.Syntax.CatchClause,this.param=O,this.body=P}return _}();e.CatchClause=y;var S=function(){function _(O){this.type=n.Syntax.ClassBody,this.body=O}return _}();e.ClassBody=S;var F=function(){function _(O,P,pe){this.type=n.Syntax.ClassDeclaration,this.id=O,this.superClass=P,this.body=pe}return _}();e.ClassDeclaration=F;var w=function(){function _(O,P,pe){this.type=n.Syntax.ClassExpression,this.id=O,this.superClass=P,this.body=pe}return _}();e.ClassExpression=w;var M=function(){function _(O,P){this.type=n.Syntax.MemberExpression,this.computed=!0,this.object=O,this.property=P}return _}();e.ComputedMemberExpression=M;var z=function(){function _(O,P,pe){this.type=n.Syntax.ConditionalExpression,this.test=O,this.consequent=P,this.alternate=pe}return _}();e.ConditionalExpression=z;var Z=function(){function _(O){this.type=n.Syntax.ContinueStatement,this.label=O}return _}();e.ContinueStatement=Z;var te=function(){function _(){this.type=n.Syntax.DebuggerStatement}return _}();e.DebuggerStatement=te;var fe=function(){function _(O,P){this.type=n.Syntax.ExpressionStatement,this.expression=O,this.directive=P}return _}();e.Directive=fe;var Fe=function(){function _(O,P){this.type=n.Syntax.DoWhileStatement,this.body=O,this.test=P}return _}();e.DoWhileStatement=Fe;var De=function(){function _(){this.type=n.Syntax.EmptyStatement}return _}();e.EmptyStatement=De;var Bt=function(){function _(O){this.type=n.Syntax.ExportAllDeclaration,this.source=O}return _}();e.ExportAllDeclaration=Bt;var Fi=function(){function _(O){this.type=n.Syntax.ExportDefaultDeclaration,this.declaration=O}return _}();e.ExportDefaultDeclaration=Fi;var Ao=function(){function _(O,P,pe){this.type=n.Syntax.ExportNamedDeclaration,this.declaration=O,this.specifiers=P,this.source=pe}return _}();e.ExportNamedDeclaration=Ao;var bc=function(){function _(O,P){this.type=n.Syntax.ExportSpecifier,this.exported=P,this.local=O}return _}();e.ExportSpecifier=bc;var Zr=function(){function _(O){this.type=n.Syntax.ExpressionStatement,this.expression=O}return _}();e.ExpressionStatement=Zr;var tr=function(){function _(O,P,pe){this.type=n.Syntax.ForInStatement,this.left=O,this.right=P,this.body=pe,this.each=!1}return _}();e.ForInStatement=tr;var Ps=function(){function _(O,P,pe){this.type=n.Syntax.ForOfStatement,this.left=O,this.right=P,this.body=pe}return _}();e.ForOfStatement=Ps;var Dl=function(){function _(O,P,pe,Pr){this.type=n.Syntax.ForStatement,this.init=O,this.test=P,this.update=pe,this.body=Pr}return _}();e.ForStatement=Dl;var Ns=function(){function _(O,P,pe,Pr){this.type=n.Syntax.FunctionDeclaration,this.id=O,this.params=P,this.body=pe,this.generator=Pr,this.expression=!1,this.async=!1}return _}();e.FunctionDeclaration=Ns;var PU=function(){function _(O,P,pe,Pr){this.type=n.Syntax.FunctionExpression,this.id=O,this.params=P,this.body=pe,this.generator=Pr,this.expression=!1,this.async=!1}return _}();e.FunctionExpression=PU;var NU=function(){function _(O){this.type=n.Syntax.Identifier,this.name=O}return _}();e.Identifier=NU;var LU=function(){function _(O,P,pe){this.type=n.Syntax.IfStatement,this.test=O,this.consequent=P,this.alternate=pe}return _}();e.IfStatement=LU;var BU=function(){function _(O,P){this.type=n.Syntax.ImportDeclaration,this.specifiers=O,this.source=P}return _}();e.ImportDeclaration=BU;var WU=function(){function _(O){this.type=n.Syntax.ImportDefaultSpecifier,this.local=O}return _}();e.ImportDefaultSpecifier=WU;var HU=function(){function _(O){this.type=n.Syntax.ImportNamespaceSpecifier,this.local=O}return _}();e.ImportNamespaceSpecifier=HU;var UU=function(){function _(O,P){this.type=n.Syntax.ImportSpecifier,this.local=O,this.imported=P}return _}();e.ImportSpecifier=UU;var zU=function(){function _(O,P){this.type=n.Syntax.LabeledStatement,this.label=O,this.body=P}return _}();e.LabeledStatement=zU;var qU=function(){function _(O,P){this.type=n.Syntax.Literal,this.value=O,this.raw=P}return _}();e.Literal=qU;var jU=function(){function _(O,P){this.type=n.Syntax.MetaProperty,this.meta=O,this.property=P}return _}();e.MetaProperty=jU;var GU=function(){function _(O,P,pe,Pr,QE){this.type=n.Syntax.MethodDefinition,this.key=O,this.computed=P,this.value=pe,this.kind=Pr,this.static=QE}return _}();e.MethodDefinition=GU;var JU=function(){function _(O){this.type=n.Syntax.Program,this.body=O,this.sourceType="module"}return _}();e.Module=JU;var VU=function(){function _(O,P){this.type=n.Syntax.NewExpression,this.callee=O,this.arguments=P}return _}();e.NewExpression=VU;var KU=function(){function _(O){this.type=n.Syntax.ObjectExpression,this.properties=O}return _}();e.ObjectExpression=KU;var QU=function(){function _(O){this.type=n.Syntax.ObjectPattern,this.properties=O}return _}();e.ObjectPattern=QU;var XU=function(){function _(O,P,pe,Pr,QE,Sz){this.type=n.Syntax.Property,this.key=P,this.computed=pe,this.value=Pr,this.kind=O,this.method=QE,this.shorthand=Sz}return _}();e.Property=XU;var $U=function(){function _(O,P,pe,Pr){this.type=n.Syntax.Literal,this.value=O,this.raw=P,this.regex={pattern:pe,flags:Pr}}return _}();e.RegexLiteral=$U;var YU=function(){function _(O){this.type=n.Syntax.RestElement,this.argument=O}return _}();e.RestElement=YU;var ZU=function(){function _(O){this.type=n.Syntax.ReturnStatement,this.argument=O}return _}();e.ReturnStatement=ZU;var ez=function(){function _(O){this.type=n.Syntax.Program,this.body=O,this.sourceType="script"}return _}();e.Script=ez;var tz=function(){function _(O){this.type=n.Syntax.SequenceExpression,this.expressions=O}return _}();e.SequenceExpression=tz;var rz=function(){function _(O){this.type=n.Syntax.SpreadElement,this.argument=O}return _}();e.SpreadElement=rz;var nz=function(){function _(O,P){this.type=n.Syntax.MemberExpression,this.computed=!1,this.object=O,this.property=P}return _}();e.StaticMemberExpression=nz;var oz=function(){function _(){this.type=n.Syntax.Super}return _}();e.Super=oz;var iz=function(){function _(O,P){this.type=n.Syntax.SwitchCase,this.test=O,this.consequent=P}return _}();e.SwitchCase=iz;var sz=function(){function _(O,P){this.type=n.Syntax.SwitchStatement,this.discriminant=O,this.cases=P}return _}();e.SwitchStatement=sz;var az=function(){function _(O,P){this.type=n.Syntax.TaggedTemplateExpression,this.tag=O,this.quasi=P}return _}();e.TaggedTemplateExpression=az;var cz=function(){function _(O,P){this.type=n.Syntax.TemplateElement,this.value=O,this.tail=P}return _}();e.TemplateElement=cz;var uz=function(){function _(O,P){this.type=n.Syntax.TemplateLiteral,this.quasis=O,this.expressions=P}return _}();e.TemplateLiteral=uz;var lz=function(){function _(){this.type=n.Syntax.ThisExpression}return _}();e.ThisExpression=lz;var pz=function(){function _(O){this.type=n.Syntax.ThrowStatement,this.argument=O}return _}();e.ThrowStatement=pz;var fz=function(){function _(O,P,pe){this.type=n.Syntax.TryStatement,this.block=O,this.handler=P,this.finalizer=pe}return _}();e.TryStatement=fz;var hz=function(){function _(O,P){this.type=n.Syntax.UnaryExpression,this.operator=O,this.argument=P,this.prefix=!0}return _}();e.UnaryExpression=hz;var mz=function(){function _(O,P,pe){this.type=n.Syntax.UpdateExpression,this.operator=O,this.argument=P,this.prefix=pe}return _}();e.UpdateExpression=mz;var dz=function(){function _(O,P){this.type=n.Syntax.VariableDeclaration,this.declarations=O,this.kind=P}return _}();e.VariableDeclaration=dz;var xz=function(){function _(O,P){this.type=n.Syntax.VariableDeclarator,this.id=O,this.init=P}return _}();e.VariableDeclarator=xz;var gz=function(){function _(O,P){this.type=n.Syntax.WhileStatement,this.test=O,this.body=P}return _}();e.WhileStatement=gz;var Ez=function(){function _(O,P){this.type=n.Syntax.WithStatement,this.object=O,this.body=P}return _}();e.WithStatement=Ez;var yz=function(){function _(O,P){this.type=n.Syntax.YieldExpression,this.argument=O,this.delegate=P}return _}();e.YieldExpression=yz},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(9),o=r(10),i=r(11),s=r(7),a=r(12),u=r(2),f=r(13),p="ArrowParameterPlaceHolder",x=function(){function m(c,l,h){l===void 0&&(l={}),this.config={range:typeof l.range=="boolean"&&l.range,loc:typeof l.loc=="boolean"&&l.loc,source:null,tokens:typeof l.tokens=="boolean"&&l.tokens,comment:typeof l.comment=="boolean"&&l.comment,tolerant:typeof l.tolerant=="boolean"&&l.tolerant},this.config.loc&&l.source&&l.source!==null&&(this.config.source=String(l.source)),this.delegate=h,this.errorHandler=new o.ErrorHandler,this.errorHandler.tolerant=this.config.tolerant,this.scanner=new a.Scanner(c,this.errorHandler),this.scanner.trackComment=this.config.comment,this.operatorPrecedence={")":0,";":0,",":0,"=":0,"]":0,"||":1,"&&":2,"|":3,"^":4,"&":5,"==":6,"!=":6,"===":6,"!==":6,"<":7,">":7,"<=":7,">=":7,"<<":8,">>":8,">>>":8,"+":9,"-":9,"*":11,"/":11,"%":11},this.lookahead={type:2,value:"",lineNumber:this.scanner.lineNumber,lineStart:0,start:0,end:0},this.hasLineTerminator=!1,this.context={isModule:!1,await:!1,allowIn:!0,allowStrictDirective:!0,allowYield:!0,firstCoverInitializedNameError:null,isAssignmentTarget:!1,isBindingElement:!1,inFunctionBody:!1,inIteration:!1,inSwitch:!1,labelSet:{},strict:!1},this.tokens=[],this.startMarker={index:0,line:this.scanner.lineNumber,column:0},this.lastMarker={index:0,line:this.scanner.lineNumber,column:0},this.nextToken(),this.lastMarker={index:this.scanner.index,line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}return m.prototype.throwError=function(c){for(var l=[],h=1;h<arguments.length;h++)l[h-1]=arguments[h];var g=Array.prototype.slice.call(arguments,1),y=c.replace(/%(\d)/g,function(M,z){return n.assert(z<g.length,"Message reference must be in range"),g[z]}),S=this.lastMarker.index,F=this.lastMarker.line,w=this.lastMarker.column+1;throw this.errorHandler.createError(S,F,w,y)},m.prototype.tolerateError=function(c){for(var l=[],h=1;h<arguments.length;h++)l[h-1]=arguments[h];var g=Array.prototype.slice.call(arguments,1),y=c.replace(/%(\d)/g,function(M,z){return n.assert(z<g.length,"Message reference must be in range"),g[z]}),S=this.lastMarker.index,F=this.scanner.lineNumber,w=this.lastMarker.column+1;this.errorHandler.tolerateError(S,F,w,y)},m.prototype.unexpectedTokenError=function(c,l){var h=l||i.Messages.UnexpectedToken,g;if(c?(l||(h=c.type===2?i.Messages.UnexpectedEOS:c.type===3?i.Messages.UnexpectedIdentifier:c.type===6?i.Messages.UnexpectedNumber:c.type===8?i.Messages.UnexpectedString:c.type===10?i.Messages.UnexpectedTemplate:i.Messages.UnexpectedToken,c.type===4&&(this.scanner.isFutureReservedWord(c.value)?h=i.Messages.UnexpectedReserved:this.context.strict&&this.scanner.isStrictModeReservedWord(c.value)&&(h=i.Messages.StrictReservedWord))),g=c.value):g="ILLEGAL",h=h.replace("%0",g),c&&typeof c.lineNumber=="number"){var y=c.start,S=c.lineNumber,F=this.lastMarker.index-this.lastMarker.column,w=c.start-F+1;return this.errorHandler.createError(y,S,w,h)}else{var y=this.lastMarker.index,S=this.lastMarker.line,w=this.lastMarker.column+1;return this.errorHandler.createError(y,S,w,h)}},m.prototype.throwUnexpectedToken=function(c,l){throw this.unexpectedTokenError(c,l)},m.prototype.tolerateUnexpectedToken=function(c,l){this.errorHandler.tolerate(this.unexpectedTokenError(c,l))},m.prototype.collectComments=function(){if(!this.config.comment)this.scanner.scanComments();else{var c=this.scanner.scanComments();if(c.length>0&&this.delegate)for(var l=0;l<c.length;++l){var h=c[l],g=void 0;g={type:h.multiLine?"BlockComment":"LineComment",value:this.scanner.source.slice(h.slice[0],h.slice[1])},this.config.range&&(g.range=h.range),this.config.loc&&(g.loc=h.loc);var y={start:{line:h.loc.start.line,column:h.loc.start.column,offset:h.range[0]},end:{line:h.loc.end.line,column:h.loc.end.column,offset:h.range[1]}};this.delegate(g,y)}}},m.prototype.getTokenRaw=function(c){return this.scanner.source.slice(c.start,c.end)},m.prototype.convertToken=function(c){var l={type:f.TokenName[c.type],value:this.getTokenRaw(c)};if(this.config.range&&(l.range=[c.start,c.end]),this.config.loc&&(l.loc={start:{line:this.startMarker.line,column:this.startMarker.column},end:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart}}),c.type===9){var h=c.pattern,g=c.flags;l.regex={pattern:h,flags:g}}return l},m.prototype.nextToken=function(){var c=this.lookahead;this.lastMarker.index=this.scanner.index,this.lastMarker.line=this.scanner.lineNumber,this.lastMarker.column=this.scanner.index-this.scanner.lineStart,this.collectComments(),this.scanner.index!==this.startMarker.index&&(this.startMarker.index=this.scanner.index,this.startMarker.line=this.scanner.lineNumber,this.startMarker.column=this.scanner.index-this.scanner.lineStart);var l=this.scanner.lex();return this.hasLineTerminator=c.lineNumber!==l.lineNumber,l&&this.context.strict&&l.type===3&&this.scanner.isStrictModeReservedWord(l.value)&&(l.type=4),this.lookahead=l,this.config.tokens&&l.type!==2&&this.tokens.push(this.convertToken(l)),c},m.prototype.nextRegexToken=function(){this.collectComments();var c=this.scanner.scanRegExp();return this.config.tokens&&(this.tokens.pop(),this.tokens.push(this.convertToken(c))),this.lookahead=c,this.nextToken(),c},m.prototype.createNode=function(){return{index:this.startMarker.index,line:this.startMarker.line,column:this.startMarker.column}},m.prototype.startNode=function(c,l){l===void 0&&(l=0);var h=c.start-c.lineStart,g=c.lineNumber;return h<0&&(h+=l,g--),{index:c.start,line:g,column:h}},m.prototype.finalize=function(c,l){if(this.config.range&&(l.range=[c.index,this.lastMarker.index]),this.config.loc&&(l.loc={start:{line:c.line,column:c.column},end:{line:this.lastMarker.line,column:this.lastMarker.column}},this.config.source&&(l.loc.source=this.config.source)),this.delegate){var h={start:{line:c.line,column:c.column,offset:c.index},end:{line:this.lastMarker.line,column:this.lastMarker.column,offset:this.lastMarker.index}};this.delegate(l,h)}return l},m.prototype.expect=function(c){var l=this.nextToken();(l.type!==7||l.value!==c)&&this.throwUnexpectedToken(l)},m.prototype.expectCommaSeparator=function(){if(this.config.tolerant){var c=this.lookahead;c.type===7&&c.value===","?this.nextToken():c.type===7&&c.value===";"?(this.nextToken(),this.tolerateUnexpectedToken(c)):this.tolerateUnexpectedToken(c,i.Messages.UnexpectedToken)}else this.expect(",")},m.prototype.expectKeyword=function(c){var l=this.nextToken();(l.type!==4||l.value!==c)&&this.throwUnexpectedToken(l)},m.prototype.match=function(c){return this.lookahead.type===7&&this.lookahead.value===c},m.prototype.matchKeyword=function(c){return this.lookahead.type===4&&this.lookahead.value===c},m.prototype.matchContextualKeyword=function(c){return this.lookahead.type===3&&this.lookahead.value===c},m.prototype.matchAssign=function(){if(this.lookahead.type!==7)return!1;var c=this.lookahead.value;return c==="="||c==="*="||c==="**="||c==="/="||c==="%="||c==="+="||c==="-="||c==="<<="||c===">>="||c===">>>="||c==="&="||c==="^="||c==="|="},m.prototype.isolateCoverGrammar=function(c){var l=this.context.isBindingElement,h=this.context.isAssignmentTarget,g=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var y=c.call(this);return this.context.firstCoverInitializedNameError!==null&&this.throwUnexpectedToken(this.context.firstCoverInitializedNameError),this.context.isBindingElement=l,this.context.isAssignmentTarget=h,this.context.firstCoverInitializedNameError=g,y},m.prototype.inheritCoverGrammar=function(c){var l=this.context.isBindingElement,h=this.context.isAssignmentTarget,g=this.context.firstCoverInitializedNameError;this.context.isBindingElement=!0,this.context.isAssignmentTarget=!0,this.context.firstCoverInitializedNameError=null;var y=c.call(this);return this.context.isBindingElement=this.context.isBindingElement&&l,this.context.isAssignmentTarget=this.context.isAssignmentTarget&&h,this.context.firstCoverInitializedNameError=g||this.context.firstCoverInitializedNameError,y},m.prototype.consumeSemicolon=function(){this.match(";")?this.nextToken():this.hasLineTerminator||(this.lookahead.type!==2&&!this.match("}")&&this.throwUnexpectedToken(this.lookahead),this.lastMarker.index=this.startMarker.index,this.lastMarker.line=this.startMarker.line,this.lastMarker.column=this.startMarker.column)},m.prototype.parsePrimaryExpression=function(){var c=this.createNode(),l,h,g;switch(this.lookahead.type){case 3:(this.context.isModule||this.context.await)&&this.lookahead.value==="await"&&this.tolerateUnexpectedToken(this.lookahead),l=this.matchAsyncFunction()?this.parseFunctionExpression():this.finalize(c,new s.Identifier(this.nextToken().value));break;case 6:case 8:this.context.strict&&this.lookahead.octal&&this.tolerateUnexpectedToken(this.lookahead,i.Messages.StrictOctalLiteral),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,h=this.nextToken(),g=this.getTokenRaw(h),l=this.finalize(c,new s.Literal(h.value,g));break;case 1:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,h=this.nextToken(),g=this.getTokenRaw(h),l=this.finalize(c,new s.Literal(h.value==="true",g));break;case 5:this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,h=this.nextToken(),g=this.getTokenRaw(h),l=this.finalize(c,new s.Literal(null,g));break;case 10:l=this.parseTemplateLiteral();break;case 7:switch(this.lookahead.value){case"(":this.context.isBindingElement=!1,l=this.inheritCoverGrammar(this.parseGroupExpression);break;case"[":l=this.inheritCoverGrammar(this.parseArrayInitializer);break;case"{":l=this.inheritCoverGrammar(this.parseObjectInitializer);break;case"/":case"/=":this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.scanner.index=this.startMarker.index,h=this.nextRegexToken(),g=this.getTokenRaw(h),l=this.finalize(c,new s.RegexLiteral(h.regex,g,h.pattern,h.flags));break;default:l=this.throwUnexpectedToken(this.nextToken())}break;case 4:!this.context.strict&&this.context.allowYield&&this.matchKeyword("yield")?l=this.parseIdentifierName():!this.context.strict&&this.matchKeyword("let")?l=this.finalize(c,new s.Identifier(this.nextToken().value)):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.matchKeyword("function")?l=this.parseFunctionExpression():this.matchKeyword("this")?(this.nextToken(),l=this.finalize(c,new s.ThisExpression)):this.matchKeyword("class")?l=this.parseClassExpression():l=this.throwUnexpectedToken(this.nextToken()));break;default:l=this.throwUnexpectedToken(this.nextToken())}return l},m.prototype.parseSpreadElement=function(){var c=this.createNode();this.expect("...");var l=this.inheritCoverGrammar(this.parseAssignmentExpression);return this.finalize(c,new s.SpreadElement(l))},m.prototype.parseArrayInitializer=function(){var c=this.createNode(),l=[];for(this.expect("[");!this.match("]");)if(this.match(","))this.nextToken(),l.push(null);else if(this.match("...")){var h=this.parseSpreadElement();this.match("]")||(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1,this.expect(",")),l.push(h)}else l.push(this.inheritCoverGrammar(this.parseAssignmentExpression)),this.match("]")||this.expect(",");return this.expect("]"),this.finalize(c,new s.ArrayExpression(l))},m.prototype.parsePropertyMethod=function(c){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var l=this.context.strict,h=this.context.allowStrictDirective;this.context.allowStrictDirective=c.simple;var g=this.isolateCoverGrammar(this.parseFunctionSourceElements);return this.context.strict&&c.firstRestricted&&this.tolerateUnexpectedToken(c.firstRestricted,c.message),this.context.strict&&c.stricted&&this.tolerateUnexpectedToken(c.stricted,c.message),this.context.strict=l,this.context.allowStrictDirective=h,g},m.prototype.parsePropertyMethodFunction=function(){var c=!1,l=this.createNode(),h=this.context.allowYield;this.context.allowYield=!0;var g=this.parseFormalParameters(),y=this.parsePropertyMethod(g);return this.context.allowYield=h,this.finalize(l,new s.FunctionExpression(null,g.params,y,c))},m.prototype.parsePropertyMethodAsyncFunction=function(){var c=this.createNode(),l=this.context.allowYield,h=this.context.await;this.context.allowYield=!1,this.context.await=!0;var g=this.parseFormalParameters(),y=this.parsePropertyMethod(g);return this.context.allowYield=l,this.context.await=h,this.finalize(c,new s.AsyncFunctionExpression(null,g.params,y))},m.prototype.parseObjectPropertyKey=function(){var c=this.createNode(),l=this.nextToken(),h;switch(l.type){case 8:case 6:this.context.strict&&l.octal&&this.tolerateUnexpectedToken(l,i.Messages.StrictOctalLiteral);var g=this.getTokenRaw(l);h=this.finalize(c,new s.Literal(l.value,g));break;case 3:case 1:case 5:case 4:h=this.finalize(c,new s.Identifier(l.value));break;case 7:l.value==="["?(h=this.isolateCoverGrammar(this.parseAssignmentExpression),this.expect("]")):h=this.throwUnexpectedToken(l);break;default:h=this.throwUnexpectedToken(l)}return h},m.prototype.isPropertyKey=function(c,l){return c.type===u.Syntax.Identifier&&c.name===l||c.type===u.Syntax.Literal&&c.value===l},m.prototype.parseObjectProperty=function(c){var l=this.createNode(),h=this.lookahead,g,y=null,S=null,F=!1,w=!1,M=!1,z=!1;if(h.type===3){var Z=h.value;this.nextToken(),F=this.match("["),z=!this.hasLineTerminator&&Z==="async"&&!this.match(":")&&!this.match("(")&&!this.match("*")&&!this.match(","),y=z?this.parseObjectPropertyKey():this.finalize(l,new s.Identifier(Z))}else this.match("*")?this.nextToken():(F=this.match("["),y=this.parseObjectPropertyKey());var te=this.qualifiedPropertyName(this.lookahead);if(h.type===3&&!z&&h.value==="get"&&te)g="get",F=this.match("["),y=this.parseObjectPropertyKey(),this.context.allowYield=!1,S=this.parseGetterMethod();else if(h.type===3&&!z&&h.value==="set"&&te)g="set",F=this.match("["),y=this.parseObjectPropertyKey(),S=this.parseSetterMethod();else if(h.type===7&&h.value==="*"&&te)g="init",F=this.match("["),y=this.parseObjectPropertyKey(),S=this.parseGeneratorMethod(),w=!0;else if(y||this.throwUnexpectedToken(this.lookahead),g="init",this.match(":")&&!z)!F&&this.isPropertyKey(y,"__proto__")&&(c.value&&this.tolerateError(i.Messages.DuplicateProtoProperty),c.value=!0),this.nextToken(),S=this.inheritCoverGrammar(this.parseAssignmentExpression);else if(this.match("("))S=z?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),w=!0;else if(h.type===3){var Z=this.finalize(l,new s.Identifier(h.value));if(this.match("=")){this.context.firstCoverInitializedNameError=this.lookahead,this.nextToken(),M=!0;var fe=this.isolateCoverGrammar(this.parseAssignmentExpression);S=this.finalize(l,new s.AssignmentPattern(Z,fe))}else M=!0,S=Z}else this.throwUnexpectedToken(this.nextToken());return this.finalize(l,new s.Property(g,y,F,S,w,M))},m.prototype.parseObjectInitializer=function(){var c=this.createNode();this.expect("{");for(var l=[],h={value:!1};!this.match("}");)l.push(this.parseObjectProperty(h)),this.match("}")||this.expectCommaSeparator();return this.expect("}"),this.finalize(c,new s.ObjectExpression(l))},m.prototype.parseTemplateHead=function(){n.assert(this.lookahead.head,"Template literal must start with a template head");var c=this.createNode(),l=this.nextToken(),h=l.value,g=l.cooked;return this.finalize(c,new s.TemplateElement({raw:h,cooked:g},l.tail))},m.prototype.parseTemplateElement=function(){this.lookahead.type!==10&&this.throwUnexpectedToken();var c=this.createNode(),l=this.nextToken(),h=l.value,g=l.cooked;return this.finalize(c,new s.TemplateElement({raw:h,cooked:g},l.tail))},m.prototype.parseTemplateLiteral=function(){var c=this.createNode(),l=[],h=[],g=this.parseTemplateHead();for(h.push(g);!g.tail;)l.push(this.parseExpression()),g=this.parseTemplateElement(),h.push(g);return this.finalize(c,new s.TemplateLiteral(h,l))},m.prototype.reinterpretExpressionAsPattern=function(c){switch(c.type){case u.Syntax.Identifier:case u.Syntax.MemberExpression:case u.Syntax.RestElement:case u.Syntax.AssignmentPattern:break;case u.Syntax.SpreadElement:c.type=u.Syntax.RestElement,this.reinterpretExpressionAsPattern(c.argument);break;case u.Syntax.ArrayExpression:c.type=u.Syntax.ArrayPattern;for(var l=0;l<c.elements.length;l++)c.elements[l]!==null&&this.reinterpretExpressionAsPattern(c.elements[l]);break;case u.Syntax.ObjectExpression:c.type=u.Syntax.ObjectPattern;for(var l=0;l<c.properties.length;l++)this.reinterpretExpressionAsPattern(c.properties[l].value);break;case u.Syntax.AssignmentExpression:c.type=u.Syntax.AssignmentPattern,delete c.operator,this.reinterpretExpressionAsPattern(c.left);break;default:break}},m.prototype.parseGroupExpression=function(){var c;if(this.expect("("),this.match(")"))this.nextToken(),this.match("=>")||this.expect("=>"),c={type:p,params:[],async:!1};else{var l=this.lookahead,h=[];if(this.match("..."))c=this.parseRestElement(h),this.expect(")"),this.match("=>")||this.expect("=>"),c={type:p,params:[c],async:!1};else{var g=!1;if(this.context.isBindingElement=!0,c=this.inheritCoverGrammar(this.parseAssignmentExpression),this.match(",")){var y=[];for(this.context.isAssignmentTarget=!1,y.push(c);this.lookahead.type!==2&&this.match(",");){if(this.nextToken(),this.match(")")){this.nextToken();for(var S=0;S<y.length;S++)this.reinterpretExpressionAsPattern(y[S]);g=!0,c={type:p,params:y,async:!1}}else if(this.match("...")){this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),y.push(this.parseRestElement(h)),this.expect(")"),this.match("=>")||this.expect("=>"),this.context.isBindingElement=!1;for(var S=0;S<y.length;S++)this.reinterpretExpressionAsPattern(y[S]);g=!0,c={type:p,params:y,async:!1}}else y.push(this.inheritCoverGrammar(this.parseAssignmentExpression));if(g)break}g||(c=this.finalize(this.startNode(l),new s.SequenceExpression(y)))}if(!g){if(this.expect(")"),this.match("=>")&&(c.type===u.Syntax.Identifier&&c.name==="yield"&&(g=!0,c={type:p,params:[c],async:!1}),!g)){if(this.context.isBindingElement||this.throwUnexpectedToken(this.lookahead),c.type===u.Syntax.SequenceExpression)for(var S=0;S<c.expressions.length;S++)this.reinterpretExpressionAsPattern(c.expressions[S]);else this.reinterpretExpressionAsPattern(c);var F=c.type===u.Syntax.SequenceExpression?c.expressions:[c];c={type:p,params:F,async:!1}}this.context.isBindingElement=!1}}}return c},m.prototype.parseArguments=function(){this.expect("(");var c=[];if(!this.match(")"))for(;;){var l=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAssignmentExpression);if(c.push(l),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),c},m.prototype.isIdentifierName=function(c){return c.type===3||c.type===4||c.type===1||c.type===5},m.prototype.parseIdentifierName=function(){var c=this.createNode(),l=this.nextToken();return this.isIdentifierName(l)||this.throwUnexpectedToken(l),this.finalize(c,new s.Identifier(l.value))},m.prototype.parseNewExpression=function(){var c=this.createNode(),l=this.parseIdentifierName();n.assert(l.name==="new","New expression must start with `new`");var h;if(this.match("."))if(this.nextToken(),this.lookahead.type===3&&this.context.inFunctionBody&&this.lookahead.value==="target"){var g=this.parseIdentifierName();h=new s.MetaProperty(l,g)}else this.throwUnexpectedToken(this.lookahead);else{var y=this.isolateCoverGrammar(this.parseLeftHandSideExpression),S=this.match("(")?this.parseArguments():[];h=new s.NewExpression(y,S),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return this.finalize(c,h)},m.prototype.parseAsyncArgument=function(){var c=this.parseAssignmentExpression();return this.context.firstCoverInitializedNameError=null,c},m.prototype.parseAsyncArguments=function(){this.expect("(");var c=[];if(!this.match(")"))for(;;){var l=this.match("...")?this.parseSpreadElement():this.isolateCoverGrammar(this.parseAsyncArgument);if(c.push(l),this.match(")")||(this.expectCommaSeparator(),this.match(")")))break}return this.expect(")"),c},m.prototype.parseLeftHandSideExpressionAllowCall=function(){var c=this.lookahead,l=this.matchContextualKeyword("async"),h=this.context.allowIn;this.context.allowIn=!0;var g;for(this.matchKeyword("super")&&this.context.inFunctionBody?(g=this.createNode(),this.nextToken(),g=this.finalize(g,new s.Super),!this.match("(")&&!this.match(".")&&!this.match("[")&&this.throwUnexpectedToken(this.lookahead)):g=this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var y=this.parseIdentifierName();g=this.finalize(this.startNode(c),new s.StaticMemberExpression(g,y))}else if(this.match("(")){var S=l&&c.lineNumber===this.lookahead.lineNumber;this.context.isBindingElement=!1,this.context.isAssignmentTarget=!1;var F=S?this.parseAsyncArguments():this.parseArguments();if(g=this.finalize(this.startNode(c),new s.CallExpression(g,F)),S&&this.match("=>")){for(var w=0;w<F.length;++w)this.reinterpretExpressionAsPattern(F[w]);g={type:p,params:F,async:!0}}}else if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var y=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),g=this.finalize(this.startNode(c),new s.ComputedMemberExpression(g,y))}else if(this.lookahead.type===10&&this.lookahead.head){var M=this.parseTemplateLiteral();g=this.finalize(this.startNode(c),new s.TaggedTemplateExpression(g,M))}else break;return this.context.allowIn=h,g},m.prototype.parseSuper=function(){var c=this.createNode();return this.expectKeyword("super"),!this.match("[")&&!this.match(".")&&this.throwUnexpectedToken(this.lookahead),this.finalize(c,new s.Super)},m.prototype.parseLeftHandSideExpression=function(){n.assert(this.context.allowIn,"callee of new expression always allow in keyword.");for(var c=this.startNode(this.lookahead),l=this.matchKeyword("super")&&this.context.inFunctionBody?this.parseSuper():this.inheritCoverGrammar(this.matchKeyword("new")?this.parseNewExpression:this.parsePrimaryExpression);;)if(this.match("[")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect("[");var h=this.isolateCoverGrammar(this.parseExpression);this.expect("]"),l=this.finalize(c,new s.ComputedMemberExpression(l,h))}else if(this.match(".")){this.context.isBindingElement=!1,this.context.isAssignmentTarget=!0,this.expect(".");var h=this.parseIdentifierName();l=this.finalize(c,new s.StaticMemberExpression(l,h))}else if(this.lookahead.type===10&&this.lookahead.head){var g=this.parseTemplateLiteral();l=this.finalize(c,new s.TaggedTemplateExpression(l,g))}else break;return l},m.prototype.parseUpdateExpression=function(){var c,l=this.lookahead;if(this.match("++")||this.match("--")){var h=this.startNode(l),g=this.nextToken();c=this.inheritCoverGrammar(this.parseUnaryExpression),this.context.strict&&c.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(c.name)&&this.tolerateError(i.Messages.StrictLHSPrefix),this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment);var y=!0;c=this.finalize(h,new s.UpdateExpression(g.value,c,y)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else if(c=this.inheritCoverGrammar(this.parseLeftHandSideExpressionAllowCall),!this.hasLineTerminator&&this.lookahead.type===7&&(this.match("++")||this.match("--"))){this.context.strict&&c.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(c.name)&&this.tolerateError(i.Messages.StrictLHSPostfix),this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var S=this.nextToken().value,y=!1;c=this.finalize(this.startNode(l),new s.UpdateExpression(S,c,y))}return c},m.prototype.parseAwaitExpression=function(){var c=this.createNode();this.nextToken();var l=this.parseUnaryExpression();return this.finalize(c,new s.AwaitExpression(l))},m.prototype.parseUnaryExpression=function(){var c;if(this.match("+")||this.match("-")||this.match("~")||this.match("!")||this.matchKeyword("delete")||this.matchKeyword("void")||this.matchKeyword("typeof")){var l=this.startNode(this.lookahead),h=this.nextToken();c=this.inheritCoverGrammar(this.parseUnaryExpression),c=this.finalize(l,new s.UnaryExpression(h.value,c)),this.context.strict&&c.operator==="delete"&&c.argument.type===u.Syntax.Identifier&&this.tolerateError(i.Messages.StrictDelete),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}else this.context.await&&this.matchContextualKeyword("await")?c=this.parseAwaitExpression():c=this.parseUpdateExpression();return c},m.prototype.parseExponentiationExpression=function(){var c=this.lookahead,l=this.inheritCoverGrammar(this.parseUnaryExpression);if(l.type!==u.Syntax.UnaryExpression&&this.match("**")){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var h=l,g=this.isolateCoverGrammar(this.parseExponentiationExpression);l=this.finalize(this.startNode(c),new s.BinaryExpression("**",h,g))}return l},m.prototype.binaryPrecedence=function(c){var l=c.value,h;return c.type===7?h=this.operatorPrecedence[l]||0:c.type===4?h=l==="instanceof"||this.context.allowIn&&l==="in"?7:0:h=0,h},m.prototype.parseBinaryExpression=function(){var c=this.lookahead,l=this.inheritCoverGrammar(this.parseExponentiationExpression),h=this.lookahead,g=this.binaryPrecedence(h);if(g>0){this.nextToken(),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;for(var y=[c,this.lookahead],S=l,F=this.isolateCoverGrammar(this.parseExponentiationExpression),w=[S,h.value,F],M=[g];g=this.binaryPrecedence(this.lookahead),!(g<=0);){for(;w.length>2&&g<=M[M.length-1];){F=w.pop();var z=w.pop();M.pop(),S=w.pop(),y.pop();var Z=this.startNode(y[y.length-1]);w.push(this.finalize(Z,new s.BinaryExpression(z,S,F)))}w.push(this.nextToken().value),M.push(g),y.push(this.lookahead),w.push(this.isolateCoverGrammar(this.parseExponentiationExpression))}var te=w.length-1;l=w[te];for(var fe=y.pop();te>1;){var Fe=y.pop(),De=fe&&fe.lineStart,Z=this.startNode(Fe,De),z=w[te-1];l=this.finalize(Z,new s.BinaryExpression(z,w[te-2],l)),te-=2,fe=Fe}}return l},m.prototype.parseConditionalExpression=function(){var c=this.lookahead,l=this.inheritCoverGrammar(this.parseBinaryExpression);if(this.match("?")){this.nextToken();var h=this.context.allowIn;this.context.allowIn=!0;var g=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowIn=h,this.expect(":");var y=this.isolateCoverGrammar(this.parseAssignmentExpression);l=this.finalize(this.startNode(c),new s.ConditionalExpression(l,g,y)),this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1}return l},m.prototype.checkPatternParam=function(c,l){switch(l.type){case u.Syntax.Identifier:this.validateParam(c,l,l.name);break;case u.Syntax.RestElement:this.checkPatternParam(c,l.argument);break;case u.Syntax.AssignmentPattern:this.checkPatternParam(c,l.left);break;case u.Syntax.ArrayPattern:for(var h=0;h<l.elements.length;h++)l.elements[h]!==null&&this.checkPatternParam(c,l.elements[h]);break;case u.Syntax.ObjectPattern:for(var h=0;h<l.properties.length;h++)this.checkPatternParam(c,l.properties[h].value);break;default:break}c.simple=c.simple&&l instanceof s.Identifier},m.prototype.reinterpretAsCoverFormalsList=function(c){var l=[c],h,g=!1;switch(c.type){case u.Syntax.Identifier:break;case p:l=c.params,g=c.async;break;default:return null}h={simple:!0,paramSet:{}};for(var y=0;y<l.length;++y){var S=l[y];S.type===u.Syntax.AssignmentPattern?S.right.type===u.Syntax.YieldExpression&&(S.right.argument&&this.throwUnexpectedToken(this.lookahead),S.right.type=u.Syntax.Identifier,S.right.name="yield",delete S.right.argument,delete S.right.delegate):g&&S.type===u.Syntax.Identifier&&S.name==="await"&&this.throwUnexpectedToken(this.lookahead),this.checkPatternParam(h,S),l[y]=S}if(this.context.strict||!this.context.allowYield)for(var y=0;y<l.length;++y){var S=l[y];S.type===u.Syntax.YieldExpression&&this.throwUnexpectedToken(this.lookahead)}if(h.message===i.Messages.StrictParamDupe){var F=this.context.strict?h.stricted:h.firstRestricted;this.throwUnexpectedToken(F,h.message)}return{simple:h.simple,params:l,stricted:h.stricted,firstRestricted:h.firstRestricted,message:h.message}},m.prototype.parseAssignmentExpression=function(){var c;if(!this.context.allowYield&&this.matchKeyword("yield"))c=this.parseYieldExpression();else{var l=this.lookahead,h=l;if(c=this.parseConditionalExpression(),h.type===3&&h.lineNumber===this.lookahead.lineNumber&&h.value==="async"&&(this.lookahead.type===3||this.matchKeyword("yield"))){var g=this.parsePrimaryExpression();this.reinterpretExpressionAsPattern(g),c={type:p,params:[g],async:!0}}if(c.type===p||this.match("=>")){this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1;var y=c.async,S=this.reinterpretAsCoverFormalsList(c);if(S){this.hasLineTerminator&&this.tolerateUnexpectedToken(this.lookahead),this.context.firstCoverInitializedNameError=null;var F=this.context.strict,w=this.context.allowStrictDirective;this.context.allowStrictDirective=S.simple;var M=this.context.allowYield,z=this.context.await;this.context.allowYield=!0,this.context.await=y;var Z=this.startNode(l);this.expect("=>");var te=void 0;if(this.match("{")){var fe=this.context.allowIn;this.context.allowIn=!0,te=this.parseFunctionSourceElements(),this.context.allowIn=fe}else te=this.isolateCoverGrammar(this.parseAssignmentExpression);var Fe=te.type!==u.Syntax.BlockStatement;this.context.strict&&S.firstRestricted&&this.throwUnexpectedToken(S.firstRestricted,S.message),this.context.strict&&S.stricted&&this.tolerateUnexpectedToken(S.stricted,S.message),c=y?this.finalize(Z,new s.AsyncArrowFunctionExpression(S.params,te,Fe)):this.finalize(Z,new s.ArrowFunctionExpression(S.params,te,Fe)),this.context.strict=F,this.context.allowStrictDirective=w,this.context.allowYield=M,this.context.await=z}}else if(this.matchAssign()){if(this.context.isAssignmentTarget||this.tolerateError(i.Messages.InvalidLHSInAssignment),this.context.strict&&c.type===u.Syntax.Identifier){var De=c;this.scanner.isRestrictedWord(De.name)&&this.tolerateUnexpectedToken(h,i.Messages.StrictLHSAssignment),this.scanner.isStrictModeReservedWord(De.name)&&this.tolerateUnexpectedToken(h,i.Messages.StrictReservedWord)}this.match("=")?this.reinterpretExpressionAsPattern(c):(this.context.isAssignmentTarget=!1,this.context.isBindingElement=!1),h=this.nextToken();var Bt=h.value,Fi=this.isolateCoverGrammar(this.parseAssignmentExpression);c=this.finalize(this.startNode(l),new s.AssignmentExpression(Bt,c,Fi)),this.context.firstCoverInitializedNameError=null}}return c},m.prototype.parseExpression=function(){var c=this.lookahead,l=this.isolateCoverGrammar(this.parseAssignmentExpression);if(this.match(",")){var h=[];for(h.push(l);this.lookahead.type!==2&&this.match(",");)this.nextToken(),h.push(this.isolateCoverGrammar(this.parseAssignmentExpression));l=this.finalize(this.startNode(c),new s.SequenceExpression(h))}return l},m.prototype.parseStatementListItem=function(){var c;if(this.context.isAssignmentTarget=!0,this.context.isBindingElement=!0,this.lookahead.type===4)switch(this.lookahead.value){case"export":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,i.Messages.IllegalExportDeclaration),c=this.parseExportDeclaration();break;case"import":this.context.isModule||this.tolerateUnexpectedToken(this.lookahead,i.Messages.IllegalImportDeclaration),c=this.parseImportDeclaration();break;case"const":c=this.parseLexicalDeclaration({inFor:!1});break;case"function":c=this.parseFunctionDeclaration();break;case"class":c=this.parseClassDeclaration();break;case"let":c=this.isLexicalDeclaration()?this.parseLexicalDeclaration({inFor:!1}):this.parseStatement();break;default:c=this.parseStatement();break}else c=this.parseStatement();return c},m.prototype.parseBlock=function(){var c=this.createNode();this.expect("{");for(var l=[];!this.match("}");)l.push(this.parseStatementListItem());return this.expect("}"),this.finalize(c,new s.BlockStatement(l))},m.prototype.parseLexicalBinding=function(c,l){var h=this.createNode(),g=[],y=this.parsePattern(g,c);this.context.strict&&y.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(y.name)&&this.tolerateError(i.Messages.StrictVarName);var S=null;return c==="const"?!this.matchKeyword("in")&&!this.matchContextualKeyword("of")&&(this.match("=")?(this.nextToken(),S=this.isolateCoverGrammar(this.parseAssignmentExpression)):this.throwError(i.Messages.DeclarationMissingInitializer,"const")):(!l.inFor&&y.type!==u.Syntax.Identifier||this.match("="))&&(this.expect("="),S=this.isolateCoverGrammar(this.parseAssignmentExpression)),this.finalize(h,new s.VariableDeclarator(y,S))},m.prototype.parseBindingList=function(c,l){for(var h=[this.parseLexicalBinding(c,l)];this.match(",");)this.nextToken(),h.push(this.parseLexicalBinding(c,l));return h},m.prototype.isLexicalDeclaration=function(){var c=this.scanner.saveState();this.scanner.scanComments();var l=this.scanner.lex();return this.scanner.restoreState(c),l.type===3||l.type===7&&l.value==="["||l.type===7&&l.value==="{"||l.type===4&&l.value==="let"||l.type===4&&l.value==="yield"},m.prototype.parseLexicalDeclaration=function(c){var l=this.createNode(),h=this.nextToken().value;n.assert(h==="let"||h==="const","Lexical declaration must be either let or const");var g=this.parseBindingList(h,c);return this.consumeSemicolon(),this.finalize(l,new s.VariableDeclaration(g,h))},m.prototype.parseBindingRestElement=function(c,l){var h=this.createNode();this.expect("...");var g=this.parsePattern(c,l);return this.finalize(h,new s.RestElement(g))},m.prototype.parseArrayPattern=function(c,l){var h=this.createNode();this.expect("[");for(var g=[];!this.match("]");)if(this.match(","))this.nextToken(),g.push(null);else{if(this.match("...")){g.push(this.parseBindingRestElement(c,l));break}else g.push(this.parsePatternWithDefault(c,l));this.match("]")||this.expect(",")}return this.expect("]"),this.finalize(h,new s.ArrayPattern(g))},m.prototype.parsePropertyPattern=function(c,l){var h=this.createNode(),g=!1,y=!1,S=!1,F,w;if(this.lookahead.type===3){var M=this.lookahead;F=this.parseVariableIdentifier();var z=this.finalize(h,new s.Identifier(M.value));if(this.match("=")){c.push(M),y=!0,this.nextToken();var Z=this.parseAssignmentExpression();w=this.finalize(this.startNode(M),new s.AssignmentPattern(z,Z))}else this.match(":")?(this.expect(":"),w=this.parsePatternWithDefault(c,l)):(c.push(M),y=!0,w=z)}else g=this.match("["),F=this.parseObjectPropertyKey(),this.expect(":"),w=this.parsePatternWithDefault(c,l);return this.finalize(h,new s.Property("init",F,g,w,S,y))},m.prototype.parseObjectPattern=function(c,l){var h=this.createNode(),g=[];for(this.expect("{");!this.match("}");)g.push(this.parsePropertyPattern(c,l)),this.match("}")||this.expect(",");return this.expect("}"),this.finalize(h,new s.ObjectPattern(g))},m.prototype.parsePattern=function(c,l){var h;return this.match("[")?h=this.parseArrayPattern(c,l):this.match("{")?h=this.parseObjectPattern(c,l):(this.matchKeyword("let")&&(l==="const"||l==="let")&&this.tolerateUnexpectedToken(this.lookahead,i.Messages.LetInLexicalBinding),c.push(this.lookahead),h=this.parseVariableIdentifier(l)),h},m.prototype.parsePatternWithDefault=function(c,l){var h=this.lookahead,g=this.parsePattern(c,l);if(this.match("=")){this.nextToken();var y=this.context.allowYield;this.context.allowYield=!0;var S=this.isolateCoverGrammar(this.parseAssignmentExpression);this.context.allowYield=y,g=this.finalize(this.startNode(h),new s.AssignmentPattern(g,S))}return g},m.prototype.parseVariableIdentifier=function(c){var l=this.createNode(),h=this.nextToken();return h.type===4&&h.value==="yield"?this.context.strict?this.tolerateUnexpectedToken(h,i.Messages.StrictReservedWord):this.context.allowYield||this.throwUnexpectedToken(h):h.type!==3?this.context.strict&&h.type===4&&this.scanner.isStrictModeReservedWord(h.value)?this.tolerateUnexpectedToken(h,i.Messages.StrictReservedWord):(this.context.strict||h.value!=="let"||c!=="var")&&this.throwUnexpectedToken(h):(this.context.isModule||this.context.await)&&h.type===3&&h.value==="await"&&this.tolerateUnexpectedToken(h),this.finalize(l,new s.Identifier(h.value))},m.prototype.parseVariableDeclaration=function(c){var l=this.createNode(),h=[],g=this.parsePattern(h,"var");this.context.strict&&g.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(g.name)&&this.tolerateError(i.Messages.StrictVarName);var y=null;return this.match("=")?(this.nextToken(),y=this.isolateCoverGrammar(this.parseAssignmentExpression)):g.type!==u.Syntax.Identifier&&!c.inFor&&this.expect("="),this.finalize(l,new s.VariableDeclarator(g,y))},m.prototype.parseVariableDeclarationList=function(c){var l={inFor:c.inFor},h=[];for(h.push(this.parseVariableDeclaration(l));this.match(",");)this.nextToken(),h.push(this.parseVariableDeclaration(l));return h},m.prototype.parseVariableStatement=function(){var c=this.createNode();this.expectKeyword("var");var l=this.parseVariableDeclarationList({inFor:!1});return this.consumeSemicolon(),this.finalize(c,new s.VariableDeclaration(l,"var"))},m.prototype.parseEmptyStatement=function(){var c=this.createNode();return this.expect(";"),this.finalize(c,new s.EmptyStatement)},m.prototype.parseExpressionStatement=function(){var c=this.createNode(),l=this.parseExpression();return this.consumeSemicolon(),this.finalize(c,new s.ExpressionStatement(l))},m.prototype.parseIfClause=function(){return this.context.strict&&this.matchKeyword("function")&&this.tolerateError(i.Messages.StrictFunction),this.parseStatement()},m.prototype.parseIfStatement=function(){var c=this.createNode(),l,h=null;this.expectKeyword("if"),this.expect("(");var g=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),l=this.finalize(this.createNode(),new s.EmptyStatement)):(this.expect(")"),l=this.parseIfClause(),this.matchKeyword("else")&&(this.nextToken(),h=this.parseIfClause())),this.finalize(c,new s.IfStatement(g,l,h))},m.prototype.parseDoWhileStatement=function(){var c=this.createNode();this.expectKeyword("do");var l=this.context.inIteration;this.context.inIteration=!0;var h=this.parseStatement();this.context.inIteration=l,this.expectKeyword("while"),this.expect("(");var g=this.parseExpression();return!this.match(")")&&this.config.tolerant?this.tolerateUnexpectedToken(this.nextToken()):(this.expect(")"),this.match(";")&&this.nextToken()),this.finalize(c,new s.DoWhileStatement(h,g))},m.prototype.parseWhileStatement=function(){var c=this.createNode(),l;this.expectKeyword("while"),this.expect("(");var h=this.parseExpression();if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),l=this.finalize(this.createNode(),new s.EmptyStatement);else{this.expect(")");var g=this.context.inIteration;this.context.inIteration=!0,l=this.parseStatement(),this.context.inIteration=g}return this.finalize(c,new s.WhileStatement(h,l))},m.prototype.parseForStatement=function(){var c=null,l=null,h=null,g=!0,y,S,F=this.createNode();if(this.expectKeyword("for"),this.expect("("),this.match(";"))this.nextToken();else if(this.matchKeyword("var")){c=this.createNode(),this.nextToken();var w=this.context.allowIn;this.context.allowIn=!1;var M=this.parseVariableDeclarationList({inFor:!0});if(this.context.allowIn=w,M.length===1&&this.matchKeyword("in")){var z=M[0];z.init&&(z.id.type===u.Syntax.ArrayPattern||z.id.type===u.Syntax.ObjectPattern||this.context.strict)&&this.tolerateError(i.Messages.ForInOfLoopInitializer,"for-in"),c=this.finalize(c,new s.VariableDeclaration(M,"var")),this.nextToken(),y=c,S=this.parseExpression(),c=null}else M.length===1&&M[0].init===null&&this.matchContextualKeyword("of")?(c=this.finalize(c,new s.VariableDeclaration(M,"var")),this.nextToken(),y=c,S=this.parseAssignmentExpression(),c=null,g=!1):(c=this.finalize(c,new s.VariableDeclaration(M,"var")),this.expect(";"))}else if(this.matchKeyword("const")||this.matchKeyword("let")){c=this.createNode();var Z=this.nextToken().value;if(!this.context.strict&&this.lookahead.value==="in")c=this.finalize(c,new s.Identifier(Z)),this.nextToken(),y=c,S=this.parseExpression(),c=null;else{var w=this.context.allowIn;this.context.allowIn=!1;var M=this.parseBindingList(Z,{inFor:!0});this.context.allowIn=w,M.length===1&&M[0].init===null&&this.matchKeyword("in")?(c=this.finalize(c,new s.VariableDeclaration(M,Z)),this.nextToken(),y=c,S=this.parseExpression(),c=null):M.length===1&&M[0].init===null&&this.matchContextualKeyword("of")?(c=this.finalize(c,new s.VariableDeclaration(M,Z)),this.nextToken(),y=c,S=this.parseAssignmentExpression(),c=null,g=!1):(this.consumeSemicolon(),c=this.finalize(c,new s.VariableDeclaration(M,Z)))}}else{var te=this.lookahead,w=this.context.allowIn;if(this.context.allowIn=!1,c=this.inheritCoverGrammar(this.parseAssignmentExpression),this.context.allowIn=w,this.matchKeyword("in"))(!this.context.isAssignmentTarget||c.type===u.Syntax.AssignmentExpression)&&this.tolerateError(i.Messages.InvalidLHSInForIn),this.nextToken(),this.reinterpretExpressionAsPattern(c),y=c,S=this.parseExpression(),c=null;else if(this.matchContextualKeyword("of"))(!this.context.isAssignmentTarget||c.type===u.Syntax.AssignmentExpression)&&this.tolerateError(i.Messages.InvalidLHSInForLoop),this.nextToken(),this.reinterpretExpressionAsPattern(c),y=c,S=this.parseAssignmentExpression(),c=null,g=!1;else{if(this.match(",")){for(var fe=[c];this.match(",");)this.nextToken(),fe.push(this.isolateCoverGrammar(this.parseAssignmentExpression));c=this.finalize(this.startNode(te),new s.SequenceExpression(fe))}this.expect(";")}}typeof y>"u"&&(this.match(";")||(l=this.parseExpression()),this.expect(";"),this.match(")")||(h=this.parseExpression()));var Fe;if(!this.match(")")&&this.config.tolerant)this.tolerateUnexpectedToken(this.nextToken()),Fe=this.finalize(this.createNode(),new s.EmptyStatement);else{this.expect(")");var De=this.context.inIteration;this.context.inIteration=!0,Fe=this.isolateCoverGrammar(this.parseStatement),this.context.inIteration=De}return typeof y>"u"?this.finalize(F,new s.ForStatement(c,l,h,Fe)):g?this.finalize(F,new s.ForInStatement(y,S,Fe)):this.finalize(F,new s.ForOfStatement(y,S,Fe))},m.prototype.parseContinueStatement=function(){var c=this.createNode();this.expectKeyword("continue");var l=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var h=this.parseVariableIdentifier();l=h;var g="$"+h.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,g)||this.throwError(i.Messages.UnknownLabel,h.name)}return this.consumeSemicolon(),l===null&&!this.context.inIteration&&this.throwError(i.Messages.IllegalContinue),this.finalize(c,new s.ContinueStatement(l))},m.prototype.parseBreakStatement=function(){var c=this.createNode();this.expectKeyword("break");var l=null;if(this.lookahead.type===3&&!this.hasLineTerminator){var h=this.parseVariableIdentifier(),g="$"+h.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,g)||this.throwError(i.Messages.UnknownLabel,h.name),l=h}return this.consumeSemicolon(),l===null&&!this.context.inIteration&&!this.context.inSwitch&&this.throwError(i.Messages.IllegalBreak),this.finalize(c,new s.BreakStatement(l))},m.prototype.parseReturnStatement=function(){this.context.inFunctionBody||this.tolerateError(i.Messages.IllegalReturn);var c=this.createNode();this.expectKeyword("return");var l=!this.match(";")&&!this.match("}")&&!this.hasLineTerminator&&this.lookahead.type!==2||this.lookahead.type===8||this.lookahead.type===10,h=l?this.parseExpression():null;return this.consumeSemicolon(),this.finalize(c,new s.ReturnStatement(h))},m.prototype.parseWithStatement=function(){this.context.strict&&this.tolerateError(i.Messages.StrictModeWith);var c=this.createNode(),l;this.expectKeyword("with"),this.expect("(");var h=this.parseExpression();return!this.match(")")&&this.config.tolerant?(this.tolerateUnexpectedToken(this.nextToken()),l=this.finalize(this.createNode(),new s.EmptyStatement)):(this.expect(")"),l=this.parseStatement()),this.finalize(c,new s.WithStatement(h,l))},m.prototype.parseSwitchCase=function(){var c=this.createNode(),l;this.matchKeyword("default")?(this.nextToken(),l=null):(this.expectKeyword("case"),l=this.parseExpression()),this.expect(":");for(var h=[];!(this.match("}")||this.matchKeyword("default")||this.matchKeyword("case"));)h.push(this.parseStatementListItem());return this.finalize(c,new s.SwitchCase(l,h))},m.prototype.parseSwitchStatement=function(){var c=this.createNode();this.expectKeyword("switch"),this.expect("(");var l=this.parseExpression();this.expect(")");var h=this.context.inSwitch;this.context.inSwitch=!0;var g=[],y=!1;for(this.expect("{");!this.match("}");){var S=this.parseSwitchCase();S.test===null&&(y&&this.throwError(i.Messages.MultipleDefaultsInSwitch),y=!0),g.push(S)}return this.expect("}"),this.context.inSwitch=h,this.finalize(c,new s.SwitchStatement(l,g))},m.prototype.parseLabelledStatement=function(){var c=this.createNode(),l=this.parseExpression(),h;if(l.type===u.Syntax.Identifier&&this.match(":")){this.nextToken();var g=l,y="$"+g.name;Object.prototype.hasOwnProperty.call(this.context.labelSet,y)&&this.throwError(i.Messages.Redeclaration,"Label",g.name),this.context.labelSet[y]=!0;var S=void 0;if(this.matchKeyword("class"))this.tolerateUnexpectedToken(this.lookahead),S=this.parseClassDeclaration();else if(this.matchKeyword("function")){var F=this.lookahead,w=this.parseFunctionDeclaration();this.context.strict?this.tolerateUnexpectedToken(F,i.Messages.StrictFunction):w.generator&&this.tolerateUnexpectedToken(F,i.Messages.GeneratorInLegacyContext),S=w}else S=this.parseStatement();delete this.context.labelSet[y],h=new s.LabeledStatement(g,S)}else this.consumeSemicolon(),h=new s.ExpressionStatement(l);return this.finalize(c,h)},m.prototype.parseThrowStatement=function(){var c=this.createNode();this.expectKeyword("throw"),this.hasLineTerminator&&this.throwError(i.Messages.NewlineAfterThrow);var l=this.parseExpression();return this.consumeSemicolon(),this.finalize(c,new s.ThrowStatement(l))},m.prototype.parseCatchClause=function(){var c=this.createNode();this.expectKeyword("catch"),this.expect("("),this.match(")")&&this.throwUnexpectedToken(this.lookahead);for(var l=[],h=this.parsePattern(l),g={},y=0;y<l.length;y++){var S="$"+l[y].value;Object.prototype.hasOwnProperty.call(g,S)&&this.tolerateError(i.Messages.DuplicateBinding,l[y].value),g[S]=!0}this.context.strict&&h.type===u.Syntax.Identifier&&this.scanner.isRestrictedWord(h.name)&&this.tolerateError(i.Messages.StrictCatchVariable),this.expect(")");var F=this.parseBlock();return this.finalize(c,new s.CatchClause(h,F))},m.prototype.parseFinallyClause=function(){return this.expectKeyword("finally"),this.parseBlock()},m.prototype.parseTryStatement=function(){var c=this.createNode();this.expectKeyword("try");var l=this.parseBlock(),h=this.matchKeyword("catch")?this.parseCatchClause():null,g=this.matchKeyword("finally")?this.parseFinallyClause():null;return!h&&!g&&this.throwError(i.Messages.NoCatchOrFinally),this.finalize(c,new s.TryStatement(l,h,g))},m.prototype.parseDebuggerStatement=function(){var c=this.createNode();return this.expectKeyword("debugger"),this.consumeSemicolon(),this.finalize(c,new s.DebuggerStatement)},m.prototype.parseStatement=function(){var c;switch(this.lookahead.type){case 1:case 5:case 6:case 8:case 10:case 9:c=this.parseExpressionStatement();break;case 7:var l=this.lookahead.value;l==="{"?c=this.parseBlock():l==="("?c=this.parseExpressionStatement():l===";"?c=this.parseEmptyStatement():c=this.parseExpressionStatement();break;case 3:c=this.matchAsyncFunction()?this.parseFunctionDeclaration():this.parseLabelledStatement();break;case 4:switch(this.lookahead.value){case"break":c=this.parseBreakStatement();break;case"continue":c=this.parseContinueStatement();break;case"debugger":c=this.parseDebuggerStatement();break;case"do":c=this.parseDoWhileStatement();break;case"for":c=this.parseForStatement();break;case"function":c=this.parseFunctionDeclaration();break;case"if":c=this.parseIfStatement();break;case"return":c=this.parseReturnStatement();break;case"switch":c=this.parseSwitchStatement();break;case"throw":c=this.parseThrowStatement();break;case"try":c=this.parseTryStatement();break;case"var":c=this.parseVariableStatement();break;case"while":c=this.parseWhileStatement();break;case"with":c=this.parseWithStatement();break;default:c=this.parseExpressionStatement();break}break;default:c=this.throwUnexpectedToken(this.lookahead)}return c},m.prototype.parseFunctionSourceElements=function(){var c=this.createNode();this.expect("{");var l=this.parseDirectivePrologues(),h=this.context.labelSet,g=this.context.inIteration,y=this.context.inSwitch,S=this.context.inFunctionBody;for(this.context.labelSet={},this.context.inIteration=!1,this.context.inSwitch=!1,this.context.inFunctionBody=!0;this.lookahead.type!==2&&!this.match("}");)l.push(this.parseStatementListItem());return this.expect("}"),this.context.labelSet=h,this.context.inIteration=g,this.context.inSwitch=y,this.context.inFunctionBody=S,this.finalize(c,new s.BlockStatement(l))},m.prototype.validateParam=function(c,l,h){var g="$"+h;this.context.strict?(this.scanner.isRestrictedWord(h)&&(c.stricted=l,c.message=i.Messages.StrictParamName),Object.prototype.hasOwnProperty.call(c.paramSet,g)&&(c.stricted=l,c.message=i.Messages.StrictParamDupe)):c.firstRestricted||(this.scanner.isRestrictedWord(h)?(c.firstRestricted=l,c.message=i.Messages.StrictParamName):this.scanner.isStrictModeReservedWord(h)?(c.firstRestricted=l,c.message=i.Messages.StrictReservedWord):Object.prototype.hasOwnProperty.call(c.paramSet,g)&&(c.stricted=l,c.message=i.Messages.StrictParamDupe)),typeof Object.defineProperty=="function"?Object.defineProperty(c.paramSet,g,{value:!0,enumerable:!0,writable:!0,configurable:!0}):c.paramSet[g]=!0},m.prototype.parseRestElement=function(c){var l=this.createNode();this.expect("...");var h=this.parsePattern(c);return this.match("=")&&this.throwError(i.Messages.DefaultRestParameter),this.match(")")||this.throwError(i.Messages.ParameterAfterRestParameter),this.finalize(l,new s.RestElement(h))},m.prototype.parseFormalParameter=function(c){for(var l=[],h=this.match("...")?this.parseRestElement(l):this.parsePatternWithDefault(l),g=0;g<l.length;g++)this.validateParam(c,l[g],l[g].value);c.simple=c.simple&&h instanceof s.Identifier,c.params.push(h)},m.prototype.parseFormalParameters=function(c){var l;if(l={simple:!0,params:[],firstRestricted:c},this.expect("("),!this.match(")"))for(l.paramSet={};this.lookahead.type!==2&&(this.parseFormalParameter(l),!(this.match(")")||(this.expect(","),this.match(")")))););return this.expect(")"),{simple:l.simple,params:l.params,stricted:l.stricted,firstRestricted:l.firstRestricted,message:l.message}},m.prototype.matchAsyncFunction=function(){var c=this.matchContextualKeyword("async");if(c){var l=this.scanner.saveState();this.scanner.scanComments();var h=this.scanner.lex();this.scanner.restoreState(l),c=l.lineNumber===h.lineNumber&&h.type===4&&h.value==="function"}return c},m.prototype.parseFunctionDeclaration=function(c){var l=this.createNode(),h=this.matchContextualKeyword("async");h&&this.nextToken(),this.expectKeyword("function");var g=h?!1:this.match("*");g&&this.nextToken();var y,S=null,F=null;if(!c||!this.match("(")){var w=this.lookahead;S=this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(w.value)&&this.tolerateUnexpectedToken(w,i.Messages.StrictFunctionName):this.scanner.isRestrictedWord(w.value)?(F=w,y=i.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(w.value)&&(F=w,y=i.Messages.StrictReservedWord)}var M=this.context.await,z=this.context.allowYield;this.context.await=h,this.context.allowYield=!g;var Z=this.parseFormalParameters(F),te=Z.params,fe=Z.stricted;F=Z.firstRestricted,Z.message&&(y=Z.message);var Fe=this.context.strict,De=this.context.allowStrictDirective;this.context.allowStrictDirective=Z.simple;var Bt=this.parseFunctionSourceElements();return this.context.strict&&F&&this.throwUnexpectedToken(F,y),this.context.strict&&fe&&this.tolerateUnexpectedToken(fe,y),this.context.strict=Fe,this.context.allowStrictDirective=De,this.context.await=M,this.context.allowYield=z,h?this.finalize(l,new s.AsyncFunctionDeclaration(S,te,Bt)):this.finalize(l,new s.FunctionDeclaration(S,te,Bt,g))},m.prototype.parseFunctionExpression=function(){var c=this.createNode(),l=this.matchContextualKeyword("async");l&&this.nextToken(),this.expectKeyword("function");var h=l?!1:this.match("*");h&&this.nextToken();var g,y=null,S,F=this.context.await,w=this.context.allowYield;if(this.context.await=l,this.context.allowYield=!h,!this.match("(")){var M=this.lookahead;y=!this.context.strict&&!h&&this.matchKeyword("yield")?this.parseIdentifierName():this.parseVariableIdentifier(),this.context.strict?this.scanner.isRestrictedWord(M.value)&&this.tolerateUnexpectedToken(M,i.Messages.StrictFunctionName):this.scanner.isRestrictedWord(M.value)?(S=M,g=i.Messages.StrictFunctionName):this.scanner.isStrictModeReservedWord(M.value)&&(S=M,g=i.Messages.StrictReservedWord)}var z=this.parseFormalParameters(S),Z=z.params,te=z.stricted;S=z.firstRestricted,z.message&&(g=z.message);var fe=this.context.strict,Fe=this.context.allowStrictDirective;this.context.allowStrictDirective=z.simple;var De=this.parseFunctionSourceElements();return this.context.strict&&S&&this.throwUnexpectedToken(S,g),this.context.strict&&te&&this.tolerateUnexpectedToken(te,g),this.context.strict=fe,this.context.allowStrictDirective=Fe,this.context.await=F,this.context.allowYield=w,l?this.finalize(c,new s.AsyncFunctionExpression(y,Z,De)):this.finalize(c,new s.FunctionExpression(y,Z,De,h))},m.prototype.parseDirective=function(){var c=this.lookahead,l=this.createNode(),h=this.parseExpression(),g=h.type===u.Syntax.Literal?this.getTokenRaw(c).slice(1,-1):null;return this.consumeSemicolon(),this.finalize(l,g?new s.Directive(h,g):new s.ExpressionStatement(h))},m.prototype.parseDirectivePrologues=function(){for(var c=null,l=[];;){var h=this.lookahead;if(h.type!==8)break;var g=this.parseDirective();l.push(g);var y=g.directive;if(typeof y!="string")break;y==="use strict"?(this.context.strict=!0,c&&this.tolerateUnexpectedToken(c,i.Messages.StrictOctalLiteral),this.context.allowStrictDirective||this.tolerateUnexpectedToken(h,i.Messages.IllegalLanguageModeDirective)):!c&&h.octal&&(c=h)}return l},m.prototype.qualifiedPropertyName=function(c){switch(c.type){case 3:case 8:case 1:case 5:case 6:case 4:return!0;case 7:return c.value==="[";default:break}return!1},m.prototype.parseGetterMethod=function(){var c=this.createNode(),l=!1,h=this.context.allowYield;this.context.allowYield=!l;var g=this.parseFormalParameters();g.params.length>0&&this.tolerateError(i.Messages.BadGetterArity);var y=this.parsePropertyMethod(g);return this.context.allowYield=h,this.finalize(c,new s.FunctionExpression(null,g.params,y,l))},m.prototype.parseSetterMethod=function(){var c=this.createNode(),l=!1,h=this.context.allowYield;this.context.allowYield=!l;var g=this.parseFormalParameters();g.params.length!==1?this.tolerateError(i.Messages.BadSetterArity):g.params[0]instanceof s.RestElement&&this.tolerateError(i.Messages.BadSetterRestParameter);var y=this.parsePropertyMethod(g);return this.context.allowYield=h,this.finalize(c,new s.FunctionExpression(null,g.params,y,l))},m.prototype.parseGeneratorMethod=function(){var c=this.createNode(),l=!0,h=this.context.allowYield;this.context.allowYield=!0;var g=this.parseFormalParameters();this.context.allowYield=!1;var y=this.parsePropertyMethod(g);return this.context.allowYield=h,this.finalize(c,new s.FunctionExpression(null,g.params,y,l))},m.prototype.isStartOfExpression=function(){var c=!0,l=this.lookahead.value;switch(this.lookahead.type){case 7:c=l==="["||l==="("||l==="{"||l==="+"||l==="-"||l==="!"||l==="~"||l==="++"||l==="--"||l==="/"||l==="/=";break;case 4:c=l==="class"||l==="delete"||l==="function"||l==="let"||l==="new"||l==="super"||l==="this"||l==="typeof"||l==="void"||l==="yield";break;default:break}return c},m.prototype.parseYieldExpression=function(){var c=this.createNode();this.expectKeyword("yield");var l=null,h=!1;if(!this.hasLineTerminator){var g=this.context.allowYield;this.context.allowYield=!1,h=this.match("*"),h?(this.nextToken(),l=this.parseAssignmentExpression()):this.isStartOfExpression()&&(l=this.parseAssignmentExpression()),this.context.allowYield=g}return this.finalize(c,new s.YieldExpression(l,h))},m.prototype.parseClassElement=function(c){var l=this.lookahead,h=this.createNode(),g="",y=null,S=null,F=!1,w=!1,M=!1,z=!1;if(this.match("*"))this.nextToken();else{F=this.match("["),y=this.parseObjectPropertyKey();var Z=y;if(Z.name==="static"&&(this.qualifiedPropertyName(this.lookahead)||this.match("*"))&&(l=this.lookahead,M=!0,F=this.match("["),this.match("*")?this.nextToken():y=this.parseObjectPropertyKey()),l.type===3&&!this.hasLineTerminator&&l.value==="async"){var te=this.lookahead.value;te!==":"&&te!=="("&&te!=="*"&&(z=!0,l=this.lookahead,y=this.parseObjectPropertyKey(),l.type===3&&l.value==="constructor"&&this.tolerateUnexpectedToken(l,i.Messages.ConstructorIsAsync))}}var fe=this.qualifiedPropertyName(this.lookahead);return l.type===3?l.value==="get"&&fe?(g="get",F=this.match("["),y=this.parseObjectPropertyKey(),this.context.allowYield=!1,S=this.parseGetterMethod()):l.value==="set"&&fe&&(g="set",F=this.match("["),y=this.parseObjectPropertyKey(),S=this.parseSetterMethod()):l.type===7&&l.value==="*"&&fe&&(g="init",F=this.match("["),y=this.parseObjectPropertyKey(),S=this.parseGeneratorMethod(),w=!0),!g&&y&&this.match("(")&&(g="init",S=z?this.parsePropertyMethodAsyncFunction():this.parsePropertyMethodFunction(),w=!0),g||this.throwUnexpectedToken(this.lookahead),g==="init"&&(g="method"),F||(M&&this.isPropertyKey(y,"prototype")&&this.throwUnexpectedToken(l,i.Messages.StaticPrototype),!M&&this.isPropertyKey(y,"constructor")&&((g!=="method"||!w||S&&S.generator)&&this.throwUnexpectedToken(l,i.Messages.ConstructorSpecialMethod),c.value?this.throwUnexpectedToken(l,i.Messages.DuplicateConstructor):c.value=!0,g="constructor")),this.finalize(h,new s.MethodDefinition(y,F,S,g,M))},m.prototype.parseClassElementList=function(){var c=[],l={value:!1};for(this.expect("{");!this.match("}");)this.match(";")?this.nextToken():c.push(this.parseClassElement(l));return this.expect("}"),c},m.prototype.parseClassBody=function(){var c=this.createNode(),l=this.parseClassElementList();return this.finalize(c,new s.ClassBody(l))},m.prototype.parseClassDeclaration=function(c){var l=this.createNode(),h=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var g=c&&this.lookahead.type!==3?null:this.parseVariableIdentifier(),y=null;this.matchKeyword("extends")&&(this.nextToken(),y=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var S=this.parseClassBody();return this.context.strict=h,this.finalize(l,new s.ClassDeclaration(g,y,S))},m.prototype.parseClassExpression=function(){var c=this.createNode(),l=this.context.strict;this.context.strict=!0,this.expectKeyword("class");var h=this.lookahead.type===3?this.parseVariableIdentifier():null,g=null;this.matchKeyword("extends")&&(this.nextToken(),g=this.isolateCoverGrammar(this.parseLeftHandSideExpressionAllowCall));var y=this.parseClassBody();return this.context.strict=l,this.finalize(c,new s.ClassExpression(h,g,y))},m.prototype.parseModule=function(){this.context.strict=!0,this.context.isModule=!0,this.scanner.isModule=!0;for(var c=this.createNode(),l=this.parseDirectivePrologues();this.lookahead.type!==2;)l.push(this.parseStatementListItem());return this.finalize(c,new s.Module(l))},m.prototype.parseScript=function(){for(var c=this.createNode(),l=this.parseDirectivePrologues();this.lookahead.type!==2;)l.push(this.parseStatementListItem());return this.finalize(c,new s.Script(l))},m.prototype.parseModuleSpecifier=function(){var c=this.createNode();this.lookahead.type!==8&&this.throwError(i.Messages.InvalidModuleSpecifier);var l=this.nextToken(),h=this.getTokenRaw(l);return this.finalize(c,new s.Literal(l.value,h))},m.prototype.parseImportSpecifier=function(){var c=this.createNode(),l,h;return this.lookahead.type===3?(l=this.parseVariableIdentifier(),h=l,this.matchContextualKeyword("as")&&(this.nextToken(),h=this.parseVariableIdentifier())):(l=this.parseIdentifierName(),h=l,this.matchContextualKeyword("as")?(this.nextToken(),h=this.parseVariableIdentifier()):this.throwUnexpectedToken(this.nextToken())),this.finalize(c,new s.ImportSpecifier(h,l))},m.prototype.parseNamedImports=function(){this.expect("{");for(var c=[];!this.match("}");)c.push(this.parseImportSpecifier()),this.match("}")||this.expect(",");return this.expect("}"),c},m.prototype.parseImportDefaultSpecifier=function(){var c=this.createNode(),l=this.parseIdentifierName();return this.finalize(c,new s.ImportDefaultSpecifier(l))},m.prototype.parseImportNamespaceSpecifier=function(){var c=this.createNode();this.expect("*"),this.matchContextualKeyword("as")||this.throwError(i.Messages.NoAsAfterImportNamespace),this.nextToken();var l=this.parseIdentifierName();return this.finalize(c,new s.ImportNamespaceSpecifier(l))},m.prototype.parseImportDeclaration=function(){this.context.inFunctionBody&&this.throwError(i.Messages.IllegalImportDeclaration);var c=this.createNode();this.expectKeyword("import");var l,h=[];if(this.lookahead.type===8)l=this.parseModuleSpecifier();else{if(this.match("{")?h=h.concat(this.parseNamedImports()):this.match("*")?h.push(this.parseImportNamespaceSpecifier()):this.isIdentifierName(this.lookahead)&&!this.matchKeyword("default")?(h.push(this.parseImportDefaultSpecifier()),this.match(",")&&(this.nextToken(),this.match("*")?h.push(this.parseImportNamespaceSpecifier()):this.match("{")?h=h.concat(this.parseNamedImports()):this.throwUnexpectedToken(this.lookahead))):this.throwUnexpectedToken(this.nextToken()),!this.matchContextualKeyword("from")){var g=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause;this.throwError(g,this.lookahead.value)}this.nextToken(),l=this.parseModuleSpecifier()}return this.consumeSemicolon(),this.finalize(c,new s.ImportDeclaration(h,l))},m.prototype.parseExportSpecifier=function(){var c=this.createNode(),l=this.parseIdentifierName(),h=l;return this.matchContextualKeyword("as")&&(this.nextToken(),h=this.parseIdentifierName()),this.finalize(c,new s.ExportSpecifier(l,h))},m.prototype.parseExportDeclaration=function(){this.context.inFunctionBody&&this.throwError(i.Messages.IllegalExportDeclaration);var c=this.createNode();this.expectKeyword("export");var l;if(this.matchKeyword("default"))if(this.nextToken(),this.matchKeyword("function")){var h=this.parseFunctionDeclaration(!0);l=this.finalize(c,new s.ExportDefaultDeclaration(h))}else if(this.matchKeyword("class")){var h=this.parseClassDeclaration(!0);l=this.finalize(c,new s.ExportDefaultDeclaration(h))}else if(this.matchContextualKeyword("async")){var h=this.matchAsyncFunction()?this.parseFunctionDeclaration(!0):this.parseAssignmentExpression();l=this.finalize(c,new s.ExportDefaultDeclaration(h))}else{this.matchContextualKeyword("from")&&this.throwError(i.Messages.UnexpectedToken,this.lookahead.value);var h=this.match("{")?this.parseObjectInitializer():this.match("[")?this.parseArrayInitializer():this.parseAssignmentExpression();this.consumeSemicolon(),l=this.finalize(c,new s.ExportDefaultDeclaration(h))}else if(this.match("*")){if(this.nextToken(),!this.matchContextualKeyword("from")){var g=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause;this.throwError(g,this.lookahead.value)}this.nextToken();var y=this.parseModuleSpecifier();this.consumeSemicolon(),l=this.finalize(c,new s.ExportAllDeclaration(y))}else if(this.lookahead.type===4){var h=void 0;switch(this.lookahead.value){case"let":case"const":h=this.parseLexicalDeclaration({inFor:!1});break;case"var":case"class":case"function":h=this.parseStatementListItem();break;default:this.throwUnexpectedToken(this.lookahead)}l=this.finalize(c,new s.ExportNamedDeclaration(h,[],null))}else if(this.matchAsyncFunction()){var h=this.parseFunctionDeclaration();l=this.finalize(c,new s.ExportNamedDeclaration(h,[],null))}else{var S=[],F=null,w=!1;for(this.expect("{");!this.match("}");)w=w||this.matchKeyword("default"),S.push(this.parseExportSpecifier()),this.match("}")||this.expect(",");if(this.expect("}"),this.matchContextualKeyword("from"))this.nextToken(),F=this.parseModuleSpecifier(),this.consumeSemicolon();else if(w){var g=this.lookahead.value?i.Messages.UnexpectedToken:i.Messages.MissingFromClause;this.throwError(g,this.lookahead.value)}else this.consumeSemicolon();l=this.finalize(c,new s.ExportNamedDeclaration(null,S,F))}return l},m}();e.Parser=x},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});function r(n,o){if(!n)throw new Error("ASSERT: "+o)}e.assert=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=function(){function n(){this.errors=[],this.tolerant=!1}return n.prototype.recordError=function(o){this.errors.push(o)},n.prototype.tolerate=function(o){if(this.tolerant)this.recordError(o);else throw o},n.prototype.constructError=function(o,i){var s=new Error(o);try{throw s}catch(a){Object.create&&Object.defineProperty&&(s=Object.create(a),Object.defineProperty(s,"column",{value:i}))}return s},n.prototype.createError=function(o,i,s,a){var u="Line "+i+": "+a,f=this.constructError(u,s);return f.index=o,f.lineNumber=i,f.description=a,f},n.prototype.throwError=function(o,i,s,a){throw this.createError(o,i,s,a)},n.prototype.tolerateError=function(o,i,s,a){var u=this.createError(o,i,s,a);if(this.tolerant)this.recordError(u);else throw u},n}();e.ErrorHandler=r},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Messages={BadGetterArity:"Getter must not have any formal parameters",BadSetterArity:"Setter must have exactly one formal parameter",BadSetterRestParameter:"Setter function argument must not be a rest parameter",ConstructorIsAsync:"Class constructor may not be an async method",ConstructorSpecialMethod:"Class constructor may not be an accessor",DeclarationMissingInitializer:"Missing initializer in %0 declaration",DefaultRestParameter:"Unexpected token =",DuplicateBinding:"Duplicate binding %0",DuplicateConstructor:"A class may only have one constructor",DuplicateProtoProperty:"Duplicate __proto__ fields are not allowed in object literals",ForInOfLoopInitializer:"%0 loop variable declaration may not have an initializer",GeneratorInLegacyContext:"Generator declarations are not allowed in legacy contexts",IllegalBreak:"Illegal break statement",IllegalContinue:"Illegal continue statement",IllegalExportDeclaration:"Unexpected token",IllegalImportDeclaration:"Unexpected token",IllegalLanguageModeDirective:"Illegal 'use strict' directive in function with non-simple parameter list",IllegalReturn:"Illegal return statement",InvalidEscapedReservedWord:"Keyword must not contain escaped characters",InvalidHexEscapeSequence:"Invalid hexadecimal escape sequence",InvalidLHSInAssignment:"Invalid left-hand side in assignment",InvalidLHSInForIn:"Invalid left-hand side in for-in",InvalidLHSInForLoop:"Invalid left-hand side in for-loop",InvalidModuleSpecifier:"Unexpected token",InvalidRegExp:"Invalid regular expression",LetInLexicalBinding:"let is disallowed as a lexically bound name",MissingFromClause:"Unexpected token",MultipleDefaultsInSwitch:"More than one default clause in switch statement",NewlineAfterThrow:"Illegal newline after throw",NoAsAfterImportNamespace:"Unexpected token",NoCatchOrFinally:"Missing catch or finally after try",ParameterAfterRestParameter:"Rest parameter must be last formal parameter",Redeclaration:"%0 '%1' has already been declared",StaticPrototype:"Classes may not have static property named prototype",StrictCatchVariable:"Catch variable may not be eval or arguments in strict mode",StrictDelete:"Delete of an unqualified identifier in strict mode.",StrictFunction:"In strict mode code, functions can only be declared at top level or inside a block",StrictFunctionName:"Function name may not be eval or arguments in strict mode",StrictLHSAssignment:"Assignment to eval or arguments is not allowed in strict mode",StrictLHSPostfix:"Postfix increment/decrement may not have eval or arguments operand in strict mode",StrictLHSPrefix:"Prefix increment/decrement may not have eval or arguments operand in strict mode",StrictModeWith:"Strict mode code may not include a with statement",StrictOctalLiteral:"Octal literals are not allowed in strict mode.",StrictParamDupe:"Strict mode function may not have duplicate parameter names",StrictParamName:"Parameter name eval or arguments is not allowed in strict mode",StrictReservedWord:"Use of future reserved word in strict mode",StrictVarName:"Variable name may not be eval or arguments in strict mode",TemplateOctalLiteral:"Octal literals are not allowed in template strings.",UnexpectedEOS:"Unexpected end of input",UnexpectedIdentifier:"Unexpected identifier",UnexpectedNumber:"Unexpected number",UnexpectedReserved:"Unexpected reserved word",UnexpectedString:"Unexpected string",UnexpectedTemplate:"Unexpected quasi %0",UnexpectedToken:"Unexpected token %0",UnexpectedTokenIllegal:"Unexpected token ILLEGAL",UnknownLabel:"Undefined label '%0'",UnterminatedRegExp:"Invalid regular expression: missing /"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(9),o=r(4),i=r(11);function s(f){return"0123456789abcdef".indexOf(f.toLowerCase())}function a(f){return"01234567".indexOf(f)}var u=function(){function f(p,x){this.source=p,this.errorHandler=x,this.trackComment=!1,this.isModule=!1,this.length=p.length,this.index=0,this.lineNumber=p.length>0?1:0,this.lineStart=0,this.curlyStack=[]}return f.prototype.saveState=function(){return{index:this.index,lineNumber:this.lineNumber,lineStart:this.lineStart}},f.prototype.restoreState=function(p){this.index=p.index,this.lineNumber=p.lineNumber,this.lineStart=p.lineStart},f.prototype.eof=function(){return this.index>=this.length},f.prototype.throwUnexpectedToken=function(p){return p===void 0&&(p=i.Messages.UnexpectedTokenIllegal),this.errorHandler.throwError(this.index,this.lineNumber,this.index-this.lineStart+1,p)},f.prototype.tolerateUnexpectedToken=function(p){p===void 0&&(p=i.Messages.UnexpectedTokenIllegal),this.errorHandler.tolerateError(this.index,this.lineNumber,this.index-this.lineStart+1,p)},f.prototype.skipSingleLineComment=function(p){var x=[],m,c;for(this.trackComment&&(x=[],m=this.index-p,c={start:{line:this.lineNumber,column:this.index-this.lineStart-p},end:{}});!this.eof();){var l=this.source.charCodeAt(this.index);if(++this.index,o.Character.isLineTerminator(l)){if(this.trackComment){c.end={line:this.lineNumber,column:this.index-this.lineStart-1};var h={multiLine:!1,slice:[m+p,this.index-1],range:[m,this.index-1],loc:c};x.push(h)}return l===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,x}}if(this.trackComment){c.end={line:this.lineNumber,column:this.index-this.lineStart};var h={multiLine:!1,slice:[m+p,this.index],range:[m,this.index],loc:c};x.push(h)}return x},f.prototype.skipMultiLineComment=function(){var p=[],x,m;for(this.trackComment&&(p=[],x=this.index-2,m={start:{line:this.lineNumber,column:this.index-this.lineStart-2},end:{}});!this.eof();){var c=this.source.charCodeAt(this.index);if(o.Character.isLineTerminator(c))c===13&&this.source.charCodeAt(this.index+1)===10&&++this.index,++this.lineNumber,++this.index,this.lineStart=this.index;else if(c===42){if(this.source.charCodeAt(this.index+1)===47){if(this.index+=2,this.trackComment){m.end={line:this.lineNumber,column:this.index-this.lineStart};var l={multiLine:!0,slice:[x+2,this.index-2],range:[x,this.index],loc:m};p.push(l)}return p}++this.index}else++this.index}if(this.trackComment){m.end={line:this.lineNumber,column:this.index-this.lineStart};var l={multiLine:!0,slice:[x+2,this.index],range:[x,this.index],loc:m};p.push(l)}return this.tolerateUnexpectedToken(),p},f.prototype.scanComments=function(){var p;this.trackComment&&(p=[]);for(var x=this.index===0;!this.eof();){var m=this.source.charCodeAt(this.index);if(o.Character.isWhiteSpace(m))++this.index;else if(o.Character.isLineTerminator(m))++this.index,m===13&&this.source.charCodeAt(this.index)===10&&++this.index,++this.lineNumber,this.lineStart=this.index,x=!0;else if(m===47)if(m=this.source.charCodeAt(this.index+1),m===47){this.index+=2;var c=this.skipSingleLineComment(2);this.trackComment&&(p=p.concat(c)),x=!0}else if(m===42){this.index+=2;var c=this.skipMultiLineComment();this.trackComment&&(p=p.concat(c))}else break;else if(x&&m===45)if(this.source.charCodeAt(this.index+1)===45&&this.source.charCodeAt(this.index+2)===62){this.index+=3;var c=this.skipSingleLineComment(3);this.trackComment&&(p=p.concat(c))}else break;else if(m===60&&!this.isModule)if(this.source.slice(this.index+1,this.index+4)==="!--"){this.index+=4;var c=this.skipSingleLineComment(4);this.trackComment&&(p=p.concat(c))}else break;else break}return p},f.prototype.isFutureReservedWord=function(p){switch(p){case"enum":case"export":case"import":case"super":return!0;default:return!1}},f.prototype.isStrictModeReservedWord=function(p){switch(p){case"implements":case"interface":case"package":case"private":case"protected":case"public":case"static":case"yield":case"let":return!0;default:return!1}},f.prototype.isRestrictedWord=function(p){return p==="eval"||p==="arguments"},f.prototype.isKeyword=function(p){switch(p.length){case 2:return p==="if"||p==="in"||p==="do";case 3:return p==="var"||p==="for"||p==="new"||p==="try"||p==="let";case 4:return p==="this"||p==="else"||p==="case"||p==="void"||p==="with"||p==="enum";case 5:return p==="while"||p==="break"||p==="catch"||p==="throw"||p==="const"||p==="yield"||p==="class"||p==="super";case 6:return p==="return"||p==="typeof"||p==="delete"||p==="switch"||p==="export"||p==="import";case 7:return p==="default"||p==="finally"||p==="extends";case 8:return p==="function"||p==="continue"||p==="debugger";case 10:return p==="instanceof";default:return!1}},f.prototype.codePointAt=function(p){var x=this.source.charCodeAt(p);if(x>=55296&&x<=56319){var m=this.source.charCodeAt(p+1);if(m>=56320&&m<=57343){var c=x;x=(c-55296)*1024+m-56320+65536}}return x},f.prototype.scanHexEscape=function(p){for(var x=p==="u"?4:2,m=0,c=0;c<x;++c)if(!this.eof()&&o.Character.isHexDigit(this.source.charCodeAt(this.index)))m=m*16+s(this.source[this.index++]);else return null;return String.fromCharCode(m)},f.prototype.scanUnicodeCodePointEscape=function(){var p=this.source[this.index],x=0;for(p==="}"&&this.throwUnexpectedToken();!this.eof()&&(p=this.source[this.index++],!!o.Character.isHexDigit(p.charCodeAt(0)));)x=x*16+s(p);return(x>1114111||p!=="}")&&this.throwUnexpectedToken(),o.Character.fromCodePoint(x)},f.prototype.getIdentifier=function(){for(var p=this.index++;!this.eof();){var x=this.source.charCodeAt(this.index);if(x===92)return this.index=p,this.getComplexIdentifier();if(x>=55296&&x<57343)return this.index=p,this.getComplexIdentifier();if(o.Character.isIdentifierPart(x))++this.index;else break}return this.source.slice(p,this.index)},f.prototype.getComplexIdentifier=function(){var p=this.codePointAt(this.index),x=o.Character.fromCodePoint(p);this.index+=x.length;var m;for(p===92&&(this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,m=this.scanUnicodeCodePointEscape()):(m=this.scanHexEscape("u"),(m===null||m==="\\"||!o.Character.isIdentifierStart(m.charCodeAt(0)))&&this.throwUnexpectedToken()),x=m);!this.eof()&&(p=this.codePointAt(this.index),!!o.Character.isIdentifierPart(p));)m=o.Character.fromCodePoint(p),x+=m,this.index+=m.length,p===92&&(x=x.substr(0,x.length-1),this.source.charCodeAt(this.index)!==117&&this.throwUnexpectedToken(),++this.index,this.source[this.index]==="{"?(++this.index,m=this.scanUnicodeCodePointEscape()):(m=this.scanHexEscape("u"),(m===null||m==="\\"||!o.Character.isIdentifierPart(m.charCodeAt(0)))&&this.throwUnexpectedToken()),x+=m);return x},f.prototype.octalToDecimal=function(p){var x=p!=="0",m=a(p);return!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(x=!0,m=m*8+a(this.source[this.index++]),"0123".indexOf(p)>=0&&!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index))&&(m=m*8+a(this.source[this.index++]))),{code:m,octal:x}},f.prototype.scanIdentifier=function(){var p,x=this.index,m=this.source.charCodeAt(x)===92?this.getComplexIdentifier():this.getIdentifier();if(m.length===1?p=3:this.isKeyword(m)?p=4:m==="null"?p=5:m==="true"||m==="false"?p=1:p=3,p!==3&&x+m.length!==this.index){var c=this.index;this.index=x,this.tolerateUnexpectedToken(i.Messages.InvalidEscapedReservedWord),this.index=c}return{type:p,value:m,lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}},f.prototype.scanPunctuator=function(){var p=this.index,x=this.source[this.index];switch(x){case"(":case"{":x==="{"&&this.curlyStack.push("{"),++this.index;break;case".":++this.index,this.source[this.index]==="."&&this.source[this.index+1]==="."&&(this.index+=2,x="...");break;case"}":++this.index,this.curlyStack.pop();break;case")":case";":case",":case"[":case"]":case":":case"?":case"~":++this.index;break;default:x=this.source.substr(this.index,4),x===">>>="?this.index+=4:(x=x.substr(0,3),x==="==="||x==="!=="||x===">>>"||x==="<<="||x===">>="||x==="**="?this.index+=3:(x=x.substr(0,2),x==="&&"||x==="||"||x==="=="||x==="!="||x==="+="||x==="-="||x==="*="||x==="/="||x==="++"||x==="--"||x==="<<"||x===">>"||x==="&="||x==="|="||x==="^="||x==="%="||x==="<="||x===">="||x==="=>"||x==="**"?this.index+=2:(x=this.source[this.index],"<>=!+-*%&|^/".indexOf(x)>=0&&++this.index)))}return this.index===p&&this.throwUnexpectedToken(),{type:7,value:x,lineNumber:this.lineNumber,lineStart:this.lineStart,start:p,end:this.index}},f.prototype.scanHexLiteral=function(p){for(var x="";!this.eof()&&o.Character.isHexDigit(this.source.charCodeAt(this.index));)x+=this.source[this.index++];return x.length===0&&this.throwUnexpectedToken(),o.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseInt("0x"+x,16),lineNumber:this.lineNumber,lineStart:this.lineStart,start:p,end:this.index}},f.prototype.scanBinaryLiteral=function(p){for(var x="",m;!this.eof()&&(m=this.source[this.index],!(m!=="0"&&m!=="1"));)x+=this.source[this.index++];return x.length===0&&this.throwUnexpectedToken(),this.eof()||(m=this.source.charCodeAt(this.index),(o.Character.isIdentifierStart(m)||o.Character.isDecimalDigit(m))&&this.throwUnexpectedToken()),{type:6,value:parseInt(x,2),lineNumber:this.lineNumber,lineStart:this.lineStart,start:p,end:this.index}},f.prototype.scanOctalLiteral=function(p,x){var m="",c=!1;for(o.Character.isOctalDigit(p.charCodeAt(0))?(c=!0,m="0"+this.source[this.index++]):++this.index;!this.eof()&&o.Character.isOctalDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];return!c&&m.length===0&&this.throwUnexpectedToken(),(o.Character.isIdentifierStart(this.source.charCodeAt(this.index))||o.Character.isDecimalDigit(this.source.charCodeAt(this.index)))&&this.throwUnexpectedToken(),{type:6,value:parseInt(m,8),octal:c,lineNumber:this.lineNumber,lineStart:this.lineStart,start:x,end:this.index}},f.prototype.isImplicitOctalLiteral=function(){for(var p=this.index+1;p<this.length;++p){var x=this.source[p];if(x==="8"||x==="9")return!1;if(!o.Character.isOctalDigit(x.charCodeAt(0)))return!0}return!0},f.prototype.scanNumericLiteral=function(){var p=this.index,x=this.source[p];n.assert(o.Character.isDecimalDigit(x.charCodeAt(0))||x===".","Numeric literal must start with a decimal digit or a decimal point");var m="";if(x!=="."){if(m=this.source[this.index++],x=this.source[this.index],m==="0"){if(x==="x"||x==="X")return++this.index,this.scanHexLiteral(p);if(x==="b"||x==="B")return++this.index,this.scanBinaryLiteral(p);if(x==="o"||x==="O")return this.scanOctalLiteral(x,p);if(x&&o.Character.isOctalDigit(x.charCodeAt(0))&&this.isImplicitOctalLiteral())return this.scanOctalLiteral(x,p)}for(;o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];x=this.source[this.index]}if(x==="."){for(m+=this.source[this.index++];o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];x=this.source[this.index]}if(x==="e"||x==="E")if(m+=this.source[this.index++],x=this.source[this.index],(x==="+"||x==="-")&&(m+=this.source[this.index++]),o.Character.isDecimalDigit(this.source.charCodeAt(this.index)))for(;o.Character.isDecimalDigit(this.source.charCodeAt(this.index));)m+=this.source[this.index++];else this.throwUnexpectedToken();return o.Character.isIdentifierStart(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(),{type:6,value:parseFloat(m),lineNumber:this.lineNumber,lineStart:this.lineStart,start:p,end:this.index}},f.prototype.scanStringLiteral=function(){var p=this.index,x=this.source[p];n.assert(x==="'"||x==='"',"String literal must starts with a quote"),++this.index;for(var m=!1,c="";!this.eof();){var l=this.source[this.index++];if(l===x){x="";break}else if(l==="\\")if(l=this.source[this.index++],!l||!o.Character.isLineTerminator(l.charCodeAt(0)))switch(l){case"u":if(this.source[this.index]==="{")++this.index,c+=this.scanUnicodeCodePointEscape();else{var h=this.scanHexEscape(l);h===null&&this.throwUnexpectedToken(),c+=h}break;case"x":var g=this.scanHexEscape(l);g===null&&this.throwUnexpectedToken(i.Messages.InvalidHexEscapeSequence),c+=g;break;case"n":c+=`
`;break;case"r":c+="\r";break;case"t":c+="	";break;case"b":c+="\b";break;case"f":c+="\f";break;case"v":c+="\v";break;case"8":case"9":c+=l,this.tolerateUnexpectedToken();break;default:if(l&&o.Character.isOctalDigit(l.charCodeAt(0))){var y=this.octalToDecimal(l);m=y.octal||m,c+=String.fromCharCode(y.code)}else c+=l;break}else++this.lineNumber,l==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else{if(o.Character.isLineTerminator(l.charCodeAt(0)))break;c+=l}}return x!==""&&(this.index=p,this.throwUnexpectedToken()),{type:8,value:c,octal:m,lineNumber:this.lineNumber,lineStart:this.lineStart,start:p,end:this.index}},f.prototype.scanTemplate=function(){var p="",x=!1,m=this.index,c=this.source[m]==="`",l=!1,h=2;for(++this.index;!this.eof();){var g=this.source[this.index++];if(g==="`"){h=1,l=!0,x=!0;break}else if(g==="$"){if(this.source[this.index]==="{"){this.curlyStack.push("${"),++this.index,x=!0;break}p+=g}else if(g==="\\")if(g=this.source[this.index++],o.Character.isLineTerminator(g.charCodeAt(0)))++this.lineNumber,g==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index;else switch(g){case"n":p+=`
`;break;case"r":p+="\r";break;case"t":p+="	";break;case"u":if(this.source[this.index]==="{")++this.index,p+=this.scanUnicodeCodePointEscape();else{var y=this.index,S=this.scanHexEscape(g);S!==null?p+=S:(this.index=y,p+=g)}break;case"x":var F=this.scanHexEscape(g);F===null&&this.throwUnexpectedToken(i.Messages.InvalidHexEscapeSequence),p+=F;break;case"b":p+="\b";break;case"f":p+="\f";break;case"v":p+="\v";break;default:g==="0"?(o.Character.isDecimalDigit(this.source.charCodeAt(this.index))&&this.throwUnexpectedToken(i.Messages.TemplateOctalLiteral),p+="\0"):o.Character.isOctalDigit(g.charCodeAt(0))?this.throwUnexpectedToken(i.Messages.TemplateOctalLiteral):p+=g;break}else o.Character.isLineTerminator(g.charCodeAt(0))?(++this.lineNumber,g==="\r"&&this.source[this.index]===`
`&&++this.index,this.lineStart=this.index,p+=`
`):p+=g}return x||this.throwUnexpectedToken(),c||this.curlyStack.pop(),{type:10,value:this.source.slice(m+1,this.index-h),cooked:p,head:c,tail:l,lineNumber:this.lineNumber,lineStart:this.lineStart,start:m,end:this.index}},f.prototype.testRegExp=function(p,x){var m="\uFFFF",c=p,l=this;x.indexOf("u")>=0&&(c=c.replace(/\\u\{([0-9a-fA-F]+)\}|\\u([a-fA-F0-9]{4})/g,function(h,g,y){var S=parseInt(g||y,16);return S>1114111&&l.throwUnexpectedToken(i.Messages.InvalidRegExp),S<=65535?String.fromCharCode(S):m}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,m));try{RegExp(c)}catch{this.throwUnexpectedToken(i.Messages.InvalidRegExp)}try{return new RegExp(p,x)}catch{return null}},f.prototype.scanRegExpBody=function(){var p=this.source[this.index];n.assert(p==="/","Regular expression literal must start with a slash");for(var x=this.source[this.index++],m=!1,c=!1;!this.eof();)if(p=this.source[this.index++],x+=p,p==="\\")p=this.source[this.index++],o.Character.isLineTerminator(p.charCodeAt(0))&&this.throwUnexpectedToken(i.Messages.UnterminatedRegExp),x+=p;else if(o.Character.isLineTerminator(p.charCodeAt(0)))this.throwUnexpectedToken(i.Messages.UnterminatedRegExp);else if(m)p==="]"&&(m=!1);else if(p==="/"){c=!0;break}else p==="["&&(m=!0);return c||this.throwUnexpectedToken(i.Messages.UnterminatedRegExp),x.substr(1,x.length-2)},f.prototype.scanRegExpFlags=function(){for(var p="",x="";!this.eof();){var m=this.source[this.index];if(!o.Character.isIdentifierPart(m.charCodeAt(0)))break;if(++this.index,m==="\\"&&!this.eof())if(m=this.source[this.index],m==="u"){++this.index;var c=this.index,l=this.scanHexEscape("u");if(l!==null)for(x+=l,p+="\\u";c<this.index;++c)p+=this.source[c];else this.index=c,x+="u",p+="\\u";this.tolerateUnexpectedToken()}else p+="\\",this.tolerateUnexpectedToken();else x+=m,p+=m}return x},f.prototype.scanRegExp=function(){var p=this.index,x=this.scanRegExpBody(),m=this.scanRegExpFlags(),c=this.testRegExp(x,m);return{type:9,value:"",pattern:x,flags:m,regex:c,lineNumber:this.lineNumber,lineStart:this.lineStart,start:p,end:this.index}},f.prototype.lex=function(){if(this.eof())return{type:2,value:"",lineNumber:this.lineNumber,lineStart:this.lineStart,start:this.index,end:this.index};var p=this.source.charCodeAt(this.index);return o.Character.isIdentifierStart(p)?this.scanIdentifier():p===40||p===41||p===59?this.scanPunctuator():p===39||p===34?this.scanStringLiteral():p===46?o.Character.isDecimalDigit(this.source.charCodeAt(this.index+1))?this.scanNumericLiteral():this.scanPunctuator():o.Character.isDecimalDigit(p)?this.scanNumericLiteral():p===96||p===125&&this.curlyStack[this.curlyStack.length-1]==="${"?this.scanTemplate():p>=55296&&p<57343&&o.Character.isIdentifierStart(this.codePointAt(this.index))?this.scanIdentifier():this.scanPunctuator()},f}();e.Scanner=u},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.TokenName={},e.TokenName[1]="Boolean",e.TokenName[2]="<end>",e.TokenName[3]="Identifier",e.TokenName[4]="Keyword",e.TokenName[5]="Null",e.TokenName[6]="Numeric",e.TokenName[7]="Punctuator",e.TokenName[8]="String",e.TokenName[9]="RegularExpression",e.TokenName[10]="Template"},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.XHTMLEntities={quot:'"',amp:"&",apos:"'",gt:">",nbsp:"\xA0",iexcl:"\xA1",cent:"\xA2",pound:"\xA3",curren:"\xA4",yen:"\xA5",brvbar:"\xA6",sect:"\xA7",uml:"\xA8",copy:"\xA9",ordf:"\xAA",laquo:"\xAB",not:"\xAC",shy:"\xAD",reg:"\xAE",macr:"\xAF",deg:"\xB0",plusmn:"\xB1",sup2:"\xB2",sup3:"\xB3",acute:"\xB4",micro:"\xB5",para:"\xB6",middot:"\xB7",cedil:"\xB8",sup1:"\xB9",ordm:"\xBA",raquo:"\xBB",frac14:"\xBC",frac12:"\xBD",frac34:"\xBE",iquest:"\xBF",Agrave:"\xC0",Aacute:"\xC1",Acirc:"\xC2",Atilde:"\xC3",Auml:"\xC4",Aring:"\xC5",AElig:"\xC6",Ccedil:"\xC7",Egrave:"\xC8",Eacute:"\xC9",Ecirc:"\xCA",Euml:"\xCB",Igrave:"\xCC",Iacute:"\xCD",Icirc:"\xCE",Iuml:"\xCF",ETH:"\xD0",Ntilde:"\xD1",Ograve:"\xD2",Oacute:"\xD3",Ocirc:"\xD4",Otilde:"\xD5",Ouml:"\xD6",times:"\xD7",Oslash:"\xD8",Ugrave:"\xD9",Uacute:"\xDA",Ucirc:"\xDB",Uuml:"\xDC",Yacute:"\xDD",THORN:"\xDE",szlig:"\xDF",agrave:"\xE0",aacute:"\xE1",acirc:"\xE2",atilde:"\xE3",auml:"\xE4",aring:"\xE5",aelig:"\xE6",ccedil:"\xE7",egrave:"\xE8",eacute:"\xE9",ecirc:"\xEA",euml:"\xEB",igrave:"\xEC",iacute:"\xED",icirc:"\xEE",iuml:"\xEF",eth:"\xF0",ntilde:"\xF1",ograve:"\xF2",oacute:"\xF3",ocirc:"\xF4",otilde:"\xF5",ouml:"\xF6",divide:"\xF7",oslash:"\xF8",ugrave:"\xF9",uacute:"\xFA",ucirc:"\xFB",uuml:"\xFC",yacute:"\xFD",thorn:"\xFE",yuml:"\xFF",OElig:"\u0152",oelig:"\u0153",Scaron:"\u0160",scaron:"\u0161",Yuml:"\u0178",fnof:"\u0192",circ:"\u02C6",tilde:"\u02DC",Alpha:"\u0391",Beta:"\u0392",Gamma:"\u0393",Delta:"\u0394",Epsilon:"\u0395",Zeta:"\u0396",Eta:"\u0397",Theta:"\u0398",Iota:"\u0399",Kappa:"\u039A",Lambda:"\u039B",Mu:"\u039C",Nu:"\u039D",Xi:"\u039E",Omicron:"\u039F",Pi:"\u03A0",Rho:"\u03A1",Sigma:"\u03A3",Tau:"\u03A4",Upsilon:"\u03A5",Phi:"\u03A6",Chi:"\u03A7",Psi:"\u03A8",Omega:"\u03A9",alpha:"\u03B1",beta:"\u03B2",gamma:"\u03B3",delta:"\u03B4",epsilon:"\u03B5",zeta:"\u03B6",eta:"\u03B7",theta:"\u03B8",iota:"\u03B9",kappa:"\u03BA",lambda:"\u03BB",mu:"\u03BC",nu:"\u03BD",xi:"\u03BE",omicron:"\u03BF",pi:"\u03C0",rho:"\u03C1",sigmaf:"\u03C2",sigma:"\u03C3",tau:"\u03C4",upsilon:"\u03C5",phi:"\u03C6",chi:"\u03C7",psi:"\u03C8",omega:"\u03C9",thetasym:"\u03D1",upsih:"\u03D2",piv:"\u03D6",ensp:"\u2002",emsp:"\u2003",thinsp:"\u2009",zwnj:"\u200C",zwj:"\u200D",lrm:"\u200E",rlm:"\u200F",ndash:"\u2013",mdash:"\u2014",lsquo:"\u2018",rsquo:"\u2019",sbquo:"\u201A",ldquo:"\u201C",rdquo:"\u201D",bdquo:"\u201E",dagger:"\u2020",Dagger:"\u2021",bull:"\u2022",hellip:"\u2026",permil:"\u2030",prime:"\u2032",Prime:"\u2033",lsaquo:"\u2039",rsaquo:"\u203A",oline:"\u203E",frasl:"\u2044",euro:"\u20AC",image:"\u2111",weierp:"\u2118",real:"\u211C",trade:"\u2122",alefsym:"\u2135",larr:"\u2190",uarr:"\u2191",rarr:"\u2192",darr:"\u2193",harr:"\u2194",crarr:"\u21B5",lArr:"\u21D0",uArr:"\u21D1",rArr:"\u21D2",dArr:"\u21D3",hArr:"\u21D4",forall:"\u2200",part:"\u2202",exist:"\u2203",empty:"\u2205",nabla:"\u2207",isin:"\u2208",notin:"\u2209",ni:"\u220B",prod:"\u220F",sum:"\u2211",minus:"\u2212",lowast:"\u2217",radic:"\u221A",prop:"\u221D",infin:"\u221E",ang:"\u2220",and:"\u2227",or:"\u2228",cap:"\u2229",cup:"\u222A",int:"\u222B",there4:"\u2234",sim:"\u223C",cong:"\u2245",asymp:"\u2248",ne:"\u2260",equiv:"\u2261",le:"\u2264",ge:"\u2265",sub:"\u2282",sup:"\u2283",nsub:"\u2284",sube:"\u2286",supe:"\u2287",oplus:"\u2295",otimes:"\u2297",perp:"\u22A5",sdot:"\u22C5",lceil:"\u2308",rceil:"\u2309",lfloor:"\u230A",rfloor:"\u230B",loz:"\u25CA",spades:"\u2660",clubs:"\u2663",hearts:"\u2665",diams:"\u2666",lang:"\u27E8",rang:"\u27E9"}},function(t,e,r){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=r(10),o=r(12),i=r(13),s=function(){function u(){this.values=[],this.curly=this.paren=-1}return u.prototype.beforeFunctionExpression=function(f){return["(","{","[","in","typeof","instanceof","new","return","case","delete","throw","void","=","+=","-=","*=","**=","/=","%=","<<=",">>=",">>>=","&=","|=","^=",",","+","-","*","**","/","%","++","--","<<",">>",">>>","&","|","^","!","~","&&","||","?",":","===","==",">=","<=","<",">","!=","!=="].indexOf(f)>=0},u.prototype.isRegexStart=function(){var f=this.values[this.values.length-1],p=f!==null;switch(f){case"this":case"]":p=!1;break;case")":var x=this.values[this.paren-1];p=x==="if"||x==="while"||x==="for"||x==="with";break;case"}":if(p=!1,this.values[this.curly-3]==="function"){var m=this.values[this.curly-4];p=m?!this.beforeFunctionExpression(m):!1}else if(this.values[this.curly-4]==="function"){var m=this.values[this.curly-5];p=m?!this.beforeFunctionExpression(m):!0}break;default:break}return p},u.prototype.push=function(f){f.type===7||f.type===4?(f.value==="{"?this.curly=this.values.length:f.value==="("&&(this.paren=this.values.length),this.values.push(f.value)):this.values.push(null)},u}(),a=function(){function u(f,p){this.errorHandler=new n.ErrorHandler,this.errorHandler.tolerant=p?typeof p.tolerant=="boolean"&&p.tolerant:!1,this.scanner=new o.Scanner(f,this.errorHandler),this.scanner.trackComment=p?typeof p.comment=="boolean"&&p.comment:!1,this.trackRange=p?typeof p.range=="boolean"&&p.range:!1,this.trackLoc=p?typeof p.loc=="boolean"&&p.loc:!1,this.buffer=[],this.reader=new s}return u.prototype.errors=function(){return this.errorHandler.errors},u.prototype.getNextToken=function(){if(this.buffer.length===0){var f=this.scanner.scanComments();if(this.scanner.trackComment)for(var p=0;p<f.length;++p){var x=f[p],m=this.scanner.source.slice(x.slice[0],x.slice[1]),c={type:x.multiLine?"BlockComment":"LineComment",value:m};this.trackRange&&(c.range=x.range),this.trackLoc&&(c.loc=x.loc),this.buffer.push(c)}if(!this.scanner.eof()){var l=void 0;this.trackLoc&&(l={start:{line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},end:{}});var h=this.scanner.source[this.scanner.index]==="/"&&this.reader.isRegexStart(),g=h?this.scanner.scanRegExp():this.scanner.lex();this.reader.push(g);var y={type:i.TokenName[g.type],value:this.scanner.source.slice(g.start,g.end)};if(this.trackRange&&(y.range=[g.start,g.end]),this.trackLoc&&(l.end={line:this.scanner.lineNumber,column:this.scanner.index-this.scanner.lineStart},y.loc=l),g.type===9){var S=g.pattern,F=g.flags;y.regex={pattern:S,flags:F}}this.buffer.push(y)}}return this.buffer.shift()},u}();e.Tokenizer=a}])})});var ME=pt(Zt=>{"use strict";function MY(t){return Array.isArray?Array.isArray(t):RE(t)==="[object Array]"}Zt.isArray=MY;function TY(t){return typeof t=="boolean"}Zt.isBoolean=TY;function IY(t){return t===null}Zt.isNull=IY;function PY(t){return t==null}Zt.isNullOrUndefined=PY;function NY(t){return typeof t=="number"}Zt.isNumber=NY;function LY(t){return typeof t=="string"}Zt.isString=LY;function BY(t){return typeof t=="symbol"}Zt.isSymbol=BY;function WY(t){return t===void 0}Zt.isUndefined=WY;function HY(t){return RE(t)==="[object RegExp]"}Zt.isRegExp=HY;function UY(t){return typeof t=="object"&&t!==null}Zt.isObject=UY;function zY(t){return RE(t)==="[object Date]"}Zt.isDate=zY;function qY(t){return RE(t)==="[object Error]"||t instanceof Error}Zt.isError=qY;function jY(t){return typeof t=="function"}Zt.isFunction=jY;function GY(t){return t===null||typeof t=="boolean"||typeof t=="number"||typeof t=="string"||typeof t=="symbol"||typeof t>"u"}Zt.isPrimitive=GY;Zt.isBuffer=require("buffer").Buffer.isBuffer;function RE(t){return Object.prototype.toString.call(t)}});var AH=pt((kbe,wH)=>{"use strict";var kH=[1,10,100,1e3,1e4,1e5,1e6,1e7,1e8,1e9],X,vH=t=>t<1e5?t<100?t<10?0:1:t<1e4?t<1e3?2:3:4:t<1e7?t<1e6?5:6:t<1e9?t<1e8?7:8:9;function _H(t,e){if(t===e)return 0;if(~~t===t&&~~e===e){if(t===0||e===0)return t<e?-1:1;if(t<0||e<0){if(e>=0)return-1;if(t>=0)return 1;t=-t,e=-e}let o=vH(t),i=vH(e),s=0;return o<i?(t*=kH[i-o-1],e/=10,s=-1):o>i&&(e*=kH[o-i-1],t/=10,s=1),t===e?s:t<e?-1:1}let r=String(t),n=String(e);return r===n?0:r<n?-1:1}function JY(t){let e=0;for(;t>=32;)e|=t&1,t>>=1;return t+e}function OH(t,e,r,n){let o=e+1;if(o===r)return 1;if(n(t[o++],t[e])<0){for(;o<r&&n(t[o],t[o-1])<0;)o++;FH(t,e,o),FH(X,e,o)}else for(;o<r&&n(t[o],t[o-1])>=0;)o++;return o-e}function FH(t,e,r){for(r--;e<r;){let n=t[e];t[e++]=t[r],t[r--]=n}}function DH(t,e,r,n,o){for(n===e&&n++;n<r;n++){let i=t[n],s=X[n],a=e,u=n;for(;a<u;){let p=a+u>>>1;o(i,t[p])<0?u=p:a=p+1}let f=n-a;switch(f){case 3:t[a+3]=t[a+2],X[a+3]=X[a+2];case 2:t[a+2]=t[a+1],X[a+2]=X[a+1];case 1:t[a+1]=t[a],X[a+1]=X[a];break;default:for(;f>0;)t[a+f]=t[a+f-1],X[a+f]=X[a+f-1],f--}t[a]=i,X[a]=s}}function B_(t,e,r,n,o,i){let s=0,a=0,u=1;if(i(t,e[r+o])>0){for(a=n-o;u<a&&i(t,e[r+o+u])>0;)s=u,u=(u<<1)+1,u<=0&&(u=a);u>a&&(u=a),s+=o,u+=o}else{for(a=o+1;u<a&&i(t,e[r+o-u])<=0;)s=u,u=(u<<1)+1,u<=0&&(u=a);u>a&&(u=a);let f=s;s=o-u,u=o-f}for(s++;s<u;){let f=s+(u-s>>>1);i(t,e[r+f])>0?s=f+1:u=f}return u}function W_(t,e,r,n,o,i){let s=0,a=0,u=1;if(i(t,e[r+o])<0){for(a=o+1;u<a&&i(t,e[r+o-u])<0;)s=u,u=(u<<1)+1,u<=0&&(u=a);u>a&&(u=a);let f=s;s=o-u,u=o-f}else{for(a=n-o;u<a&&i(t,e[r+o+u])>=0;)s=u,u=(u<<1)+1,u<=0&&(u=a);u>a&&(u=a),s+=o,u+=o}for(s++;s<u;){let f=s+(u-s>>>1);i(t,e[r+f])<0?u=f:s=f+1}return u}var H_=class{constructor(e,r){this.array=e,this.compare=r;let{length:n}=e;this.length=n,this.minGallop=7,this.tmpStorageLength=n<2*256?n>>>1:256,this.tmp=new Array(this.tmpStorageLength),this.tmpIndex=new Array(this.tmpStorageLength),this.stackLength=n<120?5:n<1542?10:n<119151?19:40,this.runStart=new Array(this.stackLength),this.runLength=new Array(this.stackLength),this.stackSize=0}pushRun(e,r){this.runStart[this.stackSize]=e,this.runLength[this.stackSize]=r,this.stackSize+=1}mergeRuns(){for(;this.stackSize>1;){let e=this.stackSize-2;if(e>=1&&this.runLength[e-1]<=this.runLength[e]+this.runLength[e+1]||e>=2&&this.runLength[e-2]<=this.runLength[e]+this.runLength[e-1])this.runLength[e-1]<this.runLength[e+1]&&e--;else if(this.runLength[e]>this.runLength[e+1])break;this.mergeAt(e)}}forceMergeRuns(){for(;this.stackSize>1;){let e=this.stackSize-2;e>0&&this.runLength[e-1]<this.runLength[e+1]&&e--,this.mergeAt(e)}}mergeAt(e){let{compare:r}=this,{array:n}=this,o=this.runStart[e],i=this.runLength[e],s=this.runStart[e+1],a=this.runLength[e+1];this.runLength[e]=i+a,e===this.stackSize-3&&(this.runStart[e+1]=this.runStart[e+2],this.runLength[e+1]=this.runLength[e+2]),this.stackSize--;let u=W_(n[s],n,o,i,0,r);o+=u,i-=u,i!==0&&(a=B_(n[o+i-1],n,s,a,a-1,r),a!==0&&(i<=a?this.mergeLow(o,i,s,a):this.mergeHigh(o,i,s,a)))}mergeLow(e,r,n,o){let{compare:i}=this,{array:s}=this,{tmp:a}=this,{tmpIndex:u}=this,f=0;for(f=0;f<r;f++)a[f]=s[e+f],u[f]=X[e+f];let p=0,x=n,m=e;if(s[m]=s[x],X[m]=X[x],m++,x++,--o===0){for(f=0;f<r;f++)s[m+f]=a[p+f],X[m+f]=u[p+f];return}if(r===1){for(f=0;f<o;f++)s[m+f]=s[x+f],X[m+f]=X[x+f];s[m+o]=a[p],X[m+o]=u[p];return}let{minGallop:c}=this;for(;;){let l=0,h=0,g=!1;do if(i(s[x],a[p])<0){if(s[m]=s[x],X[m]=X[x],m++,x++,h++,l=0,--o===0){g=!0;break}}else if(s[m]=a[p],X[m]=u[p],m++,p++,l++,h=0,--r===1){g=!0;break}while((l|h)<c);if(g)break;do{if(l=W_(s[x],a,p,r,0,i),l!==0){for(f=0;f<l;f++)s[m+f]=a[p+f],X[m+f]=u[p+f];if(m+=l,p+=l,r-=l,r<=1){g=!0;break}}if(s[m]=s[x],X[m]=X[x],m++,x++,--o===0){g=!0;break}if(h=B_(a[p],s,x,o,0,i),h!==0){for(f=0;f<h;f++)s[m+f]=s[x+f],X[m+f]=X[x+f];if(m+=h,x+=h,o-=h,o===0){g=!0;break}}if(s[m]=a[p],X[m]=u[p],m++,p++,--r===1){g=!0;break}c--}while(l>=7||h>=7);if(g)break;c<0&&(c=0),c+=2}if(this.minGallop=c,c<1&&(this.minGallop=1),r===1){for(f=0;f<o;f++)s[m+f]=s[x+f],X[m+f]=X[x+f];s[m+o]=a[p],X[m+o]=u[p]}else{if(r===0)throw new Error("mergeLow preconditions were not respected");for(f=0;f<r;f++)s[m+f]=a[p+f],X[m+f]=u[p+f]}}mergeHigh(e,r,n,o){let{compare:i}=this,{array:s}=this,{tmp:a}=this,{tmpIndex:u}=this,f=0;for(f=0;f<o;f++)a[f]=s[n+f],u[f]=X[n+f];let p=e+r-1,x=o-1,m=n+o-1,c=0,l=0;if(s[m]=s[p],X[m]=X[p],m--,p--,--r===0){for(c=m-(o-1),f=0;f<o;f++)s[c+f]=a[f],X[c+f]=u[f];return}if(o===1){for(m-=r,p-=r,l=m+1,c=p+1,f=r-1;f>=0;f--)s[l+f]=s[c+f],X[l+f]=X[c+f];s[m]=a[x],X[m]=u[x];return}let{minGallop:h}=this;for(;;){let g=0,y=0,S=!1;do if(i(a[x],s[p])<0){if(s[m]=s[p],X[m]=X[p],m--,p--,g++,y=0,--r===0){S=!0;break}}else if(s[m]=a[x],X[m]=u[x],m--,x--,y++,g=0,--o===1){S=!0;break}while((g|y)<h);if(S)break;do{if(g=r-W_(a[x],s,e,r,r-1,i),g!==0){for(m-=g,p-=g,r-=g,l=m+1,c=p+1,f=g-1;f>=0;f--)s[l+f]=s[c+f],X[l+f]=X[c+f];if(r===0){S=!0;break}}if(s[m]=a[x],X[m]=u[x],m--,x--,--o===1){S=!0;break}if(y=o-B_(s[p],a,0,o,o-1,i),y!==0){for(m-=y,x-=y,o-=y,l=m+1,c=x+1,f=0;f<y;f++)s[l+f]=a[c+f],X[l+f]=u[c+f];if(o<=1){S=!0;break}}if(s[m]=s[p],X[m]=X[p],m--,p--,--r===0){S=!0;break}h--}while(g>=7||y>=7);if(S)break;h<0&&(h=0),h+=2}if(this.minGallop=h,h<1&&(this.minGallop=1),o===1){for(m-=r,p-=r,l=m+1,c=p+1,f=r-1;f>=0;f--)s[l+f]=s[c+f],X[l+f]=X[c+f];s[m]=a[x],X[m]=u[x]}else{if(o===0)throw new Error("mergeHigh preconditions were not respected");for(c=m-(o-1),f=0;f<o;f++)s[c+f]=a[f],X[c+f]=u[f]}}};function VY(t,e,r,n){if(!Array.isArray(t))throw new TypeError(`The "array" argument must be an array. Received ${t}`);X=[];let{length:o}=t,i=0;for(;i<o;)X[i]=i++;e?typeof e!="function"&&(n=r,r=e,e=_H):e=_H,r||(r=0),n||(n=o);let s=n-r;if(s<2)return X;let a=0;if(s<32)return a=OH(t,r,n,e),DH(t,r,n,r+a,e),X;let u=new H_(t,e),f=JY(s);do{if(a=OH(t,r,n,e),a<f){let p=s;p>f&&(p=f),DH(t,r,r+p,r+a,e),a=p}u.pushRun(r,a),u.mergeRuns(),s-=a,r+=a}while(s!==0);return u.forceMergeRuns(),X}wH.exports={sort:VY}});var MH=pt((vbe,RH)=>{"use strict";var KY=Object.prototype.hasOwnProperty;RH.exports=(t,e)=>KY.call(t,e)});var Yf=pt((_be,qH)=>{"use strict";var q_=MH(),{isObject:TH,isArray:QY,isString:XY,isNumber:$Y}=ME(),j_="before",PH="after-prop",NH="after-colon",LH="after-value",BH="after",WH="before-all",HH="after-all",YY="[",ZY="]",eZ="{",tZ="}",rZ=",",nZ="",oZ="-",G_=[j_,PH,NH,LH,BH],iZ=[j_,WH,HH].map(Symbol.for),UH=":",IH=void 0,$f=(t,e)=>Symbol.for(t+UH+e),TE=(t,e,r)=>Object.defineProperty(t,e,{value:r,writable:!0,configurable:!0}),z_=(t,e,r,n,o,i)=>{let s=$f(o,n);if(!q_(e,s))return;let a=r===n?s:$f(o,r);TE(t,a,e[s]),i&&delete e[s]},zH=(t,e,r,n,o)=>{G_.forEach(i=>{z_(t,e,r,n,i,o)})},sZ=(t,e,r)=>{e!==r&&G_.forEach(n=>{let o=$f(n,r);if(!q_(t,o)){z_(t,t,r,e,n,!0);return}let i=t[o];delete t[o],z_(t,t,r,e,n,!0),TE(t,$f(n,e),i)})},U_=(t,e)=>{iZ.forEach(r=>{let n=e[r];n&&TE(t,r,n)})},aZ=(t,e,r)=>(r.forEach(n=>{!XY(n)&&!$Y(n)||q_(e,n)&&(t[n]=e[n],zH(t,e,n,n))}),t);qH.exports={SYMBOL_PREFIXES:G_,PREFIX_BEFORE:j_,PREFIX_AFTER_PROP:PH,PREFIX_AFTER_COLON:NH,PREFIX_AFTER_VALUE:LH,PREFIX_AFTER:BH,PREFIX_BEFORE_ALL:WH,PREFIX_AFTER_ALL:HH,BRACKET_OPEN:YY,BRACKET_CLOSE:ZY,CURLY_BRACKET_OPEN:eZ,CURLY_BRACKET_CLOSE:tZ,COLON:UH,COMMA:rZ,MINUS:oZ,EMPTY:nZ,UNDEFINED:IH,symbol:$f,define:TE,copy_comments:zH,swap_comments:sZ,assign_non_prop_comments:U_,assign(t,e,r){if(!TH(t))throw new TypeError("Cannot convert undefined or null to object");if(!TH(e))return t;if(r===IH)r=Object.keys(e),U_(t,e);else if(QY(r))r.length===0&&U_(t,e);else throw new TypeError("keys must be array or undefined");return aZ(t,e,r)}}});var V_=pt((Obe,KH)=>{"use strict";var{isArray:cZ}=ME(),{sort:uZ}=AH(),{SYMBOL_PREFIXES:lZ,UNDEFINED:jH,symbol:pZ,copy_comments:fZ,swap_comments:VH}=Yf(),hZ=t=>{let{length:e}=t,r=0,n=e/2;for(;r<n;r++)VH(t,r,e-r-1)},GH=(t,e,r,n,o)=>{fZ(t,e,r+n,r,o)},vl=(t,e,r,n,o,i)=>{if(o>0){let a=n;for(;a-- >0;)GH(t,e,r+a,o,i);return}let s=0;for(;s<n;){let a=s++;GH(t,e,r+a,o,i)}},JH=(t,e)=>{lZ.forEach(r=>{let n=pZ(r,e);delete t[n]})},mZ=(t,e)=>{let r=e;for(;r in t;)r=t[r];return r},J_=class t extends Array{splice(...e){let{length:r}=this,n=super.splice(...e),[o,i,...s]=e;o<0&&(o+=r),arguments.length===1?i=r-o:i=Math.min(r-o,i);let{length:a}=s,u=a-i,f=o+i,p=r-f;return vl(this,this,f,p,u,!0),n}slice(...e){let{length:r}=this,n=super.slice(...e);if(!n.length)return new t;let[o,i]=e;return i===jH?i=r:i<0&&(i+=r),o<0?o+=r:o===jH&&(o=0),vl(n,this,o,i-o,-o),n}unshift(...e){let{length:r}=this,n=super.unshift(...e),{length:o}=e;return o>0&&vl(this,this,0,r,o,!0),n}shift(){let e=super.shift(),{length:r}=this;return JH(this,0),vl(this,this,1,r,-1,!0),e}reverse(){return super.reverse(),hZ(this),this}pop(){let e=super.pop();return JH(this,this.length),e}concat(...e){let{length:r}=this,n=super.concat(...e);return e.length&&(vl(n,this,0,this.length,0),e.forEach(o=>{let i=r;r+=cZ(o)?o.length:1,o instanceof t&&vl(n,o,0,o.length,i)})),n}sort(...e){let r=uZ(this,...e.slice(0,1)),n=Object.create(null);return r.forEach((o,i)=>{if(o===i)return;let s=mZ(n,o);s!==i&&(n[i]=s,VH(this,i,s))}),this}};KH.exports={CommentArray:J_}});var p3=pt((Fbe,l3)=>{"use strict";var dZ=bH(),{CommentArray:xZ}=V_(),{PREFIX_BEFORE:PE,PREFIX_AFTER_PROP:gZ,PREFIX_AFTER_COLON:EZ,PREFIX_AFTER_VALUE:YH,PREFIX_AFTER:Q_,PREFIX_BEFORE_ALL:yZ,PREFIX_AFTER_ALL:SZ,BRACKET_OPEN:CZ,BRACKET_CLOSE:QH,CURLY_BRACKET_OPEN:bZ,CURLY_BRACKET_CLOSE:XH,COLON:ZH,COMMA:e3,MINUS:$H,EMPTY:kZ,UNDEFINED:BE,define:X_,assign_non_prop_comments:vZ}=Yf(),t3=t=>dZ.tokenize(t,{comment:!0,loc:!0}),$_=[],Ts=null,Fo=null,Y_=[],Is,r3=!1,n3=!1,Zf=null,eh=null,er=null,o3,NE=null,i3=()=>{Y_.length=$_.length=0,eh=null,Is=BE},_Z=()=>{i3(),Zf.length=0,Fo=Ts=Zf=eh=er=NE=null},Z_=t=>Symbol.for(Is!==BE?t+ZH+Is:t),eO=(t,e)=>NE?NE(t,e):e,s3=()=>{let t=new SyntaxError(`Unexpected token ${er.value.slice(0,1)}`);throw Object.assign(t,er.loc.start),t},a3=()=>{let t=new SyntaxError("Unexpected end of JSON input");throw Object.assign(t,eh?eh.loc.end:{line:1,column:0}),t},Sn=()=>{let t=Zf[++o3];n3=er&&t&&er.loc.end.line===t.loc.start.line||!1,eh=er,er=t},K_=()=>(er||a3(),er.type==="Punctuator"?er.value:er.type),Ec=t=>K_()===t,IE=t=>{Ec(t)||s3()},tO=t=>{$_.push(Ts),Ts=t},rO=()=>{Ts=$_.pop()},c3=()=>{if(!Fo)return;let t=[];for(let r of Fo)if(r.inline)t.push(r);else break;let{length:e}=t;e&&(e===Fo.length?Fo=null:Fo.splice(0,e),X_(Ts,Z_(Q_),t))},Ms=t=>{Fo&&(X_(Ts,Z_(t),Fo),Fo=null)},Do=t=>{let e=[];for(;er&&(Ec("LineComment")||Ec("BlockComment"));){let r={...er,inline:n3};e.push(r),Sn()}if(!r3&&e.length){if(t){X_(Ts,Z_(t),e);return}Fo=e}},LE=(t,e)=>{e&&Y_.push(Is),Is=t},u3=()=>{Is=Y_.pop()},OZ=()=>{let t={};tO(t),LE(BE,!0);let e=!1,r;for(Do();!Ec(XH)&&!(e&&(Ms(YH),IE(e3),Sn(),Do(),c3(),Ec(XH)));)e=!0,IE("String"),r=JSON.parse(er.value),LE(r),Ms(PE),Sn(),Do(gZ),IE(ZH),Sn(),Do(EZ),t[r]=eO(r,nO()),Do();return e&&Ms(Q_),Sn(),Is=void 0,e||Ms(PE),rO(),u3(),t},FZ=()=>{let t=new xZ;tO(t),LE(BE,!0);let e=!1,r=0;for(Do();!Ec(QH)&&!(e&&(Ms(YH),IE(e3),Sn(),Do(),c3(),Ec(QH)));)e=!0,LE(r),Ms(PE),t[r]=eO(r,nO()),r++,Do();return e&&Ms(Q_),Sn(),Is=void 0,e||Ms(PE),rO(),u3(),t};function nO(){let t=K_();if(t===bZ)return Sn(),OZ();if(t===CZ)return Sn(),FZ();let e=kZ;t===$H&&(Sn(),t=K_(),e=$H);let r;switch(t){case"String":case"Boolean":case"Null":case"Numeric":return r=er.value,Sn(),JSON.parse(e+r);default:}}var DZ=t=>Object(t)===t,wZ=(t,e,r)=>{i3(),Zf=t3(t),NE=e,r3=r,Zf.length||a3(),o3=-1,Sn(),tO({}),Do(yZ);let n=nO();return Do(SZ),er&&s3(),!r&&n!==null&&(DZ(n)||(n=new Object(n)),vZ(n,Ts)),rO(),n=eO("",n),_Z(),n};l3.exports={parse:wZ,tokenize:t3}});var h3=pt((Dbe,f3)=>{"use strict";var _i="",oO;f3.exports=AZ;function AZ(t,e){if(typeof t!="string")throw new TypeError("expected a string");if(e===1)return t;if(e===2)return t+t;var r=t.length*e;if(oO!==t||typeof oO>"u")oO=t,_i="";else if(_i.length>=r)return _i.substr(0,r);for(;r>_i.length&&e>1;)e&1&&(_i+=t),e>>=1,t+=t;return _i+=t,_i=_i.substr(0,r),_i}});var v3=pt((wbe,k3)=>{"use strict";var{isArray:aO,isObject:m3,isFunction:sO,isNumber:RZ,isString:MZ}=ME(),TZ=h3(),{PREFIX_BEFORE_ALL:IZ,PREFIX_BEFORE:d3,PREFIX_AFTER_PROP:PZ,PREFIX_AFTER_COLON:NZ,PREFIX_AFTER_VALUE:LZ,PREFIX_AFTER:cO,PREFIX_AFTER_ALL:BZ,BRACKET_OPEN:WZ,BRACKET_CLOSE:HZ,CURLY_BRACKET_OPEN:UZ,CURLY_BRACKET_CLOSE:zZ,COLON:qZ,COMMA:x3,EMPTY:Yr,UNDEFINED:jZ}=Yf(),iO=/[\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,uO=" ",yc=`
`,g3="null",E3=t=>`${d3}:${t}`,GZ=t=>`${PZ}:${t}`,JZ=t=>`${NZ}:${t}`,y3=t=>`${LZ}:${t}`,S3=t=>`${cO}:${t}`,VZ={"\b":"\\b","	":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},KZ=t=>(iO.lastIndex=0,iO.test(t)?t.replace(iO,e=>{let r=VZ[e];return typeof r=="string"?r:e}):t),C3=t=>`"${KZ(t)}"`,QZ=(t,e)=>e?`//${t}`:`/*${t}*/`,$r=(t,e,r,n)=>{let o=t[Symbol.for(e)];if(!o||!o.length)return Yr;let i=!1,s=o.reduce((a,{inline:u,type:f,value:p})=>{let x=u?uO:yc+r;return i=f==="LineComment",a+x+QZ(p,i)},Yr);return n||i?s+yc+r:s},_l=null,rh=Yr,XZ=()=>{_l=null,rh=Yr},th=(t,e,r)=>t?e?t+e.trim()+yc+r:t.trimRight()+yc+r:e?e.trimRight()+yc+r:Yr,b3=(t,e,r)=>{let n=$r(e,d3,r+rh,!0);return th(n,t,r)},$Z=(t,e)=>{let r=e+rh,{length:n}=t,o=Yr,i=Yr;for(let s=0;s<n;s++){s!==0&&(o+=x3);let a=th(i,$r(t,E3(s),r),r);o+=a||yc+r,o+=lO(s,t,r)||g3,o+=$r(t,y3(s),r),i=$r(t,S3(s),r)}return o+=th(i,$r(t,cO,r),r),WZ+b3(o,t,e)+HZ},YZ=(t,e)=>{if(!t)return"null";let r=e+rh,n=Yr,o=Yr,i=!0,s=aO(_l)?_l:Object.keys(t),a=u=>{let f=lO(u,t,r);if(f===jZ)return;i||(n+=x3),i=!1;let p=th(o,$r(t,E3(u),r),r);n+=p||yc+r,n+=C3(u)+$r(t,GZ(u),r)+qZ+$r(t,JZ(u),r)+uO+f+$r(t,y3(u),r),o=$r(t,S3(u),r)};return s.forEach(a),n+=th(o,$r(t,cO,r),r),UZ+b3(n,t,e)+zZ};function lO(t,e,r){let n=e[t];switch(m3(n)&&sO(n.toJSON)&&(n=n.toJSON(t)),sO(_l)&&(n=_l.call(e,t,n)),typeof n){case"string":return C3(n);case"number":return Number.isFinite(n)?String(n):g3;case"boolean":case"null":return String(n);case"object":return aO(n)?$Z(n,r):YZ(n,r);default:}}var ZZ=t=>MZ(t)?t:RZ(t)?TZ(uO,t):Yr,{toString:eee}=Object.prototype,tee=["[object Number]","[object String]","[object Boolean]"],ree=t=>{if(typeof t!="object")return!1;let e=eee.call(t);return tee.includes(e)};k3.exports=(t,e,r)=>{let n=ZZ(r);if(!n)return JSON.stringify(t,e);!sO(e)&&!aO(e)&&(e=null),_l=e,rh=n;let o=ree(t)?JSON.stringify(t):lO("",{"":t},Yr);return XZ(),m3(t)?$r(t,IZ,Yr).trimLeft()+o+$r(t,BZ,Yr).trimRight():o}});var pO=pt((Abe,_3)=>{"use strict";var{parse:nee,tokenize:oee}=p3(),iee=v3(),{CommentArray:see}=V_(),{assign:aee}=Yf();_3.exports={parse:nee,stringify:iee,tokenize:oee,CommentArray:see,assign:aee}});var kc=t=>typeof t=="function",d=function(t,e){if(typeof t=="function")return function(){return t(arguments)?e.apply(this,arguments):r=>e(r,...arguments)};switch(t){case 0:case 1:throw new RangeError(`Invalid arity ${t}`);case 2:return function(r,n){return arguments.length>=2?e(r,n):function(o){return e(o,r)}};case 3:return function(r,n,o){return arguments.length>=3?e(r,n,o):function(i){return e(i,r,n)}};case 4:return function(r,n,o,i){return arguments.length>=4?e(r,n,o,i):function(s){return e(s,r,n,o)}};case 5:return function(r,n,o,i,s){return arguments.length>=5?e(r,n,o,i,s):function(a){return e(a,r,n,o,i)}};default:return function(){if(arguments.length>=t)return e.apply(this,arguments);let r=arguments;return function(n){return e(n,...r)}}}};var B=t=>t;var vc=t=>()=>t,Cn=vc(!0),en=vc(!1),$E=vc(null),sh=vc(void 0),tn=sh;function E(t,e,r,n,o,i,s,a,u){switch(arguments.length){case 1:return t;case 2:return e(t);case 3:return r(e(t));case 4:return n(r(e(t)));case 5:return o(n(r(e(t))));case 6:return i(o(n(r(e(t)))));case 7:return s(i(o(n(r(e(t))))));case 8:return a(s(i(o(n(r(e(t)))))));case 9:return u(a(s(i(o(n(r(e(t))))))));default:{let f=arguments[0];for(let p=1;p<arguments.length;p++)f=arguments[p](f);return f}}}var _c=t=>(e,r)=>e===r||t(e,r);var RO=d(2,(t,e)=>_c((r,n)=>t(e(r),e(n))));var MO=t=>_c((e,r)=>{if(e.length!==r.length)return!1;for(let n=0;n<e.length;n++)if(!t(e[n],r[n]))return!1;return!0});var ah=t=>d(3,(e,r,n)=>t(e,o=>Object.assign({},o,{[r]:n(o)}))),ch=t=>d(2,(e,r)=>t(e,n=>({[r]:n}))),uh=(t,e)=>d(3,(r,n,o)=>e(r,i=>t(o(i),s=>Object.assign({},i,{[n]:s}))));var Fz="3.11.7",Ls=()=>Fz;var ey=Symbol.for(`effect/GlobalValue/globalStoreId/${Ls()}`);ey in globalThis||(globalThis[ey]=new Map);var ZE=globalThis[ey],J=(t,e)=>(ZE.has(t)||ZE.set(t,e()),ZE.get(t));var Oc=t=>typeof t=="string",Bs=t=>typeof t=="number",IO=t=>typeof t=="boolean",lh=t=>typeof t=="bigint",PO=t=>typeof t=="symbol",wi=kc,NO=t=>t===void 0;var LO=t=>t===null;var BO=t=>typeof t=="object"&&t!==null,Ai=t=>BO(t)||wi(t),T=d(2,(t,e)=>Ai(t)&&e in t),Ri=d(2,(t,e)=>T(t,"_tag")&&t._tag===e),Ws=t=>t==null;var WO=t=>t instanceof Date,rn=t=>T(t,Symbol.iterator),HO=t=>BO(t)&&!Array.isArray(t);var ty=t=>T(t,"then")&&wi(t.then);var Hs=t=>`BUG: ${t} - please report an issue at https://github.com/Effect-TS/effect/issues`;var ry=Symbol.for("effect/Gen/GenKind"),iy=t=>Ai(t)&&ry in t,ny=class{value;constructor(e){this.value=e}get _F(){return B}get _R(){return e=>e}get _O(){return e=>e}get _E(){return e=>e}[ry]=ry;[Symbol.iterator](){return new Us(this)}},Us=class t{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new t(this.self)}};var zO=()=>function(){let t=arguments[0];for(let e=1;e<arguments.length;e++)t=arguments[e](t);return new ny(t)},wz=335903614,Az=4150755663,Rz=1481765933,Mz=1284865837,Tz=9007199254740992,Iz=134217728,ph=class{_state;constructor(e,r,n,o){return Ws(r)&&Ws(e)?(r=Math.random()*4294967295>>>0,e=0):Ws(r)&&(r=e,e=0),Ws(o)&&Ws(n)?(o=this._state?this._state[3]:Az,n=this._state?this._state[2]:wz):Ws(o)&&(o=n,n=0),this._state=new Int32Array([0,0,n>>>0,((o||0)|1)>>>0]),this._next(),UO(this._state,this._state[0],this._state[1],e>>>0,r>>>0),this._next(),this}getState(){return[this._state[0],this._state[1],this._state[2],this._state[3]]}setState(e){this._state[0]=e[0],this._state[1]=e[1],this._state[2]=e[2],this._state[3]=e[3]|1}integer(e){return Math.round(this.number()*Number.MAX_SAFE_INTEGER)%e}number(){let e=(this._next()&67108863)*1,r=(this._next()&134217727)*1;return(e*Iz+r)/Tz}_next(){let e=this._state[0]>>>0,r=this._state[1]>>>0;Pz(this._state,e,r,Rz,Mz),UO(this._state,this._state[0],this._state[1],this._state[2],this._state[3]);let n=e>>>18,o=(r>>>18|e<<14)>>>0;n=(n^e)>>>0,o=(o^r)>>>0;let i=(o>>>27|n<<5)>>>0,s=e>>>27,a=(-s>>>0&31)>>>0;return(i>>>s|i<<a)>>>0}};function Pz(t,e,r,n,o){let i=(r>>>16)*(o&65535)>>>0,s=(r&65535)*(o>>>16)>>>0,a=(r&65535)*(o&65535)>>>0,u=(r>>>16)*(o>>>16)+((s>>>16)+(i>>>16))>>>0;s=s<<16>>>0,a=a+s>>>0,a>>>0<s>>>0&&(u=u+1>>>0),i=i<<16>>>0,a=a+i>>>0,a>>>0<i>>>0&&(u=u+1>>>0),u=u+Math.imul(r,n)>>>0,u=u+Math.imul(e,o)>>>0,t[0]=u,t[1]=a}function UO(t,e,r,n,o){let i=e+n>>>0,s=r+o>>>0;s>>>0<r>>>0&&(i=i+1|0),t[0]=i,t[1]=s}var oy=Symbol.for("effect/Utils/YieldWrap"),Wn=class{#e;constructor(e){this.#e=e}[oy](){return this.#e}};function Fc(t){if(typeof t=="object"&&t!==null&&oy in t)return t[oy]();throw new Error(Hs("yieldWrapGet"))}var hr=J("effect/Utils/isStructuralRegion",()=>({enabled:!1,tester:void 0}));var Nz=t=>{let e={[t](r){return r()}};return function(r){return e[t](r)}},rt=Nz("effect_internal_function"),Lz=function*(){}.constructor,qO=t=>Ai(t)&&t.constructor===Lz;var ay=J(Symbol.for("effect/Hash/randomHashCache"),()=>new WeakMap),H=Symbol.for("effect/Hash"),L=t=>{if(hr.enabled===!0)return 0;switch(typeof t){case"number":return hh(t);case"bigint":return ye(t.toString(10));case"boolean":return ye(String(t));case"symbol":return ye(String(t));case"string":return ye(t);case"undefined":return ye("undefined");case"function":case"object":return t===null?ye("null"):t instanceof Date?L(t.toISOString()):Bz(t)?t[H]():Dc(t);default:throw new Error(`BUG: unhandled typeof ${typeof t} - please report an issue at https://github.com/Effect-TS/effect/issues`)}},Dc=t=>(ay.has(t)||ay.set(t,hh(Math.floor(Math.random()*Number.MAX_SAFE_INTEGER))),ay.get(t)),G=t=>e=>e*53^t,fh=t=>t&3221225471|t>>>1&1073741824,Bz=t=>T(t,H),hh=t=>{if(t!==t||t===1/0)return 0;let e=t|0;for(e!==t&&(e^=t*4294967295);t>4294967295;)e^=t/=4294967295;return fh(e)},ye=t=>{let e=5381,r=t.length;for(;r;)e=e*33^t.charCodeAt(--r);return fh(e)},Wz=(t,e)=>{let r=12289;for(let n=0;n<e.length;n++)r^=E(ye(e[n]),G(L(t[e[n]])));return fh(r)},mh=t=>Wz(t,Object.keys(t)),mr=t=>{let e=6151;for(let r=0;r<t.length;r++)e=E(e,G(L(t[r])));return fh(e)},re=function(){if(arguments.length===1){let r=arguments[0];return function(n){return Object.defineProperty(r,H,{value(){return n},enumerable:!1}),n}}let t=arguments[0],e=arguments[1];return Object.defineProperty(t,H,{value(){return e},enumerable:!1}),e};var W=Symbol.for("effect/Equal");function I(){return arguments.length===1?t=>dh(t,arguments[0]):dh(arguments[0],arguments[1])}function dh(t,e){if(t===e)return!0;let r=typeof t;if(r!==typeof e)return!1;if(r==="object"||r==="function"){if(t!==null&&e!==null){if(wc(t)&&wc(e))return L(t)===L(e)&&t[W](e)?!0:hr.enabled&&hr.tester?hr.tester(t,e):!1;if(t instanceof Date&&e instanceof Date)return t.toISOString()===e.toISOString()}if(hr.enabled){if(Array.isArray(t)&&Array.isArray(e))return t.length===e.length&&t.every((n,o)=>dh(n,e[o]));if(Object.getPrototypeOf(t)===Object.prototype&&Object.getPrototypeOf(t)===Object.prototype){let n=Object.keys(t),o=Object.keys(e);if(n.length===o.length){for(let i of n)if(!(i in e&&dh(t[i],e[i])))return hr.tester?hr.tester(t,e):!1;return!0}}return hr.tester?hr.tester(t,e):!1}}return hr.enabled&&hr.tester?hr.tester(t,e):!1}var wc=t=>T(t,W),Rl=()=>I;var ee=Symbol.for("nodejs.util.inspect.custom"),ue=t=>{try{if(T(t,"toJSON")&&wi(t.toJSON)&&t.toJSON.length===0)return t.toJSON();if(Array.isArray(t))return t.map(ue)}catch{return{}}return Ac(t)},le=t=>JSON.stringify(t,null,2),qs={toJSON(){return ue(this)},[ee](){return this.toJSON()},toString(){return le(this.toJSON())}},xh=class{[ee](){return this.toJSON()}toString(){return le(this.toJSON())}},Mo=(t,e=2)=>{if(typeof t=="string")return t;try{return typeof t=="object"?gh(t,e):String(t)}catch{return String(t)}},gh=(t,e)=>{let r=[],n=JSON.stringify(t,(o,i)=>typeof i=="object"&&i!==null?r.includes(i)?void 0:r.push(i)&&(zs.fiberRefs!==void 0&&jO(i)?i[Ml](zs.fiberRefs):i):i,e);return r=void 0,n},Ml=Symbol.for("effect/Inspectable/Redactable"),jO=t=>typeof t=="object"&&t!==null&&Ml in t,zs=J("effect/Inspectable/redactableState",()=>({fiberRefs:void 0})),GO=(t,e)=>{let r=zs.fiberRefs;zs.fiberRefs=t;try{return e()}finally{zs.fiberRefs=r}},Ac=t=>jO(t)&&zs.fiberRefs!==void 0?t[Ml](zs.fiberRefs):t;var R=(t,e)=>{switch(e.length){case 0:return t;case 1:return e[0](t);case 2:return e[1](e[0](t));case 3:return e[2](e[1](e[0](t)));case 4:return e[3](e[2](e[1](e[0](t))));case 5:return e[4](e[3](e[2](e[1](e[0](t)))));case 6:return e[5](e[4](e[3](e[2](e[1](e[0](t))))));case 7:return e[6](e[5](e[4](e[3](e[2](e[1](e[0](t)))))));case 8:return e[7](e[6](e[5](e[4](e[3](e[2](e[1](e[0](t))))))));case 9:return e[8](e[7](e[6](e[5](e[4](e[3](e[2](e[1](e[0](t)))))))));default:{let r=t;for(let n=0,o=e.length;n<o;n++)r=e[n](r);return r}}};var js="Async",Gs="Commit",nt="Failure",Rc="OnFailure",Mc="OnSuccess",Tc="OnSuccessAndFailure",ot="Success",Eh="Sync",JO="Tag",To="UpdateRuntimeFlags",Ic="While",Js="Iterator",yh="WithRuntime",Pc="Yield",Tl="RevertFlags";var VO=Symbol.for("effect/Effect"),KO=Symbol.for("effect/Stream"),QO=Symbol.for("effect/Sink"),XO=Symbol.for("effect/Channel"),Mi={_R:t=>t,_E:t=>t,_A:t=>t,_V:Ls()},Uz={_A:t=>t,_In:t=>t,_L:t=>t,_E:t=>t,_R:t=>t},zz={_Env:t=>t,_InErr:t=>t,_InElem:t=>t,_InDone:t=>t,_OutErr:t=>t,_OutElem:t=>t,_OutDone:t=>t},Io={[VO]:Mi,[KO]:Mi,[QO]:Uz,[XO]:zz,[W](t){return this===t},[H](){return re(this,Dc(this))},[Symbol.iterator](){return new Us(new Wn(this))},pipe(){return R(this,arguments)}},Ti={[H](){return re(this,mh(this))},[W](t){let e=Object.keys(this),r=Object.keys(t);if(e.length!==r.length)return!1;for(let n of e)if(!(n in t&&I(this[n],t[n])))return!1;return!0}},Po={...Io,_op:Gs},cy={...Po,...Ti},$O=function(){function t(){}return t.prototype=Po,t}();var ZO=Symbol.for("effect/Option"),eF={...Io,[ZO]:{_A:t=>t},[ee](){return this.toJSON()},toString(){return le(this.toJSON())}},qz=Object.assign(Object.create(eF),{_tag:"Some",_op:"Some",[W](t){return Sh(t)&&uy(t)&&I(this.value,t.value)},[H](){return re(this,G(L(this._tag))(L(this.value)))},toJSON(){return{_id:"Option",_tag:this._tag,value:ue(this.value)}}}),jz=L("None"),Gz=Object.assign(Object.create(eF),{_tag:"None",_op:"None",[W](t){return Sh(t)&&Ch(t)},[H](){return jz},toJSON(){return{_id:"Option",_tag:this._tag}}}),Sh=t=>T(t,ZO),Ch=t=>t._tag==="None",uy=t=>t._tag==="Some",Ii=Object.create(Gz),No=t=>{let e=Object.create(qz);return e.value=t,e};var py=Symbol.for("effect/Either"),tF={...Io,[py]:{_R:t=>t},[ee](){return this.toJSON()},toString(){return le(this.toJSON())}},Jz=Object.assign(Object.create(tF),{_tag:"Right",_op:"Right",[W](t){return bh(t)&&kh(t)&&I(this.right,t.right)},[H](){return G(L(this._tag))(L(this.right))},toJSON(){return{_id:"Either",_tag:this._tag,right:ue(this.right)}}}),Vz=Object.assign(Object.create(tF),{_tag:"Left",_op:"Left",[W](t){return bh(t)&&Nc(t)&&I(this.left,t.left)},[H](){return G(L(this._tag))(L(this.left))},toJSON(){return{_id:"Either",_tag:this._tag,left:ue(this.left)}}}),bh=t=>T(t,py),Nc=t=>t._tag==="Left",kh=t=>t._tag==="Right",vh=t=>{let e=Object.create(Vz);return e.left=t,e},_h=t=>{let e=Object.create(Jz);return e.right=t,e},fy=t=>kh(t)?Ii:No(t.left),hy=t=>Nc(t)?Ii:No(t.right);var be=_h,Pe=vh;var Oh=bh,Lo=Nc,Vs=kh;var Et=d(2,(t,{onLeft:e,onRight:r})=>Lo(t)?e(t.left):r(t.right));var Fh=Et({onLeft:B,onRight:B});var my=t=>t.length>0;var se={};Di(se,{Do:()=>Fq,TypeId:()=>Qz,all:()=>pF,andThen:()=>aq,ap:()=>mq,as:()=>cF,asVoid:()=>iq,bind:()=>Oq,bindTo:()=>vq,composeK:()=>pq,contains:()=>Ey,containsWith:()=>mF,exists:()=>kq,filter:()=>gq,filterMap:()=>hF,firstSomeOf:()=>tq,flatMap:()=>Nr,flatMapNullable:()=>cq,flatten:()=>uq,fromIterable:()=>$z,fromNullable:()=>ft,gen:()=>wq,getEquivalence:()=>Eq,getLeft:()=>Yz,getOrElse:()=>Ne,getOrNull:()=>nq,getOrThrow:()=>Pl,getOrThrowWith:()=>aF,getOrUndefined:()=>Wt,getOrder:()=>yq,getRight:()=>sF,isNone:()=>Y,isOption:()=>iF,isSome:()=>q,let:()=>_q,lift2:()=>Sq,liftNullable:()=>rq,liftPredicate:()=>Cq,liftThrowable:()=>oq,map:()=>ze,match:()=>Se,none:()=>k,orElse:()=>Zz,orElseEither:()=>eq,orElseSome:()=>xy,partitionMap:()=>xq,product:()=>lF,productMany:()=>hq,reduceCompact:()=>dq,some:()=>b,tap:()=>uF,toArray:()=>fF,toRefinement:()=>Xz,void:()=>sq,zipLeft:()=>fq,zipRight:()=>lq,zipWith:()=>gy});var Dh=t=>(e,r)=>e===r?0:t(e,r);var nF=Dh((t,e)=>t<e?-1:1);var oF=d(2,(t,e)=>Dh((r,n)=>t(e(r),e(n))));var dy=t=>d(2,(e,r)=>t(e,r)===1);var Qz=Symbol.for("effect/Option"),k=()=>Ii,b=No,iF=Sh,Y=Ch,q=uy,Se=d(2,(t,{onNone:e,onSome:r})=>Y(t)?e():r(t.value)),Xz=t=>e=>q(t(e)),$z=t=>{for(let e of t)return b(e);return k()},sF=hy,Yz=fy,Ne=d(2,(t,e)=>Y(t)?e():t.value),Zz=d(2,(t,e)=>Y(t)?e():t),xy=d(2,(t,e)=>Y(t)?b(e()):t),eq=d(2,(t,e)=>Y(t)?ze(e(),_h):ze(t,vh)),tq=t=>{let e=k();for(e of t)if(q(e))return e;return e},ft=t=>t==null?k():b(t),rq=t=>(...e)=>ft(t(...e)),nq=Ne($E),Wt=Ne(sh),oq=t=>(...e)=>{try{return b(t(...e))}catch{return k()}},aF=d(2,(t,e)=>{if(q(t))return t.value;throw e()}),Pl=aF(()=>new Error("getOrThrow called on a None")),ze=d(2,(t,e)=>Y(t)?k():b(e(t.value))),cF=d(2,(t,e)=>ze(t,()=>e)),iq=cF(void 0),sq=b(void 0);var Nr=d(2,(t,e)=>Y(t)?k():e(t.value)),aq=d(2,(t,e)=>Nr(t,r=>{let n=kc(e)?e(r):e;return iF(n)?n:b(n)})),cq=d(2,(t,e)=>Y(t)?k():ft(e(t.value))),uq=Nr(B),lq=d(2,(t,e)=>Nr(t,()=>e)),pq=d(2,(t,e)=>r=>Nr(t(r),e)),fq=d(2,(t,e)=>uF(t,()=>e)),uF=d(2,(t,e)=>Nr(t,r=>ze(e(r),()=>r))),lF=(t,e)=>q(t)&&q(e)?b([t.value,e.value]):k(),hq=(t,e)=>{if(Y(t))return k();let r=[t.value];for(let n of e){if(Y(n))return k();r.push(n.value)}return b(r)},pF=t=>{if(Symbol.iterator in t){let r=[];for(let n of t){if(Y(n))return k();r.push(n.value)}return b(r)}let e={};for(let r of Object.keys(t)){let n=t[r];if(Y(n))return k();e[r]=n.value}return b(e)},gy=d(3,(t,e,r)=>ze(lF(t,e),([n,o])=>r(n,o))),mq=d(2,(t,e)=>gy(t,e,(r,n)=>r(n))),dq=d(3,(t,e,r)=>{let n=e;for(let o of t)q(o)&&(n=r(n,o.value));return n}),fF=t=>Y(t)?[]:[t.value],xq=d(2,(t,e)=>{if(Y(t))return[k(),k()];let r=e(t.value);return Nc(r)?[b(r.left),k()]:[k(),b(r.right)]}),hF=d(2,(t,e)=>Y(t)?k():e(t.value)),gq=d(2,(t,e)=>hF(t,r=>e(r)?No(r):Ii)),Eq=t=>_c((e,r)=>Y(e)?Y(r):Y(r)?!1:t(e.value,r.value)),yq=t=>Dh((e,r)=>q(e)?q(r)?t(e.value,r.value):1:-1),Sq=t=>d(2,(e,r)=>gy(e,r,t)),Cq=d(2,(t,e)=>e(t)?b(t):k()),mF=t=>d(2,(e,r)=>Y(e)?!1:t(e.value,r)),bq=Rl(),Ey=mF(bq),kq=d(2,(t,e)=>Y(t)?!1:e(t.value)),vq=ch(ze),_q=ah(ze);var Oq=uh(ze,Nr),Fq=b({}),Dq=zO(),wq=(...t)=>{let e;t.length===1?e=t[0]:e=t[1].bind(t[0]);let r=e(Dq),n=r.next();if(n.done)return b(n.value);{let o=n.value;if(iy(o)?o=o.value:o=Fc(o),Y(o))return o;for(;!n.done;)if(n=r.next(o.value),!n.done&&(o=n.value,iy(o)?o=o.value:o=Fc(o),Y(o)))return o;return b(n.value)}};var dF=(...t)=>t;var gF=d(2,(t,e)=>{let r={...t};for(let n of Aq(t))r[n]=e(t[n],n);return r});var Aq=t=>Object.keys(t);var Nl=t=>new Array(t),yy=(t,e)=>{let r=Math.max(1,Math.floor(t)),n=new Array(r);for(let o=0;o<r;o++)n[o]=e(o);return n};var ne=t=>Array.isArray(t)?t:Array.from(t),yF=t=>Array.isArray(t)?t:[t];var Lc=d(2,(t,e)=>[e,...t]);var Sy=d(2,(t,e)=>[...t,e]),Ll=d(2,(t,e)=>ne(t).concat(ne(e)));var Rq=Array.isArray,Mq=t=>t.length===0,SF=Mq,CF=my,jt=my;var bF=(t,e)=>t<0||t>=e.length,Tq=(t,e)=>Math.floor(Math.min(Math.max(0,t),e.length)),Iq=d(2,(t,e)=>{let r=Math.floor(e);return bF(r,t)?k():b(t[r])}),Cy=d(2,(t,e)=>{let r=Math.floor(e);if(bF(r,t))throw new Error(`Index ${r} out of bounds`);return t[r]});var Pi=Iq(0),Gt=Cy(0),Ah=t=>jt(t)?b(by(t)):k(),by=t=>t[t.length-1];var Un=t=>t.slice(1);var Pq=(t,e)=>{let r=0;for(let n of t){if(!e(n,r))break;r++}return r},kF=d(2,(t,e)=>_y(t,Pq(t,e))),vF=d(2,(t,e)=>{let r=ne(t);return r.slice(Tq(e,r),r.length)});var ky=t=>Array.from(t).reverse(),Ks=d(2,(t,e)=>{let r=Array.from(t);return r.sort(e),r});var vy=d(2,(t,e)=>_F(t,e,dF)),_F=d(3,(t,e,r)=>{let n=ne(t),o=ne(e);if(jt(n)&&jt(o)){let i=[r(Gt(n),Gt(o))],s=Math.min(n.length,o.length);for(let a=1;a<s;a++)i[a]=r(n[a],o[a]);return i}return[]});var Nq=Rl();var _y=d(2,(t,e)=>{let r=Array.from(t),n=Math.floor(e);return jt(r)?n>=1?Lq(r,n):[[],r]:[r,[]]}),Lq=d(2,(t,e)=>{let r=Math.max(1,Math.floor(e));return r>=t.length?[Bq(t),[]]:[Lc(t.slice(1,r),Gt(t)),t.slice(r)]});var Bq=t=>t.slice();var Wq=d(3,(t,e,r)=>{let n=ne(t),o=ne(e);return jt(n)?jt(o)?DF(r)(Ll(n,o)):n:o}),bn=d(2,(t,e)=>Wq(t,e,Nq));var Lr=()=>[],rr=t=>[t],kn=d(2,(t,e)=>t.map(e)),OF=d(2,(t,e)=>{if(SF(t))return[];let r=[];for(let n=0;n<t.length;n++){let o=e(t[n],n);for(let i=0;i<o.length;i++)r.push(o[i])}return r}),Rh=OF(B),Bc=d(2,(t,e)=>{let r=ne(t),n=[];for(let o=0;o<r.length;o++){let i=e(r[o],o);q(i)&&n.push(i.value)}return n});var Oy=d(2,(t,e)=>{let r=[],n=[],o=ne(t);for(let i=0;i<o.length;i++){let s=e(o[i],i);Lo(s)?r.push(s.left):n.push(s.right)}return[r,n]}),FF=Bc(B);var Mh=d(2,(t,e)=>{let r=ne(t),n=[];for(let o=0;o<r.length;o++)e(r[o],o)&&n.push(r[o]);return n});var xr=d(3,(t,e,r)=>ne(t).reduce((n,o,i)=>r(n,o,i),e)),Th=d(3,(t,e,r)=>ne(t).reduceRight((n,o,i)=>r(n,o,i),e));var Fy=(t,e)=>{let r=[],n=t,o;for(;q(o=e(n));){let[i,s]=o.value;r.push(i),n=s}return r};var Wc=MO;var DF=d(2,(t,e)=>{let r=ne(t);if(jt(r)){let n=[Gt(r)],o=Un(r);for(let i of o)n.every(s=>!e(i,s))&&n.push(i);return n}return[]}),Dy=t=>DF(t,Rl());var Bo=d(2,(t,e)=>ne(t).join(e));var Ni=nF;var wF=t=>t.replace(/[/\\^$*+?.()|[\]{}]/g,"\\$&");var RF=t=>!t;var TF=Symbol.for("effect/Brand/Refined");var IF=()=>Object.assign(t=>t,{[TF]:TF,option:t=>b(t),either:t=>be(t),is:t=>!0});var at={};Di(at,{GenericTag:()=>st,Reference:()=>Wl,Tag:()=>zc,add:()=>Le,empty:()=>Dt,get:()=>wt,getOption:()=>on,getOrElse:()=>$q,isContext:()=>Py,isReference:()=>Xq,isTag:()=>Uc,make:()=>gr,merge:()=>Er,omit:()=>Zq,pick:()=>Yq,unsafeGet:()=>nn,unsafeMake:()=>Qq});var Ay=Symbol.for("effect/Context/Tag"),Bl=Symbol.for("effect/Context/Reference"),qq="effect/STM",jq=Symbol.for(qq),Hc={...Io,_op:"Tag",[jq]:Mi,[Ay]:{_Service:t=>t,_Identifier:t=>t},toString(){return le(this.toJSON())},toJSON(){return{_id:"Tag",key:this.key,stack:this.stack}},[ee](){return this.toJSON()},of(t){return t},context(t){return Ty(this,t)}},Gq={...Hc,[Bl]:Bl},NF=t=>{let e=Error.stackTraceLimit;Error.stackTraceLimit=2;let r=new Error;Error.stackTraceLimit=e;let n=Object.create(Hc);return Object.defineProperty(n,"stack",{get(){return r.stack}}),n.key=t,n},LF=t=>()=>{let e=Error.stackTraceLimit;Error.stackTraceLimit=2;let r=new Error;Error.stackTraceLimit=e;function n(){}return Object.setPrototypeOf(n,Hc),n.key=t,Object.defineProperty(n,"stack",{get(){return r.stack}}),n},BF=()=>(t,e)=>{let r=Error.stackTraceLimit;Error.stackTraceLimit=2;let n=new Error;Error.stackTraceLimit=r;function o(){}return Object.setPrototypeOf(o,Gq),o.key=t,o.defaultValue=e.defaultValue,Object.defineProperty(o,"stack",{get(){return n.stack}}),o},Ry=Symbol.for("effect/Context"),Jq={[Ry]:{_Services:t=>t},[W](t){if(My(t)&&this.unsafeMap.size===t.unsafeMap.size){for(let e of this.unsafeMap.keys())if(!t.unsafeMap.has(e)||!I(this.unsafeMap.get(e),t.unsafeMap.get(e)))return!1;return!0}return!1},[H](){return re(this,hh(this.unsafeMap.size))},pipe(){return R(this,arguments)},toString(){return le(this.toJSON())},toJSON(){return{_id:"Context",services:Array.from(this.unsafeMap).map(ue)}},[ee](){return this.toJSON()}},vn=t=>{let e=Object.create(Jq);return e.unsafeMap=t,e},Vq=t=>{let e=new Error(`Service not found${t.key?`: ${String(t.key)}`:""}`);if(t.stack){let r=t.stack.split(`
`);if(r.length>2){let n=r[2].match(/at (.*)/);n&&(e.message=e.message+` (defined at ${n[1]})`)}}if(e.stack){let r=e.stack.split(`
`);r.splice(1,3),e.stack=r.join(`
`)}return e},My=t=>T(t,Ry),WF=t=>T(t,Ay),Ph=t=>T(t,Bl),Kq=vn(new Map),HF=()=>Kq,Ty=(t,e)=>vn(new Map([[t.key,e]])),UF=d(3,(t,e,r)=>{let n=new Map(t.unsafeMap);return n.set(e.key,r),vn(n)}),wy=J("effect/Context/defaultValueCache",()=>new Map),Nh=t=>{if(wy.has(t.key))return wy.get(t.key);let e=t.defaultValue();return wy.set(t.key,e),e},zF=(t,e)=>t.unsafeMap.has(e.key)?t.unsafeMap.get(e.key):Nh(e),Iy=d(2,(t,e)=>{if(!t.unsafeMap.has(e.key)){if(Bl in e)return Nh(e);throw Vq(e)}return t.unsafeMap.get(e.key)}),qF=Iy,jF=d(3,(t,e,r)=>t.unsafeMap.has(e.key)?t.unsafeMap.get(e.key):Ph(e)?Nh(e):r()),GF=d(2,(t,e)=>t.unsafeMap.has(e.key)?No(t.unsafeMap.get(e.key)):Ph(e)?No(Nh(e)):Ii),JF=d(2,(t,e)=>{let r=new Map(t.unsafeMap);for(let[n,o]of e.unsafeMap)r.set(n,o);return vn(r)}),VF=(...t)=>e=>{let r=new Set(t.map(o=>o.key)),n=new Map;for(let[o,i]of e.unsafeMap.entries())r.has(o)&&n.set(o,i);return vn(n)},KF=(...t)=>e=>{let r=new Map(e.unsafeMap);for(let n of t)r.delete(n.key);return vn(r)};var st=NF;var Qq=vn,Py=My,Uc=WF,Xq=Ph,Dt=HF,gr=Ty,Le=UF,wt=qF,$q=jF,nn=Iy,on=GF,Er=JF,Yq=VF,Zq=KF,zc=LF,Wl=BF;var XF=Symbol.for("effect/Chunk");function rj(t,e,r,n,o){for(let i=e;i<Math.min(t.length,e+o);i++)r[n+i-e]=t[i];return r}var $F=[],nj=t=>_c((e,r)=>e.length===r.length&&yr(e).every((n,o)=>t(n,qn(r,o)))),oj=nj(I),ij={[XF]:{_A:t=>t},toString(){return le(this.toJSON())},toJSON(){return{_id:"Chunk",values:yr(this).map(ue)}},[ee](){return this.toJSON()},[W](t){return Ly(t)&&oj(this,t)},[H](){return re(this,mr(yr(this)))},[Symbol.iterator](){switch(this.backing._tag){case"IArray":return this.backing.array[Symbol.iterator]();case"IEmpty":return $F[Symbol.iterator]();default:return yr(this)[Symbol.iterator]()}},pipe(){return R(this,arguments)}},yt=t=>{let e=Object.create(ij);switch(e.backing=t,t._tag){case"IEmpty":{e.length=0,e.depth=0,e.left=e,e.right=e;break}case"IConcat":{e.length=t.left.length+t.right.length,e.depth=1+Math.max(t.left.depth,t.right.depth),e.left=t.left,e.right=t.right;break}case"IArray":{e.length=t.array.length,e.depth=0,e.left=zn,e.right=zn;break}case"ISingleton":{e.length=1,e.depth=0,e.left=zn,e.right=zn;break}case"ISlice":{e.length=t.length,e.depth=t.chunk.depth+1,e.left=zn,e.right=zn;break}}return e},Ly=t=>T(t,XF),zn=yt({_tag:"IEmpty"}),mt=()=>zn,qc=(...t)=>t.length===1?xe(t[0]):uj(t),xe=t=>yt({_tag:"ISingleton",a:t}),nr=t=>Ly(t)?t:yt({_tag:"IArray",array:ne(t)}),Ny=(t,e,r)=>{switch(t.backing._tag){case"IArray":{rj(t.backing.array,0,e,r,t.length);break}case"IConcat":{Ny(t.left,e,r),Ny(t.right,e,r+t.left.length);break}case"ISingleton":{e[r]=t.backing.a;break}case"ISlice":{let n=0,o=r;for(;n<t.length;)e[o]=qn(t,n),n+=1,o+=1;break}}};var sj=t=>{switch(t.backing._tag){case"IEmpty":return $F;case"IArray":return t.backing.array;default:{let e=new Array(t.length);return Ny(t,e,0),t.backing={_tag:"IArray",array:e},t.left=zn,t.right=zn,t.depth=0,e}}},yr=sj,aj=t=>{switch(t.backing._tag){case"IEmpty":case"ISingleton":return t;case"IArray":return yt({_tag:"IArray",array:ky(t.backing.array)});case"IConcat":return yt({_tag:"IConcat",left:Br(t.backing.right),right:Br(t.backing.left)});case"ISlice":return jn(ky(yr(t)))}},Br=aj,cj=d(2,(t,e)=>e<0||e>=t.length?k():b(qn(t,e))),jn=t=>yt({_tag:"IArray",array:t}),uj=t=>jn(t),qn=d(2,(t,e)=>{switch(t.backing._tag){case"IEmpty":throw new Error("Index out of bounds");case"ISingleton":{if(e!==0)throw new Error("Index out of bounds");return t.backing.a}case"IArray":{if(e>=t.length||e<0)throw new Error("Index out of bounds");return t.backing.array[e]}case"IConcat":return e<t.left.length?qn(t.left,e):qn(t.right,e-t.left.length);case"ISlice":return qn(t.backing.chunk,e+t.backing.offset)}}),Li=d(2,(t,e)=>At(t,xe(e))),Be=d(2,(t,e)=>At(xe(e),t));var Lh=d(2,(t,e)=>{if(e<=0)return t;if(e>=t.length)return zn;switch(t.backing._tag){case"ISlice":return yt({_tag:"ISlice",chunk:t.backing.chunk,offset:t.backing.offset+e,length:t.backing.length-e});case"IConcat":return e>t.left.length?Lh(t.right,e-t.left.length):yt({_tag:"IConcat",left:Lh(t.left,e),right:t.right});default:return yt({_tag:"ISlice",chunk:t,offset:e,length:t.length-e})}});var At=d(2,(t,e)=>{if(t.backing._tag==="IEmpty")return e;if(e.backing._tag==="IEmpty")return t;let r=e.depth-t.depth;if(Math.abs(r)<=1)return yt({_tag:"IConcat",left:t,right:e});if(r<-1)if(t.left.depth>=t.right.depth){let n=At(t.right,e);return yt({_tag:"IConcat",left:t.left,right:n})}else{let n=At(t.right.right,e);if(n.depth===t.depth-3){let o=yt({_tag:"IConcat",left:t.right.left,right:n});return yt({_tag:"IConcat",left:t.left,right:o})}else{let o=yt({_tag:"IConcat",left:t.left,right:t.right.left});return yt({_tag:"IConcat",left:o,right:n})}}else if(e.right.depth>=e.left.depth){let n=At(t,e.left);return yt({_tag:"IConcat",left:n,right:e.right})}else{let n=At(t,e.left.left);if(n.depth===e.depth-3){let o=yt({_tag:"IConcat",left:n,right:e.left.right});return yt({_tag:"IConcat",left:o,right:e.right})}else{let o=yt({_tag:"IConcat",left:e.left.right,right:e.right});return yt({_tag:"IConcat",left:n,right:o})}}});var Bh=d(2,(t,e)=>jn(Mh(t,e)));var Bi=t=>t.length===0,St=t=>t.length>0,Qs=cj(0),By=t=>qn(t,0),Ct=By;var Wh=d(2,(t,e)=>t.backing._tag==="ISingleton"?xe(e(t.backing.a,0)):jn(E(yr(t),kn((r,n)=>e(r,n)))));var Rt=t=>Lh(t,1);var YF=xr;var Wy=Symbol.for("effect/Duration"),lj=BigInt(0),ZF=BigInt(24),Hh=BigInt(60),Hy=BigInt(1e3),eD=BigInt(1e6),Uy=BigInt(1e9),tD=/^(-?\d+(?:\.\d+)?)\s+(nanos?|micros?|millis?|seconds?|minutes?|hours?|days?|weeks?)$/,bt=t=>{if(nD(t))return t;if(Bs(t))return Wi(t);if(lh(t))return Hl(t);if(Array.isArray(t)){if(t.length===2&&Bs(t[0])&&Bs(t[1]))return Hl(BigInt(t[0])*Uy+BigInt(t[1]))}else if(Oc(t)){tD.lastIndex=0;let e=tD.exec(t);if(e){let[r,n,o]=e,i=Number(n);switch(o){case"nano":case"nanos":return Hl(BigInt(n));case"micro":case"micros":return hj(BigInt(n));case"milli":case"millis":return Wi(i);case"second":case"seconds":return Ul(i);case"minute":case"minutes":return mj(i);case"hour":case"hours":return dj(i);case"day":case"days":return xj(i);case"week":case"weeks":return gj(i)}}}throw new Error("Invalid DurationInput")};var rD={_tag:"Millis",millis:0},pj={_tag:"Infinity"},fj={[Wy]:Wy,[H](){return re(this,mh(this.value))},[W](t){return nD(t)&&bj(this,t)},toString(){return`Duration(${jy(this)})`},toJSON(){switch(this.value._tag){case"Millis":return{_id:"Duration",_tag:"Millis",millis:this.value.millis};case"Nanos":return{_id:"Duration",_tag:"Nanos",hrtime:yj(this)};case"Infinity":return{_id:"Duration",_tag:"Infinity"}}},[ee](){return this.toJSON()},pipe(){return R(this,arguments)}},Wo=t=>{let e=Object.create(fj);return Bs(t)?isNaN(t)||t<=0?e.value=rD:Number.isFinite(t)?Number.isInteger(t)?e.value={_tag:"Millis",millis:t}:e.value={_tag:"Nanos",nanos:BigInt(Math.round(t*1e6))}:e.value=pj:t<=lj?e.value=rD:e.value={_tag:"Nanos",nanos:t},e},nD=t=>T(t,Wy);var zy=Wo(0);var Hl=t=>Wo(t),hj=t=>Wo(t*Hy),Wi=t=>Wo(t),Ul=t=>Wo(t*1e3),mj=t=>Wo(t*6e4),dj=t=>Wo(t*36e5),xj=t=>Wo(t*864e5),gj=t=>Wo(t*6048e5),Gn=t=>Sj(t,{onMillis:e=>e,onNanos:e=>Number(e)/1e6});var Ej=t=>{let e=bt(t);switch(e.value._tag){case"Infinity":throw new Error("Cannot convert infinite duration to nanos");case"Nanos":return e.value.nanos;case"Millis":return BigInt(Math.round(e.value.millis*1e6))}},yj=t=>{let e=bt(t);switch(e.value._tag){case"Infinity":return[1/0,0];case"Nanos":return[Number(e.value.nanos/Uy),Number(e.value.nanos%Uy)];case"Millis":return[Math.floor(e.value.millis/1e3),Math.round(e.value.millis%1e3*1e6)]}},Sj=d(2,(t,e)=>{let r=bt(t);switch(r.value._tag){case"Nanos":return e.onNanos(r.value.nanos);case"Infinity":return e.onMillis(1/0);case"Millis":return e.onMillis(r.value.millis)}}),oD=d(3,(t,e,r)=>{let n=bt(t),o=bt(e);if(n.value._tag==="Infinity"||o.value._tag==="Infinity")return r.onMillis(Gn(n),Gn(o));if(n.value._tag==="Nanos"||o.value._tag==="Nanos"){let i=n.value._tag==="Nanos"?n.value.nanos:BigInt(Math.round(n.value.millis*1e6)),s=o.value._tag==="Nanos"?o.value.nanos:BigInt(Math.round(o.value.millis*1e6));return r.onNanos(i,s)}return r.onMillis(n.value.millis,o.value.millis)});var Cj=(t,e)=>oD(t,e,{onMillis:(r,n)=>r===n,onNanos:(r,n)=>r===n});var qy=d(2,(t,e)=>oD(t,e,{onMillis:(r,n)=>r>=n,onNanos:(r,n)=>r>=n})),bj=d(2,(t,e)=>Cj(bt(t),bt(e))),kj=t=>{let e=bt(t);if(e.value._tag==="Infinity")return{days:1/0,hours:1/0,minutes:1/0,seconds:1/0,millis:1/0,nanos:1/0};let r=Ej(e),n=r/eD,o=n/Hy,i=o/Hh,s=i/Hh,a=s/ZF;return{days:Number(a),hours:Number(s%ZF),minutes:Number(i%Hh),seconds:Number(o%Hh),millis:Number(n%Hy),nanos:Number(r%eD)}},jy=t=>{let e=bt(t);if(e.value._tag==="Infinity")return"Infinity";let r=kj(e),n=[];return r.days!==0&&n.push(`${r.days}d`),r.hours!==0&&n.push(`${r.hours}h`),r.minutes!==0&&n.push(`${r.minutes}m`),r.seconds!==0&&n.push(`${r.seconds}s`),r.millis!==0&&n.push(`${r.millis}ms`),r.nanos!==0&&n.push(`${r.nanos}ns`),n.join(" ")};var Gy=Math.pow(2,5),iD=Gy-1,sD=Gy/2,aD=Gy/4;function vj(t){return t-=t>>1&1431655765,t=(t&858993459)+(t>>2&858993459),t=t+(t>>4)&252645135,t+=t>>8,t+=t>>16,t&127}function Hi(t,e){return e>>>t&iD}function Ui(t){return 1<<t}function Uh(t,e){return vj(t&e-1)}var cD=(t,e)=>({value:t,previous:e});function Xs(t,e,r,n){let o=n;if(!t){let i=n.length;o=new Array(i);for(let s=0;s<i;++s)o[s]=n[s]}return o[e]=r,o}function Jy(t,e,r){let n=r.length-1,o=0,i=0,s=r;if(t)o=i=e;else for(s=new Array(n);o<e;)s[i++]=r[o++];for(++o;o<=n;)s[i++]=r[o++];return t&&(s.length=n),s}function uD(t,e,r,n){let o=n.length;if(t){let u=o;for(;u>=e;)n[u--]=n[u];return n[e]=r,n}let i=0,s=0,a=new Array(o+1);for(;i<e;)a[s++]=n[i++];for(a[e]=r;i<o;)a[++s]=n[i++];return a}var Ho=class t{_tag="EmptyNode";modify(e,r,n,o,i,s){let a=n(k());return Y(a)?new t:(++s.value,new jc(e,o,i,a))}};function sn(t){return Ri(t,"EmptyNode")}function Oj(t){return sn(t)||t._tag==="LeafNode"||t._tag==="CollisionNode"}function zh(t,e){return sn(t)?!1:e===t.edit}var jc=class t{edit;hash;key;value;_tag="LeafNode";constructor(e,r,n,o){this.edit=e,this.hash=r,this.key=n,this.value=o}modify(e,r,n,o,i,s){if(I(i,this.key)){let u=n(this.value);return u===this.value?this:Y(u)?(--s.value,new Ho):zh(this,e)?(this.value=u,this):new t(e,o,i,u)}let a=n(k());return Y(a)?this:(++s.value,lD(e,r,this.hash,this,o,new t(e,o,i,a)))}},Vy=class t{edit;hash;children;_tag="CollisionNode";constructor(e,r,n){this.edit=e,this.hash=r,this.children=n}modify(e,r,n,o,i,s){if(o===this.hash){let u=zh(this,e),f=this.updateCollisionList(u,e,this.hash,this.children,n,i,s);return f===this.children?this:f.length>1?new t(e,this.hash,f):f[0]}let a=n(k());return Y(a)?this:(++s.value,lD(e,r,this.hash,this,o,new jc(e,o,i,a)))}updateCollisionList(e,r,n,o,i,s,a){let u=o.length;for(let p=0;p<u;++p){let x=o[p];if("key"in x&&I(s,x.key)){let m=x.value,c=i(m);return c===m?o:Y(c)?(--a.value,Jy(e,p,o)):Xs(e,p,new jc(r,n,s,c),o)}}let f=i(k());return Y(f)?o:(++a.value,Xs(e,u,new jc(r,n,s,f),o))}},zl=class t{edit;mask;children;_tag="IndexedNode";constructor(e,r,n){this.edit=e,this.mask=r,this.children=n}modify(e,r,n,o,i,s){let a=this.mask,u=this.children,f=Hi(r,o),p=Ui(f),x=Uh(a,p),m=a&p,c=zh(this,e);if(!m){let S=new Ho().modify(e,r+5,n,o,i,s);return S?u.length>=sD?Dj(e,f,S,a,u):new t(e,a|p,uD(c,x,S,u)):this}let l=u[x],h=l.modify(e,r+5,n,o,i,s);if(l===h)return this;let g=a,y;if(sn(h)){if(g&=~p,!g)return new Ho;if(u.length<=2&&Oj(u[x^1]))return u[x^1];y=Jy(c,x,u)}else y=Xs(c,x,h,u);return c?(this.mask=g,this.children=y,this):new t(e,g,y)}},Ky=class t{edit;size;children;_tag="ArrayNode";constructor(e,r,n){this.edit=e,this.size=r,this.children=n}modify(e,r,n,o,i,s){let a=this.size,u=this.children,f=Hi(r,o),p=u[f],x=(p||new Ho).modify(e,r+5,n,o,i,s);if(p===x)return this;let m=zh(this,e),c;if(sn(p)&&!sn(x))++a,c=Xs(m,f,x,u);else if(!sn(p)&&sn(x)){if(--a,a<=aD)return Fj(e,a,f,u);c=Xs(m,f,new Ho,u)}else c=Xs(m,f,x,u);return m?(this.size=a,this.children=c,this):new t(e,a,c)}};function Fj(t,e,r,n){let o=new Array(e-1),i=0,s=0;for(let a=0,u=n.length;a<u;++a)if(a!==r){let f=n[a];f&&!sn(f)&&(o[i++]=f,s|=1<<a)}return new zl(t,s,o)}function Dj(t,e,r,n,o){let i=[],s=n,a=0;for(let u=0;s;++u)s&1&&(i[u]=o[a++]),s>>>=1;return i[e]=r,new Ky(t,a+1,i)}function wj(t,e,r,n,o,i){if(r===o)return new Vy(t,r,[i,n]);let s=Hi(e,r),a=Hi(e,o);if(s===a)return u=>new zl(t,Ui(s)|Ui(a),[u]);{let u=s<a?[n,i]:[i,n];return new zl(t,Ui(s)|Ui(a),u)}}function lD(t,e,r,n,o,i){let s,a=e;for(;;){let u=wj(t,a,r,n,o,i);if(typeof u=="function")s=cD(u,s),a=a+5;else{let f=u;for(;s!=null;)f=s.value(f),s=s.previous;return f}}}var pD="effect/HashMap",qh=Symbol.for(pD),Rj={[qh]:qh,[Symbol.iterator](){return new jh(this,(t,e)=>[t,e])},[H](){let t=L(pD);for(let e of this)t^=E(L(e[0]),G(L(e[1])));return re(this,t)},[W](t){if(dD(t)){if(t._size!==this._size)return!1;for(let e of this){let r=E(t,Jh(e[0],L(e[0])));if(Y(r))return!1;if(!I(e[1],r.value))return!1}return!0}return!1},toString(){return le(this.toJSON())},toJSON(){return{_id:"HashMap",values:Array.from(this).map(ue)}},[ee](){return this.toJSON()},pipe(){return R(this,arguments)}},Qy=(t,e,r,n)=>{let o=Object.create(Rj);return o._editable=t,o._edit=e,o._root=r,o._size=n,o},jh=class t{map;f;v;constructor(e,r){this.map=e,this.f=r,this.v=fD(this.map._root,this.f,void 0)}next(){if(Y(this.v))return{done:!0,value:void 0};let e=this.v.value;return this.v=Gh(e.cont),{done:!1,value:e.value}}[Symbol.iterator](){return new t(this.map,this.f)}},Gh=t=>t?hD(t[0],t[1],t[2],t[3],t[4]):k(),fD=(t,e,r=void 0)=>{switch(t._tag){case"LeafNode":return q(t.value)?b({value:e(t.key,t.value.value),cont:r}):Gh(r);case"CollisionNode":case"ArrayNode":case"IndexedNode":{let n=t.children;return hD(n.length,n,0,e,r)}default:return Gh(r)}},hD=(t,e,r,n,o)=>{for(;r<t;){let i=e[r++];if(i&&!sn(i))return fD(i,n,[t,e,r,n,o])}return Gh(o)},Mj=Qy(!1,0,new Ho,0),Jc=()=>Mj;var mD=t=>{let e=ql(Jc());for(let r of t)$s(e,r[0],r[1]);return $y(e)},dD=t=>T(t,qh),xD=t=>t&&sn(t._root),gD=d(2,(t,e)=>Jh(t,e,L(e))),Jh=d(3,(t,e,r)=>{let n=t._root,o=0;for(;;)switch(n._tag){case"LeafNode":return I(e,n.key)?n.value:k();case"CollisionNode":{if(r===n.hash){let i=n.children;for(let s=0,a=i.length;s<a;++s){let u=i[s];if("key"in u&&I(e,u.key))return u.value}}return k()}case"IndexedNode":{let i=Hi(o,r),s=Ui(i);if(n.mask&s){n=n.children[Uh(n.mask,s)],o+=5;break}return k()}case"ArrayNode":{if(n=n.children[Hi(o,r)],n){o+=5;break}return k()}default:return k()}});var Xy=d(2,(t,e)=>q(Jh(t,e,L(e))));var $s=d(3,(t,e,r)=>Kh(t,e,()=>b(r))),Tj=d(3,(t,e,r)=>t._editable?(t._root=e,t._size=r,t):e===t._root?t:Qy(t._editable,t._edit,e,r)),Vh=t=>new jh(t,e=>e);var Vc=t=>t._size,ql=t=>Qy(!0,t._edit+1,t._root,t._size),$y=t=>(t._editable=!1,t),ED=d(2,(t,e)=>{let r=ql(t);return e(r),$y(r)}),Kh=d(3,(t,e,r)=>yD(t,e,L(e),r)),yD=d(4,(t,e,r,n)=>{let o={value:t._size},i=t._root.modify(t._editable?t._edit:NaN,0,n,r,e,o);return E(t,Tj(i,o.value))});var Qh=d(2,(t,e)=>Kh(t,e,k));var SD=d(2,(t,e)=>Kc(t,Jc(),(r,n,o)=>$s(r,o,e(n,o))));var Xh=d(2,(t,e)=>Kc(t,void 0,(r,n,o)=>e(n,o))),Kc=d(3,(t,e,r)=>{let n=t._root;if(n._tag==="LeafNode")return q(n.value)?r(e,n.value.value,n.key):e;if(n._tag==="EmptyNode")return e;let o=[n.children],i;for(;i=o.pop();)for(let s=0,a=i.length;s<a;){let u=i[s++];u&&!sn(u)&&(u._tag==="LeafNode"?q(u.value)&&(e=r(e,u.value.value,u.key)):o.push(u.children))}return e});var bD="effect/HashSet",$h=Symbol.for(bD),Ij={[$h]:$h,[Symbol.iterator](){return Vh(this._keyMap)},[H](){return re(this,G(L(this._keyMap))(L(bD)))},[W](t){return kD(t)?Vc(this._keyMap)===Vc(t._keyMap)&&I(this._keyMap,t._keyMap):!1},toString(){return le(this.toJSON())},toJSON(){return{_id:"HashSet",values:Array.from(this).map(ue)}},[ee](){return this.toJSON()},pipe(){return R(this,arguments)}},Yh=t=>{let e=Object.create(Ij);return e._keyMap=t,e},kD=t=>T(t,$h),Pj=Yh(Jc()),jl=()=>Pj,vD=t=>{let e=Zh(jl());for(let r of t)Qc(e,r);return em(e)},_D=(...t)=>{let e=Zh(jl());for(let r of t)Qc(e,r);return em(e)},OD=d(2,(t,e)=>Xy(t._keyMap,e));var FD=t=>Vc(t._keyMap),Zh=t=>Yh(ql(t._keyMap)),em=t=>(t._keyMap._editable=!1,t),Yy=d(2,(t,e)=>{let r=Zh(t);return e(r),em(r)}),Qc=d(2,(t,e)=>t._keyMap._editable?($s(e,!0)(t._keyMap),t):Yh($s(e,!0)(t._keyMap))),Zy=d(2,(t,e)=>t._keyMap._editable?(Qh(e)(t._keyMap),t):Yh(Qh(e)(t._keyMap))),DD=d(2,(t,e)=>Yy(t,r=>{for(let n of e)Zy(r,n)}));var wD=d(2,(t,e)=>Yy(jl(),r=>{AD(t,n=>Qc(r,n));for(let n of e)Qc(r,n)}));var AD=d(2,(t,e)=>Xh(t._keyMap,(r,n)=>e(n))),RD=d(3,(t,e,r)=>Kc(t._keyMap,e,(n,o,i)=>r(n,i)));var Jn=jl,tm=vD,Ys=_D,MD=OD;var Zs=FD;var ea=Qc,eS=Zy,tS=DD;var Uo=wD;var ta=RD;var TD=Symbol.for("effect/MutableRef"),Lj={[TD]:TD,toString(){return le(this.toJSON())},toJSON(){return{_id:"MutableRef",current:ue(this.current)}},[ee](){return this.toJSON()},pipe(){return R(this,arguments)}},an=t=>{let e=Object.create(Lj);return e.current=t,e},rm=d(3,(t,e,r)=>I(e,t.current)?(t.current=r,!0):!1);var We=t=>t.current;var Sr=d(2,(t,e)=>(t.current=e,t));var nm="effect/FiberId",qi=Symbol.for(nm),Xc="None",rS="Runtime",nS="Composite",Bj=ye(`${nm}-${Xc}`),oS=class{[qi]=qi;_tag=Xc;id=-1;startTimeMillis=-1;[H](){return Bj}[W](e){return im(e)&&e._tag===Xc}toString(){return le(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag}}[ee](){return this.toJSON()}},iS=class{id;startTimeMillis;[qi]=qi;_tag=rS;constructor(e,r){this.id=e,this.startTimeMillis=r}[H](){return re(this,ye(`${nm}-${this._tag}-${this.id}-${this.startTimeMillis}`))}[W](e){return im(e)&&e._tag===rS&&this.id===e.id&&this.startTimeMillis===e.startTimeMillis}toString(){return le(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,id:this.id,startTimeMillis:this.startTimeMillis}}[ee](){return this.toJSON()}},sS=class{left;right;[qi]=qi;_tag=nS;constructor(e,r){this.left=e,this.right=r}_hash;[H](){return E(ye(`${nm}-${this._tag}`),G(L(this.left)),G(L(this.right)),re(this))}[W](e){return im(e)&&e._tag===nS&&I(this.left,e.left)&&I(this.right,e.right)}toString(){return le(this.toJSON())}toJSON(){return{_id:"FiberId",_tag:this._tag,left:ue(this.left),right:ue(this.right)}}[ee](){return this.toJSON()}},om=new oS;var im=t=>T(t,qi);var PD=d(2,(t,e)=>t._tag===Xc?e:e._tag===Xc?t:new sS(t,e));var Gl=t=>{switch(t._tag){case Xc:return Jn();case rS:return Ys(t.id);case nS:return E(Gl(t.left),Uo(Gl(t.right)))}},ID=J(Symbol.for("effect/Fiber/Id/_fiberCounter"),()=>an(0));var sm=t=>Array.from(Gl(t)).map(r=>`#${r}`).join(",");var ND=()=>{let t=We(ID);return E(ID,Sr(t+1)),new iS(t,Date.now())};var Cr=om;var aS=PD;var cS=Gl;var BD=sm;var am=ND;var ra=Jc;var WD=mD,HD=xD,uS=gD;var Jt=$s,lS=Vh;var UD=Vc;var zD=ED,qD=Kh;var jD=SD;var GD=Xh,pS=Kc;var Jl=Symbol.for("effect/List"),fS=t=>ne(t),Hj=t=>RO(Wc(t),fS),Uj=Hj(I),zj={[Jl]:Jl,_tag:"Cons",toString(){return le(this.toJSON())},toJSON(){return{_id:"List",_tag:"Cons",values:fS(this).map(ue)}},[ee](){return this.toJSON()},[W](t){return VD(t)&&this._tag===t._tag&&Uj(this,t)},[H](){return re(this,mr(fS(this)))},[Symbol.iterator](){let t=!1,e=this;return{next(){if(t)return this.return();if(e._tag==="Nil")return t=!0,this.return();let r=e.head;return e=e.tail,{done:t,value:r}},return(r){return t||(t=!0),{done:!0,value:r}}}},pipe(){return R(this,arguments)}},cm=(t,e)=>{let r=Object.create(zj);return r.head=t,r.tail=e,r},qj=ye("Nil"),jj={[Jl]:Jl,_tag:"Nil",toString(){return le(this.toJSON())},toJSON(){return{_id:"List",_tag:"Nil"}},[ee](){return this.toJSON()},[H](){return qj},[W](t){return VD(t)&&this._tag===t._tag},[Symbol.iterator](){return{next(){return{done:!0,value:void 0}}}},pipe(){return R(this,arguments)}},JD=Object.create(jj),VD=t=>T(t,Jl),Vn=t=>t._tag==="Nil",Vl=t=>t._tag==="Cons";var Gj=()=>JD,qo=(t,e)=>cm(t,e),Kn=Gj,Kl=t=>cm(t,JD);var KD=d(2,(t,e)=>Jj(e,t)),um=d(2,(t,e)=>qo(e,t)),Jj=d(2,(t,e)=>{if(Vn(t))return e;if(Vn(e))return t;{let r=cm(e.head,t),n=r,o=e.tail;for(;!Vn(o);){let i=cm(o.head,t);n.tail=i,n=i,o=o.tail}return r}});var QD=d(3,(t,e,r)=>{let n=e,o=t;for(;!Vn(o);)n=r(n,o.head),o=o.tail;return n});var XD=t=>{let e=Kn(),r=t;for(;!Vn(r);)e=um(e,r.head),r=r.tail;return e};var Vj=Object.assign(Object.create(Array.prototype),{[H](){return re(this,mr(this))},[W](t){return Array.isArray(t)&&this.length===t.length?this.every((e,r)=>I(e,t[r])):!1}}),na=function(){function t(e){e&&Object.assign(this,e)}return t.prototype=Ti,t}(),Zc=t=>Object.assign(Object.create(Ti),t);var Kj=Symbol.for("effect/DifferContextPatch");function $D(t){return t}var Xl={...na.prototype,[Kj]:{_Value:$D,_Patch:$D}},Qj=Object.assign(Object.create(Xl),{_tag:"Empty"}),Xj=Object.create(Qj),mS=()=>Xj,$j=Object.assign(Object.create(Xl),{_tag:"AndThen"}),Yj=(t,e)=>{let r=Object.create($j);return r.first=t,r.second=e,r},Zj=Object.assign(Object.create(Xl),{_tag:"AddService"}),e8=(t,e)=>{let r=Object.create(Zj);return r.key=t,r.service=e,r},t8=Object.assign(Object.create(Xl),{_tag:"RemoveService"}),r8=t=>{let e=Object.create(t8);return e.key=t,e},n8=Object.assign(Object.create(Xl),{_tag:"UpdateService"}),o8=(t,e)=>{let r=Object.create(n8);return r.key=t,r.update=e,r},YD=(t,e)=>{let r=new Map(t.unsafeMap),n=mS();for(let[o,i]of e.unsafeMap.entries())if(r.has(o)){let s=r.get(o);r.delete(o),I(s,i)||(n=Ql(o8(o,()=>i))(n))}else r.delete(o),n=Ql(e8(o,i))(n);for(let[o]of r.entries())n=Ql(r8(o))(n);return n},Ql=d(2,(t,e)=>Yj(t,e)),ZD=d(2,(t,e)=>{if(t._tag==="Empty")return e;let r=!1,n=xe(t),o=new Map(e.unsafeMap);for(;St(n);){let s=Ct(n),a=Rt(n);switch(s._tag){case"Empty":{n=a;break}case"AddService":{o.set(s.key,s.service),n=a;break}case"AndThen":{n=Be(Be(a,s.second),s.first);break}case"RemoveService":{o.delete(s.key),n=a;break}case"UpdateService":{o.set(s.key,s.update(o.get(s.key))),r=!0,n=a;break}}}if(!r)return vn(o);let i=new Map;for(let[s]of e.unsafeMap)o.has(s)&&(i.set(s,o.get(s)),o.delete(s));for(let[s,a]of o)i.set(s,a);return vn(i)});var s8=Symbol.for("effect/DifferHashSetPatch");function dS(t){return t}var pm={...na.prototype,[s8]:{_Value:dS,_Key:dS,_Patch:dS}},a8=Object.assign(Object.create(pm),{_tag:"Empty"}),c8=Object.create(a8),xS=()=>c8,u8=Object.assign(Object.create(pm),{_tag:"AndThen"}),l8=(t,e)=>{let r=Object.create(u8);return r.first=t,r.second=e,r},p8=Object.assign(Object.create(pm),{_tag:"Add"}),f8=t=>{let e=Object.create(p8);return e.value=t,e},h8=Object.assign(Object.create(pm),{_tag:"Remove"}),m8=t=>{let e=Object.create(h8);return e.value=t,e},ew=(t,e)=>{let[r,n]=ta([t,xS()],([o,i],s)=>MD(s)(o)?[eS(s)(o),i]:[o,lm(f8(s))(i)])(e);return ta(n,(o,i)=>lm(m8(i))(o))(r)},lm=d(2,(t,e)=>l8(t,e)),tw=d(2,(t,e)=>{if(t._tag==="Empty")return e;let r=e,n=xe(t);for(;St(n);){let o=Ct(n),i=Rt(n);switch(o._tag){case"Empty":{n=i;break}case"AndThen":{n=Be(o.first)(Be(o.second)(i));break}case"Add":{r=ea(o.value)(r),n=i;break}case"Remove":r=eS(o.value)(r),n=i}}return r});var x8=Symbol.for("effect/DifferReadonlyArrayPatch");function rw(t){return t}var Yl={...na.prototype,[x8]:{_Value:rw,_Patch:rw}},g8=Object.assign(Object.create(Yl),{_tag:"Empty"}),E8=Object.create(g8),gS=()=>E8,y8=Object.assign(Object.create(Yl),{_tag:"AndThen"}),S8=(t,e)=>{let r=Object.create(y8);return r.first=t,r.second=e,r},C8=Object.assign(Object.create(Yl),{_tag:"Append"}),b8=t=>{let e=Object.create(C8);return e.values=t,e},k8=Object.assign(Object.create(Yl),{_tag:"Slice"}),v8=(t,e)=>{let r=Object.create(k8);return r.from=t,r.until=e,r},_8=Object.assign(Object.create(Yl),{_tag:"Update"}),O8=(t,e)=>{let r=Object.create(_8);return r.index=t,r.patch=e,r},nw=t=>{let e=0,r=gS();for(;e<t.oldValue.length&&e<t.newValue.length;){let n=t.oldValue[e],o=t.newValue[e],i=t.differ.diff(n,o);I(i,t.differ.empty)||(r=$l(r,O8(e,i))),e=e+1}return e<t.oldValue.length&&(r=$l(r,v8(0,e))),e<t.newValue.length&&(r=$l(r,b8(vF(e)(t.newValue)))),r},$l=d(2,(t,e)=>S8(t,e)),ow=d(3,(t,e,r)=>{if(t._tag==="Empty")return e;let n=e.slice(),o=rr(t);for(;CF(o);){let i=Gt(o),s=Un(o);switch(i._tag){case"Empty":{o=s;break}case"AndThen":{s.unshift(i.first,i.second),o=s;break}case"Append":{for(let a of i.values)n.push(a);o=s;break}case"Slice":{n=n.slice(i.from,i.until),o=s;break}case"Update":{n[i.index]=r.patch(i.patch,n[i.index]),o=s;break}}}return n});var iw=Symbol.for("effect/Differ"),D8={[iw]:{_P:B,_V:B}},Gi=t=>{let e=Object.create(D8);return e.empty=t.empty,e.diff=t.diff,e.combine=t.combine,e.patch=t.patch,e},ES=()=>Gi({empty:mS(),combine:(t,e)=>Ql(e)(t),diff:(t,e)=>YD(t,e),patch:(t,e)=>ZD(e)(t)});var yS=()=>Gi({empty:xS(),combine:(t,e)=>lm(e)(t),diff:(t,e)=>ew(t,e),patch:(t,e)=>tw(e)(t)});var SS=t=>Gi({empty:gS(),combine:(e,r)=>$l(e,r),diff:(e,r)=>nw({oldValue:e,newValue:r,differ:t}),patch:(e,r)=>ow(e,r,t)});var fm=()=>sw((t,e)=>e),sw=t=>Gi({empty:B,combine:(e,r)=>e===B?r:r===B?e:n=>r(e(n)),diff:(e,r)=>I(e,r)?B:vc(r),patch:(e,r)=>t(r,e(r))});var Zl=255,aw=8,hm=t=>t&Zl,mm=t=>t>>aw&Zl,oa=(t,e)=>(t&Zl)+((e&t&Zl)<<aw),dm=oa(0,0),cw=t=>oa(t,t),uw=t=>oa(t,0);var lw=d(2,(t,e)=>oa(hm(t)&~e,mm(t)));var bS=d(2,(t,e)=>t|e);var pw=t=>~t>>>0&Zl;var w8=0,Qn=1,hw=2,kS=4,xm=16,vS=32;var mw=t=>gm(t,vS);var _S=d(2,(t,e)=>t|e);var jo=t=>ep(t)&&!A8(t),ep=t=>gm(t,Qn);var gm=d(2,(t,e)=>(t&e)!==0),OS=(...t)=>t.reduce((e,r)=>e|r,0),dw=OS(w8);var FS=t=>gm(t,kS);var A8=t=>gm(t,xm);var cn=d(2,(t,e)=>oa(t^e,e)),Go=d(2,(t,e)=>t&(pw(hm(e))|mm(e))|hm(e)&mm(e));var DS=Gi({empty:dm,diff:(t,e)=>cn(t,e),combine:(t,e)=>bS(e)(t),patch:(t,e)=>Go(e,t)});var xw=dm;var wS=cw,AS=uw;var RS=lw;var gw={_tag:"Empty"},PS=(t,e)=>({_tag:"Par",left:t,right:e}),Em=(t,e)=>({_tag:"Seq",left:t,right:e}),NS=(t,e)=>({_tag:"Single",dataSource:t,blockedRequest:e});var Ew=t=>{let e=Kl(t),r=Kn();for(;;){let[n,o]=QD(e,[yw(),Kn()],([i,s],a)=>{let[u,f]=R8(a);return[B8(i,u),KD(s,f)]});if(r=M8(r,n),Vn(o))return XD(r);e=o}throw new Error("BUG: BlockedRequests.flatten - please report an issue at https://github.com/Effect-TS/effect/issues")},R8=t=>{let e=t,r=yw(),n=Kn(),o=Kn();for(;;)switch(e._tag){case"Empty":{if(Vn(n))return[r,o];e=n.head,n=n.tail;break}case"Par":{n=qo(e.right,n),e=e.left;break}case"Seq":{let i=e.left,s=e.right;switch(i._tag){case"Empty":{e=s;break}case"Par":{let a=i.left,u=i.right;e=PS(Em(a,s),Em(u,s));break}case"Seq":{let a=i.left,u=i.right;e=Em(a,Em(u,s));break}case"Single":{e=i,o=qo(s,o);break}}break}case"Single":{if(r=L8(r,e),Vn(n))return[r,o];e=n.head,n=n.tail;break}}throw new Error("BUG: BlockedRequests.step - please report an issue at https://github.com/Effect-TS/effect/issues")},M8=(t,e)=>{if(Vn(t))return Kl(TS(e));if(W8(e))return t;let r=G8(t.head),n=H8(e);return r.length===1&&n.length===1&&I(r[0],n[0])?qo(j8(t.head,TS(e)),t.tail):qo(TS(e),t)},T8=Symbol.for("effect/RequestBlock/Entry"),IS=class{request;result;listeners;ownerId;state;[T8]=I8;constructor(e,r,n,o,i){this.request=e,this.result=r,this.listeners=n,this.ownerId=o,this.state=i}},I8={_R:t=>t};var LS=t=>new IS(t.request,t.result,t.listeners,t.ownerId,t.state),P8=Symbol.for("effect/RequestBlock/RequestBlockParallel"),N8={_R:t=>t},rp=class{map;[P8]=N8;constructor(e){this.map=e}},yw=()=>new rp(ra());var L8=(t,e)=>new rp(qD(t.map,e.dataSource,r=>xy(ze(r,Li(e.blockedRequest)),()=>xe(e.blockedRequest)))),B8=(t,e)=>new rp(pS(t.map,e.map,(r,n,o)=>Jt(r,o,Se(uS(r,o),{onNone:()=>n,onSome:i=>At(n,i)})))),W8=t=>HD(t.map),H8=t=>Array.from(lS(t.map)),TS=t=>q8(jD(t.map,e=>xe(e))),U8=Symbol.for("effect/RequestBlock/RequestBlockSequential"),z8={_R:t=>t},ym=class{map;[U8]=z8;constructor(e){this.map=e}},q8=t=>new ym(t),j8=(t,e)=>new ym(pS(e.map,t.map,(r,n,o)=>Jt(r,o,Se(uS(r,o),{onNone:()=>mt(),onSome:i=>At(i,n)}))));var G8=t=>Array.from(lS(t.map)),Sw=t=>Array.from(t.map);var ia="Die",sa="Empty",aa="Fail",ca="Interrupt",ua="Parallel",la="Sequential";var _w="effect/Cause",WS=Symbol.for(_w),V8={_E:t=>t},eu={[WS]:V8,[H](){return E(L(_w),G(L(Q8(this))),re(this))},[W](t){return Cm(t)&&K8(this,t)},pipe(){return R(this,arguments)},toJSON(){switch(this._tag){case"Empty":return{_id:"Cause",_tag:this._tag};case"Die":return{_id:"Cause",_tag:this._tag,defect:ue(this.defect)};case"Interrupt":return{_id:"Cause",_tag:this._tag,fiberId:this.fiberId.toJSON()};case"Fail":return{_id:"Cause",_tag:this._tag,failure:ue(this.error)};case"Sequential":case"Parallel":return{_id:"Cause",_tag:this._tag,left:ue(this.left),right:ue(this.right)}}},toString(){return Vi(this)},[ee](){return this.toJSON()}},un=(()=>{let t=Object.create(eu);return t._tag=sa,t})(),On=t=>{let e=Object.create(eu);return e._tag=aa,e.error=t,e},ht=t=>{let e=Object.create(eu);return e._tag=ia,e.defect=t,e},or=t=>{let e=Object.create(eu);return e._tag=ca,e.fiberId=t,e},ir=(t,e)=>{let r=Object.create(eu);return r._tag=ua,r.left=t,r.right=e,r},He=(t,e)=>{let r=Object.create(eu);return r._tag=la,r.left=t,r.right=e,r},Cm=t=>T(t,WS);var tu=t=>t._tag===ia;var bm=t=>t._tag===sa?!0:pa(t,!0,(e,r)=>{switch(r._tag){case sa:return b(e);case ia:case aa:case ca:return b(!1);default:return k()}});var np=t=>q(Fw(t)),fa=t=>sp(void 0,$8)(t),op=t=>Br(pa(t,mt(),(e,r)=>r._tag===aa?b(E(e,Be(r.error))):k())),ip=t=>Br(pa(t,mt(),(e,r)=>r._tag===ia?b(E(e,Be(r.defect))):k())),ru=t=>pa(t,Jn(),(e,r)=>r._tag===ca?b(E(e,ea(r.fiberId))):k()),km=t=>Ji(t,e=>e._tag===aa?b(e.error):k()),Fn=t=>{let e=km(t);switch(e._tag){case"None":return be(t);case"Some":return Pe(e.value)}};var Ow=t=>ha(t,{onEmpty:b(un),onFail:e=>E(e,ze(On)),onDie:e=>b(ht(e)),onInterrupt:e=>b(or(e)),onSequential:(e,r)=>q(e)&&q(r)?b(He(e.value,r.value)):Y(e)&&q(r)?b(r.value):q(e)&&Y(r)?b(e.value):k(),onParallel:(e,r)=>q(e)&&q(r)?b(ir(e.value,r.value)):Y(e)&&q(r)?b(r.value):q(e)&&Y(r)?b(e.value):k()}),Fw=t=>Ji(t,e=>e._tag===ca?b(e.fiberId):k()),HS=t=>ha(t,{onEmpty:k(),onFail:()=>k(),onDie:e=>b(ht(e)),onInterrupt:()=>k(),onSequential:(e,r)=>q(e)&&q(r)?b(He(e.value,r.value)):q(e)&&Y(r)?b(e.value):Y(e)&&q(r)?b(r.value):k(),onParallel:(e,r)=>q(e)&&q(r)?b(ir(e.value,r.value)):q(e)&&Y(r)?b(e.value):Y(e)&&q(r)?b(r.value):k()}),Dw=t=>ha(t,{onEmpty:k(),onFail:e=>b(ht(e)),onDie:e=>b(ht(e)),onInterrupt:()=>k(),onSequential:(e,r)=>q(e)&&q(r)?b(He(e.value,r.value)):q(e)&&Y(r)?b(e.value):Y(e)&&q(r)?b(r.value):k(),onParallel:(e,r)=>q(e)&&q(r)?b(ir(e.value,r.value)):q(e)&&Y(r)?b(e.value):Y(e)&&q(r)?b(r.value):k()});var vm=t=>ha(t,{onEmpty:un,onFail:()=>un,onDie:e=>ht(e),onInterrupt:e=>or(e),onSequential:He,onParallel:ir}),ww=t=>ha(t,{onEmpty:un,onFail:e=>ht(e),onDie:e=>ht(e),onInterrupt:e=>or(e),onSequential:(e,r)=>He(e,r),onParallel:(e,r)=>ir(e,r)});var _m=d(2,(t,e)=>US(t,r=>On(e(r)))),US=d(2,(t,e)=>ha(t,{onEmpty:un,onFail:r=>e(r),onDie:r=>ht(r),onInterrupt:r=>or(r),onSequential:(r,n)=>He(r,n),onParallel:(r,n)=>ir(r,n)})),zS=t=>US(t,B);var K8=(t,e)=>{let r=xe(t),n=xe(e);for(;St(r)&&St(n);){let[o,i]=E(Ct(r),pa([Jn(),mt()],([u,f],p)=>{let[x,m]=BS(p);return b([E(u,Uo(x)),E(f,At(m))])})),[s,a]=E(Ct(n),pa([Jn(),mt()],([u,f],p)=>{let[x,m]=BS(p);return b([E(u,Uo(x)),E(f,At(m))])}));if(!I(o,s))return!1;r=i,n=a}return!0},Q8=t=>X8(xe(t),mt()),X8=(t,e)=>{for(;;){let[r,n]=E(t,xr([Jn(),mt()],([i,s],a)=>{let[u,f]=BS(a);return[E(i,Uo(u)),E(s,At(f))]})),o=Zs(r)>0?E(e,Be(r)):e;if(Bi(n))return Br(o);t=n,e=o}throw new Error(Hs("Cause.flattenCauseLoop"))},Ji=d(2,(t,e)=>{let r=[t];for(;r.length>0;){let n=r.pop(),o=e(n);switch(o._tag){case"None":{switch(n._tag){case la:case ua:{r.push(n.right),r.push(n.left);break}}break}case"Some":return o}}return k()});var BS=t=>{let e=t,r=[],n=Jn(),o=mt();for(;e!==void 0;)switch(e._tag){case sa:{if(r.length===0)return[n,o];e=r.pop();break}case aa:{if(n=ea(n,qc(e._tag,e.error)),r.length===0)return[n,o];e=r.pop();break}case ia:{if(n=ea(n,qc(e._tag,e.defect)),r.length===0)return[n,o];e=r.pop();break}case ca:{if(n=ea(n,qc(e._tag,e.fiberId)),r.length===0)return[n,o];e=r.pop();break}case la:{switch(e.left._tag){case sa:{e=e.right;break}case la:{e=He(e.left.left,He(e.left.right,e.right));break}case ua:{e=ir(He(e.left.left,e.right),He(e.left.right,e.right));break}default:{o=Be(o,e.right),e=e.left;break}}break}case ua:{r.push(e.right),e=e.left;break}}throw new Error(Hs("Cause.evaluateCauseLoop"))};var $8={emptyCase:Cn,failCase:en,dieCase:en,interruptCase:Cn,sequentialCase:(t,e,r)=>e&&r,parallelCase:(t,e,r)=>e&&r};var bw="SequentialCase",kw="ParallelCase",ha=d(2,(t,{onDie:e,onEmpty:r,onFail:n,onInterrupt:o,onParallel:i,onSequential:s})=>sp(t,void 0,{emptyCase:()=>r,failCase:(a,u)=>n(u),dieCase:(a,u)=>e(u),interruptCase:(a,u)=>o(u),sequentialCase:(a,u,f)=>s(u,f),parallelCase:(a,u,f)=>i(u,f)})),pa=d(3,(t,e,r)=>{let n=e,o=t,i=[];for(;o!==void 0;){let s=r(n,o);switch(n=q(s)?s.value:n,o._tag){case la:{i.push(o.right),o=o.left;break}case ua:{i.push(o.right),o=o.left;break}default:{o=void 0;break}}o===void 0&&i.length>0&&(o=i.pop())}return n}),sp=d(3,(t,e,r)=>{let n=[t],o=[];for(;n.length>0;){let s=n.pop();switch(s._tag){case sa:{o.push(be(r.emptyCase(e)));break}case aa:{o.push(be(r.failCase(e,s.error)));break}case ia:{o.push(be(r.dieCase(e,s.defect)));break}case ca:{o.push(be(r.interruptCase(e,s.fiberId)));break}case la:{n.push(s.right),n.push(s.left),o.push(Pe({_tag:bw}));break}case ua:{n.push(s.right),n.push(s.left),o.push(Pe({_tag:kw}));break}}}let i=[];for(;o.length>0;){let s=o.pop();switch(s._tag){case"Left":{switch(s.left._tag){case bw:{let a=i.pop(),u=i.pop(),f=r.sequentialCase(e,a,u);i.push(f);break}case kw:{let a=i.pop(),u=i.pop(),f=r.parallelCase(e,a,u);i.push(f);break}}break}case"Right":{i.push(s.right);break}}}if(i.length===0)throw new Error("BUG: Cause.reduceWithContext - please report an issue at https://github.com/Effect-TS/effect/issues");return i.pop()}),Vi=(t,e)=>fa(t)?"All fibers interrupted without errors.":Om(t).map(function(r){return e?.renderErrorCause!==!0||r.cause===void 0?r.stack:`${r.stack} {
${Aw(r.cause,"  ")}
}`}).join(`
`),Aw=(t,e)=>{let r=t.stack.split(`
`),n=`${e}[cause]: ${r[0]}`;for(let o=1,i=r.length;o<i;o++)n+=`
${e}${r[o]}`;return t.cause&&(n+=` {
${Aw(t.cause,`${e}  `)}
${e}}`),n},Sm=class t extends globalThis.Error{span=void 0;constructor(e){let r=typeof e=="object"&&e!==null,n=Error.stackTraceLimit;Error.stackTraceLimit=1,super(Y8(e),r&&"cause"in e&&typeof e.cause<"u"?{cause:new t(e.cause)}:void 0),this.message===""&&(this.message="An error has occurred"),Error.stackTraceLimit=n,this.name=e instanceof Error?e.name:"Error",r&&(vw in e&&(this.span=e[vw]),Object.keys(e).forEach(o=>{o in this||(this[o]=e[o])})),this.stack=e6(`${this.name}: ${this.message}`,e instanceof Error&&e.stack?e.stack:"",this.span)}},Y8=t=>{if(typeof t=="string")return t;if(typeof t=="object"&&t!==null&&t instanceof Error)return t.message;try{if(T(t,"toString")&&wi(t.toString)&&t.toString!==Object.prototype.toString&&t.toString!==globalThis.Array.prototype.toString)return t.toString()}catch{}return gh(t)},Z8=/\((.*)\)/,ap=J("effect/Tracer/spanToTrace",()=>new WeakMap),e6=(t,e,r)=>{let n=[t],o=e.startsWith(t)?e.slice(t.length).split(`
`):e.split(`
`);for(let i=1;i<o.length&&!o[i].includes("Generator.next");i++){if(o[i].includes("effect_internal_function")){n.pop();break}n.push(o[i].replace(/at .*effect_instruction_i.*\((.*)\)/,"at $1").replace(/EffectPrimitive\.\w+/,"<anonymous>"))}if(r){let i=r,s=0;for(;i&&i._tag==="Span"&&s<10;){let a=ap.get(i);if(typeof a=="function"){let u=a();if(typeof u=="string"){let f=u.match(Z8),p=f?f[1]:u.replace(/^at /,"");n.push(`    at ${i.name} (${p})`)}else n.push(`    at ${i.name}`)}else n.push(`    at ${i.name}`);i=Wt(i.parent),s++}}return n.join(`
`)},vw=Symbol.for("effect/SpanAnnotation"),Om=t=>sp(t,void 0,{emptyCase:()=>[],dieCase:(e,r)=>[new Sm(r)],failCase:(e,r)=>[new Sm(r)],interruptCase:()=>[],parallelCase:(e,r,n)=>[...r,...n],sequentialCase:(e,r,n)=>[...r,...n]});var ma="Pending",nu="Done";var t6="effect/Deferred",Mw=Symbol.for(t6),Tw={_E:t=>t,_A:t=>t},Iw=t=>({_tag:ma,joiners:t}),qS=t=>({_tag:nu,effect:t});var ou=class t{self;called=!1;constructor(e){this.self=e}next(e){return this.called?{value:e,done:!0}:(this.called=!0,{value:this.self,done:!1})}return(e){return{value:e,done:!0}}throw(e){throw e}[Symbol.iterator](){return new t(this.self)}};var n6="effect/EffectError",jS=Symbol.for(n6),Lw=t=>T(t,jS),Bw=t=>({[jS]:jS,_tag:"EffectError",cause:t}),Jo=(t,e)=>{let r=new ct("Blocked");return r.effect_instruction_i0=t,r.effect_instruction_i1=e,r},Tm=t=>{let e=new ct("RunBlocked");return e.effect_instruction_i0=t,e},Vo=Symbol.for("effect/Effect"),Fm=class{patch;op;_op=Tl;constructor(e,r){this.patch=e,this.op=r}},ct=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Vo]=Mi;constructor(e){this._op=e}[W](e){return this===e}[H](){return re(this,Dc(this))}pipe(){return R(this,arguments)}toJSON(){return{_id:"Effect",_op:this._op,effect_instruction_i0:ue(this.effect_instruction_i0),effect_instruction_i1:ue(this.effect_instruction_i1),effect_instruction_i2:ue(this.effect_instruction_i2)}}toString(){return le(this.toJSON())}[ee](){return this.toJSON()}[Symbol.iterator](){return new ou(new Wn(this))}},Dm=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Vo]=Mi;constructor(e){this._op=e,this._tag=e}[W](e){return kp(e)&&e._op==="Failure"&&I(this.effect_instruction_i0,e.effect_instruction_i0)}[H](){return E(ye(this._tag),G(L(this.effect_instruction_i0)),re(this))}get cause(){return this.effect_instruction_i0}pipe(){return R(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,cause:this.cause.toJSON()}}toString(){return le(this.toJSON())}[ee](){return this.toJSON()}[Symbol.iterator](){return new ou(new Wn(this))}},wm=class{_op;effect_instruction_i0=void 0;effect_instruction_i1=void 0;effect_instruction_i2=void 0;trace=void 0;[Vo]=Mi;constructor(e){this._op=e,this._tag=e}[W](e){return kp(e)&&e._op==="Success"&&I(this.effect_instruction_i0,e.effect_instruction_i0)}[H](){return E(ye(this._tag),G(L(this.effect_instruction_i0)),re(this))}get value(){return this.effect_instruction_i0}pipe(){return R(this,arguments)}toJSON(){return{_id:"Exit",_tag:this._op,value:ue(this.value)}}toString(){return le(this.toJSON())}[ee](){return this.toJSON()}[Symbol.iterator](){return new ou(new Wn(this))}},Ee=t=>T(t,Vo),ae=t=>{let e=new ct(yh);return e.effect_instruction_i0=t,e},Im=d(3,(t,e,r)=>$e(n=>C(t,o=>C(Xe(U(()=>n(e(o)))),i=>U(()=>r(o,i)).pipe(qe({onFailure:s=>{switch(i._tag){case nt:return ce(He(i.effect_instruction_i0,s));case ot:return ce(s)}},onSuccess:()=>i})))))),ke=d(2,(t,e)=>C(t,()=>v(e))),Ue=t=>ke(t,void 0),lp=function(){let t=new ct(Gs);switch(arguments.length){case 2:{t.effect_instruction_i0=arguments[0],t.commit=arguments[1];break}case 3:{t.effect_instruction_i0=arguments[0],t.effect_instruction_i1=arguments[1],t.commit=arguments[2];break}case 4:{t.effect_instruction_i0=arguments[0],t.effect_instruction_i1=arguments[1],t.effect_instruction_i2=arguments[2],t.commit=arguments[3];break}default:throw new Error(Hs("you're not supposed to end up here"))}return t},iu=(t,e=Cr)=>{let r=new ct(js),n;return r.effect_instruction_i0=o=>{n=t(o)},r.effect_instruction_i1=e,vr(r,o=>Ee(n)?n:Q)},pp=(t,e=Cr)=>U(()=>iu(t,e)),sr=(t,e=Cr)=>lp(t,function(){let r,n;function o(u){r?r(u):n===void 0&&(n=u)}let i=new ct(js);i.effect_instruction_i0=u=>{r=u,n&&u(n)},i.effect_instruction_i1=e;let s,a;return this.effect_instruction_i0.length!==1?(a=new AbortController,s=rt(()=>this.effect_instruction_i0(o,a.signal))):s=rt(()=>this.effect_instruction_i0(o)),s||a?vr(i,u=>(a&&a.abort(),s??Q)):i});var Xn=d(2,(t,e)=>{let r=new ct(Rc);return r.effect_instruction_i0=t,r.effect_instruction_i1=e,r}),Wr=d(2,(t,e)=>kt(t,{onFailure:e,onSuccess:v})),fp=d(3,(t,e,r)=>Xn(t,n=>{let o=Fn(n);switch(o._tag){case"Left":return e(o.left)?r(o.left):ce(n);case"Right":return ce(o.right)}})),Ww=d(2,(t,e)=>Xn(t,r=>{let n=Fn(r);switch(n._tag){case"Left":return E(e(n.left),Ne(()=>ce(r)));case"Right":return ce(n.right)}})),Hw=t=>ae((e,r)=>t(ep(r.runtimeFlags))),Am=Symbol.for("effect/SpanAnnotation"),Pw=Symbol.for("effect/OriginalAnnotation");var Pm=(t,e)=>q(e)?new Proxy(t,{has(r,n){return n===Am||n===Pw||n in r},get(r,n){return n===Am?e.value:n===Pw?t:r[n]}}):t,Ko=t=>Ai(t)&&!(Am in t)?ae(e=>ce(ht(Pm(t,Qm(e))))):ce(ht(t)),Qo=t=>Xo(()=>ht(new uA(t))),Xi=t=>C(D(t),Ko),$n=t=>kt(t,{onFailure:e=>v(Pe(e)),onSuccess:e=>v(be(e))}),Xe=t=>hp(t,{onFailure:ge,onSuccess:ve}),oe=t=>Ai(t)&&!(Am in t)?ae(e=>ce(On(Pm(t,Qm(e))))):ce(On(t)),ar=t=>C(D(t),oe),ce=t=>{let e=new Dm(nt);return e.effect_instruction_i0=t,e},Xo=t=>C(D(t),ce),Yn=ae(t=>v(t.id())),br=t=>ae(e=>t(e.id())),C=d(2,(t,e)=>{let r=new ct(Mc);return r.effect_instruction_i0=t,r.effect_instruction_i1=e,r}),$i=d(2,(t,e)=>C(t,r=>{let n=typeof e=="function"?e(r):e;return Ee(n)?n:ty(n)?iu(o=>{n.then(i=>o(v(i)),i=>o(oe(new Yo(i))))}):v(n)})),Nm=t=>{let e=new ct("OnStep");return e.effect_instruction_i0=t,e},cr=t=>C(t,B),Yi=t=>kt(t,{onFailure:v,onSuccess:oe}),hp=d(2,(t,e)=>qe(t,{onFailure:r=>v(e.onFailure(r)),onSuccess:r=>v(e.onSuccess(r))})),qe=d(2,(t,e)=>{let r=new ct(Tc);return r.effect_instruction_i0=t,r.effect_instruction_i1=e.onFailure,r.effect_instruction_i2=e.onSuccess,r}),kt=d(2,(t,e)=>qe(t,{onFailure:r=>{if(ip(r).length>0)return ce(ww(r));let o=op(r);return o.length>0?e.onFailure(By(o)):ce(r)},onSuccess:e.onSuccess})),Mt=d(2,(t,e)=>U(()=>{let r=ne(t),n=Nl(r.length),o=0;return ke(au({while:()=>o<r.length,body:()=>e(r[o],o),step:i=>{n[o++]=i}}),n)})),kr=d(2,(t,e)=>U(()=>{let r=ne(t),n=0;return au({while:()=>n<r.length,body:()=>e(r[n],n),step:()=>{n++}})})),Lm=d(t=>typeof t[0]=="boolean"||Ee(t[0]),(t,e)=>Ee(t)?C(t,r=>r?e.onTrue():e.onFalse()):t?e.onTrue():e.onFalse()),Hr=C(Yn,t=>mp(t)),mp=t=>ce(or(t)),Zn=t=>{let e=new ct(To);return e.effect_instruction_i0=wS(Qn),e.effect_instruction_i1=()=>t,e},Uw=t=>lp(t,function(){let e=new ct(To);return e.effect_instruction_i0=wS(Qn),e.effect_instruction_i1=r=>ep(r)?rt(()=>this.effect_instruction_i0(Zn)):rt(()=>this.effect_instruction_i0(Dn)),e}),eo=d(2,(t,e)=>$e(r=>C(Xe(r(t)),n=>iC(e,n)))),A=d(2,(t,e)=>C(t,r=>D(()=>e(r)))),dp=d(2,(t,e)=>kt(t,{onFailure:r=>ar(()=>e.onFailure(r)),onSuccess:r=>D(()=>e.onSuccess(r))})),Zi=d(2,(t,e)=>qe(t,{onFailure:r=>{let n=Fn(r);switch(n._tag){case"Left":return ar(()=>e(n.left));case"Right":return ce(n.right)}},onSuccess:v})),Bm=d(2,(t,e)=>Ht(t,r=>Gm(r)?Q:e(r.effect_instruction_i0))),Ht=d(2,(t,e)=>$e(r=>qe(r(t),{onFailure:n=>{let o=ge(n);return qe(e(o),{onFailure:i=>ge(He(n,i)),onSuccess:()=>o})},onSuccess:n=>{let o=ve(n);return he(e(o),o)}}))),vr=d(2,(t,e)=>Ht(t,va({onFailure:r=>fa(r)?Ue(e(ru(r))):Q,onSuccess:()=>Q}))),da=d(2,(t,e)=>o6(t,e,v)),xa=t=>$S(t,B),$S=d(2,(t,e)=>kt(t,{onFailure:r=>Ko(e(r)),onSuccess:v})),zw=Oy,su=ae((t,e)=>v(e.runtimeFlags)),v=t=>{let e=new wm(ot);return e.effect_instruction_i0=t,e},U=t=>{let e=new ct(Gs);return e.commit=t,e},D=t=>{let e=new ct(Eh);return e.effect_instruction_i0=t,e},Ut=d(t=>t.length===3||t.length===2&&!(Ai(t[1])&&"onlyEffect"in t[1]),(t,e)=>C(t,r=>{let n=typeof e=="function"?e(r):e;return Ee(n)?ke(n,r):ty(n)?iu(o=>{n.then(i=>o(v(r)),i=>o(oe(new Yo(i))))}):v(r)})),Wm=t=>ae(e=>{let r=e.getFiberRef(up),n=E(r,Ne(()=>e.scope()));return t(Ye(up,b(n)))}),o6=d(3,(t,e,r)=>qe(t,{onFailure:n=>ip(n).length>0?ce(Pl(Dw(n))):e(),onSuccess:r})),Dn=t=>{let e=new ct(To);return e.effect_instruction_i0=AS(Qn),e.effect_instruction_i1=()=>t,e},$e=t=>lp(t,function(){let e=new ct(To);return e.effect_instruction_i0=AS(Qn),e.effect_instruction_i1=r=>ep(r)?rt(()=>this.effect_instruction_i0(Zn)):rt(()=>this.effect_instruction_i0(Dn)),e}),Q=v(void 0);var es=t=>{let e=new ct(To);return e.effect_instruction_i0=t,e.effect_instruction_i1=void 0,e},ts=d(2,(t,e)=>C(e,r=>r?E(t,A(b)):v(k()))),au=t=>{let e=new ct(Ic);return e.effect_instruction_i0=t.while,e.effect_instruction_i1=t.body,e.effect_instruction_i2=t.step,e},qw=function(){let t=arguments.length===1?arguments[0]:arguments[1].bind(arguments[0]);return U(()=>{let e=new ct(Js);return e.effect_instruction_i0=t(E),e})},jw=d(2,(t,e)=>Ye(t,yp,e)),Gw=d(2,(t,e)=>Ye(t,cu,e)),Hm=d(2,(t,e)=>{let r=new ct(To);return r.effect_instruction_i0=e,r.effect_instruction_i1=()=>t,r}),Jw=d(2,(t,e)=>Ye(t,ya,e)),Vw=d(2,(t,e)=>Ye(t,$o,e)),to=t=>{let e=new ct(Pc);return typeof t?.priority<"u"?tC(e,t.priority):e},ga=d(2,(t,e)=>C(t,r=>A(e,n=>[r,n])));var Ea=d(2,(t,e)=>C(t,r=>ke(e,r))),he=d(2,(t,e)=>C(t,()=>e)),ro=d(3,(t,e,r)=>C(t,n=>A(e,o=>r(n,o)))),rs=pp(()=>{let t=setInterval(()=>{},2147483647);return D(()=>clearInterval(t))}),ns=t=>C(Yn,e=>E(t,_r(e))),_r=d(2,(t,e)=>C(t.interruptAsFork(e),()=>t.await)),Kw={_tag:"All",syslog:0,label:"ALL",ordinal:Number.MIN_SAFE_INTEGER,pipe(){return R(this,arguments)}},Qw={_tag:"Fatal",syslog:2,label:"FATAL",ordinal:5e4,pipe(){return R(this,arguments)}},Xw={_tag:"Error",syslog:3,label:"ERROR",ordinal:4e4,pipe(){return R(this,arguments)}},$w={_tag:"Warning",syslog:4,label:"WARN",ordinal:3e4,pipe(){return R(this,arguments)}},YS={_tag:"Info",syslog:6,label:"INFO",ordinal:2e4,pipe(){return R(this,arguments)}},ZS={_tag:"Debug",syslog:7,label:"DEBUG",ordinal:1e4,pipe(){return R(this,arguments)}},Yw={_tag:"Trace",syslog:7,label:"TRACE",ordinal:0,pipe(){return R(this,arguments)}},Zw={_tag:"None",syslog:7,label:"OFF",ordinal:Number.MAX_SAFE_INTEGER,pipe(){return R(this,arguments)}};var i6="effect/FiberRef",eA=Symbol.for(i6),s6={_A:t=>t},Or=t=>ae(e=>ve(e.getFiberRef(t)));var Tt=d(2,(t,e)=>C(Or(t),e)),Qi=d(2,(t,e)=>tA(t,()=>[void 0,e]));var tA=d(2,(t,e)=>ae(r=>{let[n,o]=e(r.getFiberRef(t));return r.setFiberRef(t,o),v(n)}));var a6="effect/RequestResolver",rA=Symbol.for(a6),c6={_A:t=>t,_R:t=>t},Nw=class t{runAll;target;[rA]=c6;constructor(e,r){this.runAll=e,this.target=r}[H](){return re(this,this.target?L(this.target):Dc(this))}[W](e){return this.target?u6(e)&&I(this.target,e.target):this===e}identified(...e){return new t(this.runAll,nr(e))}pipe(){return R(this,arguments)}},u6=t=>T(t,rA);var Ye=d(3,(t,e,r)=>Im(Ea(Or(e),Qi(e,r)),()=>t,n=>Qi(e,n))),vt=d(3,(t,e,r)=>Tt(e,n=>Ye(t,e,r(n)))),Ge=(t,e)=>os(t,{differ:fm(),fork:e?.fork??B,join:e?.join}),eC=t=>{let e=yS();return os(t,{differ:e,fork:e.empty})},l6=t=>{let e=SS(fm());return os(t,{differ:e,fork:e.empty})},xp=t=>{let e=ES();return os(t,{differ:e,fork:e.empty})},os=(t,e)=>({...Po,[eA]:s6,initial:t,commit(){return Or(this)},diff:(n,o)=>e.differ.diff(n,o),combine:(n,o)=>e.differ.combine(n,o),patch:n=>o=>e.differ.patch(n,o),fork:e.fork,join:e.join??((n,o)=>o)}),nA=t=>os(t,{differ:DS,fork:DS.empty}),Vt=J(Symbol.for("effect/FiberRef/currentContext"),()=>xp(Dt())),no=J(Symbol.for("effect/FiberRef/currentSchedulingPriority"),()=>Ge(0)),gp=J(Symbol.for("effect/FiberRef/currentMaxOpsBeforeYield"),()=>Ge(2048)),oo=J(Symbol.for("effect/FiberRef/currentLogAnnotation"),()=>Ge(ra())),Um=J(Symbol.for("effect/FiberRef/currentLogLevel"),()=>Ge(YS)),Ep=J(Symbol.for("effect/FiberRef/currentLogSpan"),()=>Ge(Kn())),tC=d(2,(t,e)=>Ye(t,no,e)),oA=d(2,(t,e)=>Ye(t,gp,e)),yp=J(Symbol.for("effect/FiberRef/currentConcurrency"),()=>Ge("unbounded")),cu=J(Symbol.for("effect/FiberRef/currentRequestBatching"),()=>Ge(!0)),uu=J(Symbol.for("effect/FiberRef/currentUnhandledErrorLogLevel"),()=>Ge(b(ZS))),iA=d(2,(t,e)=>Ye(t,uu,e)),io=J(Symbol.for("effect/FiberRef/currentMetricLabels"),()=>l6(Lr())),sA=Or(io),up=J(Symbol.for("effect/FiberRef/currentForkScopeOverride"),()=>Ge(k(),{fork:()=>k(),join:(t,e)=>t})),is=J(Symbol.for("effect/FiberRef/currentInterruptedCause"),()=>Ge(un,{fork:()=>un,join:(t,e)=>t})),ya=J(Symbol.for("effect/FiberRef/currentTracerEnabled"),()=>Ge(!0)),$o=J(Symbol.for("effect/FiberRef/currentTracerTiming"),()=>Ge(!0)),Sa=J(Symbol.for("effect/FiberRef/currentTracerSpanAnnotations"),()=>Ge(ra())),Sp=J(Symbol.for("effect/FiberRef/currentTracerSpanLinks"),()=>Ge(mt())),zm=Symbol.for("effect/Scope"),qm=Symbol.for("effect/CloseableScope"),Cp=(t,e)=>t.addFinalizer(()=>Ue(e)),ss=(t,e)=>t.addFinalizer(e),Ca=(t,e)=>t.close(e),ba=(t,e)=>t.fork(e),aA=t=>cA(B)(t),cA=d(2,(t,e)=>{let r=E(t,km,ze(e));switch(r._tag){case"None":return E(ip(t),Qs,Se({onNone:()=>{let n=ne(ru(t)).flatMap(o=>ne(cS(o)).map(i=>`#${i}`));return new lA(n?`Interrupted by fibers: ${n.join(", ")}`:void 0)},onSome:B}));case"Some":return r.value}}),bp=function(){class t extends globalThis.Error{commit(){return oe(this)}toJSON(){return{...this}}[ee](){return this.toString!==globalThis.Error.prototype.toString?this.stack?`${this.toString()}
${this.stack.split(`
`).slice(1).join(`
`)}`:this.toString():"Bun"in globalThis?Vi(On(this),{renderErrorCause:!0}):this}}return Object.assign(t.prototype,cy),t}(),ka=(t,e)=>{class r extends bp{_tag=e}return Object.assign(r.prototype,t),r.prototype.name=e,r},GS=Symbol.for("effect/Cause/errors/RuntimeException"),uA=ka({[GS]:GS},"RuntimeException");var Rm=Symbol.for("effect/Cause/errors/InterruptedException"),lA=ka({[Rm]:Rm},"InterruptedException"),rC=t=>T(t,Rm),JS=Symbol.for("effect/Cause/errors/IllegalArgument"),lu=ka({[JS]:JS},"IllegalArgumentException");var Mm=Symbol.for("effect/Cause/errors/NoSuchElement"),Fr=ka({[Mm]:Mm},"NoSuchElementException"),nC=t=>T(t,Mm),VS=Symbol.for("effect/Cause/errors/InvalidPubSubCapacityException"),moe=ka({[VS]:VS},"InvalidPubSubCapacityException"),KS=Symbol.for("effect/Cause/errors/ExceededCapacityException"),p6=ka({[KS]:KS},"ExceededCapacityException");var QS=Symbol.for("effect/Cause/errors/Timeout"),pA=ka({[QS]:QS},"TimeoutException"),fA=t=>new pA(`Operation timed out before the specified duration of '${jy(t)}' elapsed`);var XS=Symbol.for("effect/Cause/errors/UnknownException"),Yo=function(){class t extends bp{cause;_tag="UnknownException";error;constructor(r,n){super(n??"An unknown error occurred",{cause:r}),this.cause=r,this.error=r}}return Object.assign(t.prototype,{[XS]:XS,name:"UnknownException"}),t}();var kp=t=>Ee(t)&&"_tag"in t&&(t._tag==="Success"||t._tag==="Failure"),jm=t=>t._tag==="Failure",Gm=t=>t._tag==="Success";var hA=d(2,(t,e)=>{switch(t._tag){case nt:return ge(t.effect_instruction_i0);case ot:return ve(e)}}),vp=t=>hA(t,void 0);var Zo=(t,e)=>f6(t,e?.parallel?ir:He),ei=t=>ge(ht(t));var pu=t=>ge(On(t)),ge=t=>{let e=new Dm(nt);return e.effect_instruction_i0=t,e},mA=d(2,(t,e)=>{switch(t._tag){case nt:return ge(t.effect_instruction_i0);case ot:return e(t.effect_instruction_i0)}});var dA=t=>E(t,mA(B));var Jm=t=>ge(or(t)),cp=d(2,(t,e)=>{switch(t._tag){case nt:return ge(t.effect_instruction_i0);case ot:return ve(e(t.effect_instruction_i0))}}),xA=d(2,(t,{onFailure:e,onSuccess:r})=>{switch(t._tag){case nt:return ge(E(t.effect_instruction_i0,_m(e)));case ot:return ve(r(t.effect_instruction_i0))}});var va=d(2,(t,{onFailure:e,onSuccess:r})=>{switch(t._tag){case nt:return e(t.effect_instruction_i0);case ot:return r(t.effect_instruction_i0)}}),_a=d(2,(t,{onFailure:e,onSuccess:r})=>{switch(t._tag){case nt:return e(t.effect_instruction_i0);case ot:return r(t.effect_instruction_i0)}}),ve=t=>{let e=new wm(ot);return e.effect_instruction_i0=t,e},Kt=ve(void 0),gA=d(2,(t,e)=>Oa(t,e,{onSuccess:(r,n)=>[r,n],onFailure:He}));var EA=d(2,(t,e)=>Oa(t,e,{onSuccess:(r,n)=>n,onFailure:He}));var Oa=d(3,(t,e,{onFailure:r,onSuccess:n})=>{switch(t._tag){case nt:switch(e._tag){case ot:return ge(t.effect_instruction_i0);case nt:return ge(r(t.effect_instruction_i0,e.effect_instruction_i0))}case ot:switch(e._tag){case ot:return ve(n(t.effect_instruction_i0,e.effect_instruction_i0));case nt:return ge(e.effect_instruction_i0)}}}),f6=(t,e)=>{let r=nr(t);return St(r)?E(Rt(r),xr(E(Ct(r),cp(xe)),(n,o)=>E(n,Oa(o,{onSuccess:(i,s)=>E(i,Be(s)),onFailure:e}))),cp(Br),cp(n=>yr(n)),b):k()},as=t=>({...Po,[Mw]:Tw,state:an(Iw([])),commit(){return ut(this)},blockingOn:t}),It=()=>C(Yn,t=>yA(t)),yA=t=>D(()=>as(t)),ut=t=>pp(e=>{let r=We(t.state);switch(r._tag){case nu:return e(r.effect);case ma:return r.joiners.push(e),h6(t,e)}},t.blockingOn),oC=d(2,(t,e)=>eo(e,t)),fu=d(2,(t,e)=>D(()=>{let r=We(t.state);switch(r._tag){case nu:return!1;case ma:{Sr(t.state,qS(e));for(let n=0,o=r.joiners.length;n<o;n++)r.joiners[n](e);return!0}}})),iC=d(2,(t,e)=>fu(t,e));var cs=d(2,(t,e)=>fu(t,ce(e)));var SA=t=>C(Yn,e=>fu(t,mp(e))),Vm=d(2,(t,e)=>fu(t,mp(e))),CA=t=>D(()=>We(t.state)._tag===nu);var us=d(2,(t,e)=>fu(t,v(e)));var Fa=(t,e)=>{let r=We(t.state);if(r._tag===ma){Sr(t.state,qS(e));for(let n=0,o=r.joiners.length;n<o;n++)r.joiners[n](e)}},h6=(t,e)=>D(()=>{let r=We(t.state);if(r._tag===ma){let n=r.joiners.indexOf(e);n>=0&&r.joiners.splice(n,1)}}),m6=ae(t=>ve(t.currentContext)),Ur=()=>m6;var ln=t=>C(Ur(),t),zr=d(2,(t,e)=>Ye(Vt,e)(t)),Km=d(2,(t,e)=>vt(Vt,r=>Er(r,e))(t)),Da=d(2,(t,e)=>ln(r=>zr(t,e(r)))),Qm=t=>{let e=t.currentSpan;return e!==void 0&&e._tag==="Span"?b(e):k()},d6={_tag:"Span",spanId:"noop",traceId:"noop",name:"noop",sampled:!1,parent:k(),context:Dt(),status:{_tag:"Ended",startTime:BigInt(0),endTime:BigInt(0),exit:Kt},attributes:new Map,links:[],kind:"internal",attribute(){},event(){},end(){}},bA=t=>{let e=Object.create(d6);return e.name=t,e};var Qt=It;var Ie=ut;var kA=iC;var Xm=cs;var vA=SA;var _p=CA;var ur=us;var sC=as;var $m=jm;var _A=Zo,Ym=ei;var hu=pu,Pt=ge;var OA=dA;var aC=cp,cC=xA;var Dr=va;var Nt=ve,mu=Kt;var uC=gA;var Aa=EA;var FA=Symbol.for("effect/MutableHashMap"),x6={[FA]:FA,[Symbol.iterator](){return new lC(this)},toString(){return le(this.toJSON())},toJSON(){return{_id:"MutableHashMap",values:Array.from(this).map(ue)}},[ee](){return this.toJSON()},pipe(){return R(this,arguments)}},lC=class t{self;referentialIterator;bucketIterator;constructor(e){this.self=e,this.referentialIterator=e.referential[Symbol.iterator]()}next(){if(this.bucketIterator!==void 0)return this.bucketIterator.next();let e=this.referentialIterator.next();return e.done?(this.bucketIterator=new pC(this.self.buckets.values()),this.next()):e}[Symbol.iterator](){return new t(this.self)}},pC=class{backing;constructor(e){this.backing=e}currentBucket;next(){if(this.currentBucket===void 0){let r=this.backing.next();if(r.done)return r;this.currentBucket=r.value[Symbol.iterator]()}let e=this.currentBucket.next();return e.done?(this.currentBucket=void 0,this.next()):e}},Ra=()=>{let t=Object.create(x6);return t.referential=new Map,t.buckets=new Map,t.bucketsSize=0,t};var dt=d(2,(t,e)=>{if(wc(e)===!1)return t.referential.has(e)?b(t.referential.get(e)):k();let r=e[H](),n=t.buckets.get(r);return n===void 0?k():g6(t,n,e)});var g6=(t,e,r,n=!1)=>{for(let o=0,i=e.length;o<i;o++)if(r[W](e[o][0])){let s=e[o][1];return n&&(e.splice(o,1),t.bucketsSize--),b(s)}return k()},An=d(2,(t,e)=>q(dt(t,e))),wr=d(3,(t,e,r)=>{if(wc(e)===!1)return t.referential.set(e,r),t;let n=e[H](),o=t.buckets.get(n);return o===void 0?(t.buckets.set(n,[[e,r]]),t.bucketsSize++,t):(DA(t,o,e),o.push([e,r]),t.bucketsSize++,t)}),DA=(t,e,r)=>{for(let n=0,o=e.length;n<o;n++)if(r[W](e[n][0])){e.splice(n,1),t.bucketsSize--;return}};var Ma=d(2,(t,e)=>{if(wc(e)===!1)return t.referential.delete(e),t;let r=e[H](),n=t.buckets.get(r);return n===void 0||(DA(t,n,e),n.length===0&&t.buckets.delete(r)),t});var Zm=t=>t.referential.size+t.bucketsSize;var wA=Symbol.for("effect/MutableList"),E6={[wA]:wA,[Symbol.iterator](){let t=!1,e=this.head;return{next(){if(t)return this.return();if(e==null)return t=!0,this.return();let r=e.value;return e=e.next,{done:t,value:r}},return(r){return t||(t=!0),{done:!0,value:r}}}},toString(){return le(this.toJSON())},toJSON(){return{_id:"MutableList",values:Array.from(this).map(ue)}},[ee](){return this.toJSON()},pipe(){return R(this,arguments)}},y6=t=>({value:t,removed:!1,prev:void 0,next:void 0}),AA=()=>{let t=Object.create(E6);return t.head=void 0,t.tail=void 0,t._length=0,t};var fC=t=>td(t)===0,td=t=>t._length;var RA=d(2,(t,e)=>{let r=y6(e);return t.head===void 0&&(t.head=r),t.tail===void 0||(t.tail.next=r,r.prev=t.tail),t.tail=r,t._length+=1,t}),MA=t=>{let e=t.head;if(e!==void 0)return S6(t,e),e.value};var S6=(t,e)=>{e.removed||(e.removed=!0,e.prev!==void 0&&e.next!==void 0?(e.prev.next=e.next,e.next.prev=e.prev):e.prev!==void 0?(t.tail=e.prev,e.prev.next=void 0):e.next!==void 0?(t.head=e.next,e.next.prev=void 0):(t.tail=void 0,t.head=void 0),t._length>0&&(t._length-=1))};var IA=Symbol.for("effect/MutableQueue"),Ot=Symbol.for("effect/mutable/MutableQueue/Empty"),C6={[IA]:IA,[Symbol.iterator](){return Array.from(this.queue)[Symbol.iterator]()},toString(){return le(this.toJSON())},toJSON(){return{_id:"MutableQueue",values:Array.from(this).map(ue)}},[ee](){return this.toJSON()},pipe(){return R(this,arguments)}},PA=t=>{let e=Object.create(C6);return e.queue=AA(),e.capacity=t,e},rd=t=>PA(t),du=()=>PA(void 0),nd=t=>td(t.queue),od=t=>fC(t.queue);var NA=t=>t.capacity===void 0?1/0:t.capacity,ls=d(2,(t,e)=>{let r=td(t.queue);return t.capacity!==void 0&&r===t.capacity?!1:(RA(e)(t.queue),!0)}),hC=d(2,(t,e)=>{let r=e[Symbol.iterator](),n,o=mt(),i=!0;for(;i&&(n=r.next())&&!n.done;)i=ls(n.value)(t);for(;n!=null&&!n.done;)o=Be(n.value)(o),n=r.next();return Br(o)}),Rn=d(2,(t,e)=>fC(t.queue)?e:MA(t.queue)),id=d(2,(t,e)=>{let r=mt(),n=0;for(;n<e;){let o=Rn(Ot)(t);if(o===Ot)break;r=Be(o)(r),n+=1}return Br(r)});var b6="effect/Clock",dC=Symbol.for(b6),lr=st("effect/Clock"),k6=2**31-1,LA={unsafeSchedule(t,e){let r=Gn(e);if(r>k6)return en;let n=!1,o=setTimeout(()=>{n=!0,t()},r);return()=>(clearTimeout(o),!n)}},BA=function(){let t=BigInt(1e6);if(typeof performance>"u")return()=>BigInt(Date.now())*t;if(typeof performance.timeOrigin=="number"&&performance.timeOrigin===0)return()=>BigInt(Math.round(performance.now()*1e6));let e=BigInt(Date.now())*t-BigInt(Math.round(performance.now()*1e6));return()=>e+BigInt(Math.round(performance.now()*1e6))}(),v6=function(){let t=typeof process=="object"&&"hrtime"in process&&typeof process.hrtime.bigint=="function"?process.hrtime:void 0;if(!t)return BA;let e=BA()-t.bigint();return()=>e+t.bigint()}(),xC=class{[dC]=dC;unsafeCurrentTimeMillis(){return Date.now()}unsafeCurrentTimeNanos(){return v6()}currentTimeMillis=D(()=>this.unsafeCurrentTimeMillis());currentTimeNanos=D(()=>this.unsafeCurrentTimeNanos());scheduler(){return v(LA)}sleep(e){return sr(r=>{let n=LA.unsafeSchedule(()=>r(Q),e);return Ue(D(n))})}},gC=()=>new xC;var yC="And",SC="Or",CC="InvalidData",bC="MissingData",kC="SourceUnavailable",vC="Unsupported";var O6="effect/ConfigError",WA=Symbol.for(O6),xu={_tag:"ConfigError",[WA]:WA},_C=(t,e)=>{let r=Object.create(xu);return r._op=yC,r.left=t,r.right=e,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} and ${this.right}`}}),r},OC=(t,e)=>{let r=Object.create(xu);return r._op=SC,r.left=t,r.right=e,Object.defineProperty(r,"toString",{enumerable:!1,value(){return`${this.left} or ${this.right}`}}),r},F6=(t,e,r={pathDelim:"."})=>{let n=Object.create(xu);return n._op=CC,n.path=t,n.message=e,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Invalid data at ${E(this.path,Bo(r.pathDelim))}: "${this.message}")`}}),n},ti=(t,e,r={pathDelim:"."})=>{let n=Object.create(xu);return n._op=bC,n.path=t,n.message=e,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Missing data at ${E(this.path,Bo(r.pathDelim))}: "${this.message}")`}}),n},D6=(t,e,r,n={pathDelim:"."})=>{let o=Object.create(xu);return o._op=kC,o.path=t,o.message=e,o.cause=r,Object.defineProperty(o,"toString",{enumerable:!1,value(){return`(Source unavailable at ${E(this.path,Bo(n.pathDelim))}: "${this.message}")`}}),o},w6=(t,e,r={pathDelim:"."})=>{let n=Object.create(xu);return n._op=vC,n.path=t,n.message=e,Object.defineProperty(n,"toString",{enumerable:!1,value(){return`(Unsupported operation at ${E(this.path,Bo(r.pathDelim))}: "${this.message}")`}}),n};var ps=d(2,(t,e)=>{switch(t._op){case yC:return _C(ps(t.left,e),ps(t.right,e));case SC:return OC(ps(t.left,e),ps(t.right,e));case CC:return F6([...e,...t.path],t.message);case bC:return ti([...e,...t.path],t.message);case kC:return D6([...e,...t.path],t.message,t.cause);case vC:return w6([...e,...t.path],t.message)}});var UA={_tag:"Empty"};var sd=d(2,(t,e)=>{let r=Kl(e),n=t;for(;Vl(r);){let o=r.head;switch(o._tag){case"Empty":{r=r.tail;break}case"AndThen":{r=qo(o.first,qo(o.second,r.tail));break}case"MapName":{n=kn(n,o.f),r=r.tail;break}case"Nested":{n=Lc(n,o.name),r=r.tail;break}case"Unnested":{if(E(Pi(n),Ey(o.name)))n=Un(n),r=r.tail;else return Pe(ti(n,`Expected ${o.name} to be in path in ConfigProvider#unnested`));break}}}return be(n)});var zA="Constant",qA="Fail",jA="Fallback",GA="Described",JA="Lazy",VA="MapOrFail",KA="Nested",QA="Primitive",XA="Sequence",$A="HashMap",YA="ZipWith";var ad=(t,e)=>[...t,...e],M6="effect/ConfigProvider",ZA=Symbol.for(M6),gu=st("effect/ConfigProvider"),T6="effect/ConfigProviderFlat",eR=Symbol.for(T6),I6=t=>({[ZA]:ZA,pipe(){return R(this,arguments)},...t}),P6=t=>({[eR]:eR,patch:t.patch,load:(e,r,n=!0)=>t.load(e,r,n),enumerateChildren:t.enumerateChildren}),N6=t=>I6({load:e=>C(pn(t,Lr(),e,!1),r=>Se(Pi(r),{onNone:()=>oe(ti(Lr(),`Expected a single value having structure: ${e}`)),onSome:v})),flattened:t}),tR=t=>{let{pathDelim:e,seqDelim:r}=Object.assign({},{pathDelim:"_",seqDelim:","},t),n=u=>E(u,Bo(e)),o=u=>u.split(e),i=()=>typeof process<"u"&&"env"in process&&typeof process.env=="object"?process.env:{};return N6(P6({load:(u,f,p=!0)=>{let x=n(u),m=i(),c=x in m?b(m[x]):k();return E(c,Zi(()=>ti(u,`Expected ${x} to exist in the process context`)),C(l=>U6(l,u,f,r,p)))},enumerateChildren:u=>D(()=>{let f=i(),m=Object.keys(f).map(c=>o(c.toUpperCase())).filter(c=>{for(let l=0;l<u.length;l++){let h=E(u,Cy(l)),g=c[l];if(g===void 0||h!==g)return!1}return!0}).flatMap(c=>c.slice(u.length,u.length+1));return tm(m)}),patch:UA}))};var L6=(t,e,r,n)=>{let o=Fy(r.length,u=>u>=n.length?k():b([t(u),u+1])),i=Fy(n.length,u=>u>=r.length?k():b([e(u),u+1])),s=ad(r,o),a=ad(n,i);return[s,a]},B6=(t,e)=>{let r=e;if(r._tag==="Nested"){let n=t.slice();for(;r._tag==="Nested";)n.push(r.name),r=r.config;return n}return t},pn=(t,e,r,n)=>{let o=r;switch(o._tag){case zA:return v(rr(o.value));case GA:return U(()=>pn(t,e,o.config,n));case qA:return oe(ti(e,o.message));case jA:return E(U(()=>pn(t,e,o.first,n)),Wr(i=>o.condition(i)?E(pn(t,e,o.second,n),Wr(s=>oe(OC(i,s)))):oe(i)));case JA:return U(()=>pn(t,e,o.config(),n));case VA:return U(()=>E(pn(t,e,o.original,n),C(Mt(i=>E(o.mapOrFail(i),Zi(ps(B6(e,o.original))))))));case KA:return U(()=>pn(t,ad(e,rr(o.name)),o.config,n));case QA:return E(sd(e,t.patch),C(i=>E(t.load(i,o,n),C(s=>{if(s.length===0){let a=E(Ah(i),Ne(()=>"<n/a>"));return oe(ti([],`Expected ${o.description} with name ${a}`))}return v(s)}))));case XA:return E(sd(e,t.patch),C(i=>E(t.enumerateChildren(i),C(q6),C(s=>s.length===0?U(()=>A(pn(t,e,o.config,!0),rr)):E(Mt(s,a=>pn(t,Sy(e,`[${a}]`),o.config,!0)),A(a=>{let u=Rh(a);return u.length===0?rr(Lr()):rr(u)}))))));case $A:return U(()=>E(sd(e,t.patch),C(i=>E(t.enumerateChildren(i),C(s=>E(s,Mt(a=>pn(t,ad(i,rr(a)),o.valueConfig,n)),A(a=>a.length===0?rr(ra()):E(z6(a),kn(u=>WD(vy(ne(s),u)))))))))));case YA:return U(()=>E(pn(t,e,o.left,n),$n,C(i=>E(pn(t,e,o.right,n),$n,C(s=>{if(Lo(i)&&Lo(s))return oe(_C(i.left,s.left));if(Lo(i)&&Vs(s))return oe(i.left);if(Vs(i)&&Lo(s))return oe(s.left);if(Vs(i)&&Vs(s)){let a=E(e,Bo(".")),u=W6(e,a),[f,p]=L6(u,u,E(i.right,kn(be)),E(s.right,kn(be)));return E(f,vy(p),Mt(([x,m])=>E(ga(x,m),A(([c,l])=>o.zip(c,l)))))}throw new Error("BUG: ConfigProvider.fromFlatLoop - please report an issue at https://github.com/Effect-TS/effect/issues")})))))}},W6=(t,e)=>r=>Pe(ti(t,`The element at index ${r} in a sequence at path "${e}" was missing`));var H6=(t,e)=>t.split(new RegExp(`\\s*${wF(e)}\\s*`)),U6=(t,e,r,n,o)=>o?E(H6(t,n),Mt(i=>r.parse(i.trim())),Zi(ps(e))):E(r.parse(t),dp({onFailure:ps(e),onSuccess:rr})),z6=t=>Object.keys(t[0]).map(e=>t.map(r=>r[e])),q6=t=>E(Mt(t,G6),dp({onFailure:()=>Lr(),onSuccess:Ks(Ni)}),$n,A(Fh));var j6=/^(\[(\d+)\])$/,G6=t=>{let e=t.match(j6);if(e!==null){let r=e[2];return E(r!==void 0&&r.length>0?b(r):k(),Nr(J6))}return k()};var J6=t=>{let e=Number.parseInt(t);return Number.isNaN(e)?k():b(e)};var rR=Symbol.for("effect/Console"),ri=st("effect/Console"),nR={[rR]:rR,assert(t,...e){return D(()=>{console.assert(t,...e)})},clear:D(()=>{console.clear()}),count(t){return D(()=>{console.count(t)})},countReset(t){return D(()=>{console.countReset(t)})},debug(...t){return D(()=>{console.debug(...t)})},dir(t,e){return D(()=>{console.dir(t,e)})},dirxml(...t){return D(()=>{console.dirxml(...t)})},error(...t){return D(()=>{console.error(...t)})},group(t){return t?.collapsed?D(()=>console.groupCollapsed(t?.label)):D(()=>console.group(t?.label))},groupEnd:D(()=>{console.groupEnd()}),info(...t){return D(()=>{console.info(...t)})},log(...t){return D(()=>{console.log(...t)})},table(t,e){return D(()=>{console.table(t,e)})},time(t){return D(()=>console.time(t))},timeEnd(t){return D(()=>console.timeEnd(t))},timeLog(t,...e){return D(()=>{console.timeLog(t,...e)})},trace(...t){return D(()=>{console.trace(...t)})},warn(...t){return D(()=>{console.warn(...t)})},unsafe:console};var K6="effect/Random",iR=Symbol.for(K6),Eu=st("effect/Random"),FC=class{seed;[iR]=iR;PRNG;constructor(e){this.seed=e,this.PRNG=new ph(e)}get next(){return D(()=>this.PRNG.number())}get nextBoolean(){return A(this.next,e=>e>.5)}get nextInt(){return D(()=>this.PRNG.integer(Number.MAX_SAFE_INTEGER))}nextRange(e,r){return A(this.next,n=>(r-e)*n+e)}nextIntBetween(e,r){return D(()=>this.PRNG.integer(r-e)+e)}shuffle(e){return Q6(e,r=>this.nextIntBetween(0,r))}},Q6=(t,e)=>U(()=>E(D(()=>Array.from(t)),C(r=>{let n=[];for(let o=r.length;o>=2;o=o-1)n.push(o);return E(n,kr(o=>E(e(o),A(i=>X6(r,o-1,i)))),ke(nr(r)))}))),X6=(t,e,r)=>{let n=t[e];return t[e]=t[r],t[r]=n,t},sR=t=>new FC(L(t));var aR=Symbol.for("effect/Tracer"),Y6=t=>({[aR]:aR,...t}),ni=st("effect/Tracer"),pr=st("effect/ParentSpan"),cR=function(){let t="abcdef0123456789",e=t.length;return function(r){let n="";for(let o=0;o<r;o++)n+=t.charAt(Math.floor(Math.random()*e));return n}}(),DC=class{name;parent;context;links;startTime;kind;_tag="Span";spanId;traceId="native";sampled=!0;status;attributes;events=[];constructor(e,r,n,o,i,s){this.name=e,this.parent=r,this.context=n,this.links=o,this.startTime=i,this.kind=s,this.status={_tag:"Started",startTime:i},this.attributes=new Map,this.traceId=r._tag==="Some"?r.value.traceId:cR(32),this.spanId=cR(16)}end(e,r){this.status={_tag:"Ended",endTime:e,exit:r,startTime:this.status.startTime}}attribute(e,r){this.attributes.set(e,r)}event(e,r,n){this.events.push([e,r,n??{}])}},uR=Y6({span:(t,e,r,n,o,i)=>new DC(t,e,r,n,o,i),context:t=>t()});var qr=t=>{if(t?.captureStackTrace===!1)return t;if(t?.captureStackTrace!==void 0&&typeof t.captureStackTrace!="boolean")return t;let e=Error.stackTraceLimit;Error.stackTraceLimit=3;let r=new Error;Error.stackTraceLimit=e;let n=!1;return{...t,captureStackTrace:()=>{if(n!==!1)return n;if(r.stack!==void 0){let o=r.stack.split(`
`);if(o[3]!==void 0)return n=o[3].trim(),n}}}};var Z6=E(Dt(),Le(lr,gC()),Le(ri,nR),Le(Eu,sR(Math.random())),Le(gu,tR()),Le(ni,uR)),Ze=J(Symbol.for("effect/DefaultServices/currentServices"),()=>xp(Z6)),lR=t=>{let e=bt(t);return Fp(r=>r.sleep(e))},cd=t=>ae(e=>t(e.currentDefaultServices)),Fp=t=>cd(e=>t(e.unsafeMap.get(lr.key))),pR=Fp(t=>t.currentTimeMillis),fR=Fp(t=>t.currentTimeNanos),hR=d(2,(t,e)=>vt(Ze,Le(lr,e))(t)),mR=d(2,(t,e)=>vt(Ze,Le(gu,e))(t)),dR=t=>cd(e=>t(e.unsafeMap.get(gu.key)));var ud=t=>cd(e=>t(e.unsafeMap.get(Eu.key))),xR=d(2,(t,e)=>vt(Ze,Le(Eu,e))(t));var ld=t=>cd(e=>t(e.unsafeMap.get(ni.key))),gR=d(2,(t,e)=>vt(Ze,Le(ni,e))(t));var Dp=lR,yu=pR,ER=fR,yR=Fp,SR=lr;var Pa={};Di(Pa,{FiberRefsSym:()=>t4,delete:()=>_R,empty:()=>LC,fiberRefs:()=>r4,forkAs:()=>n4,get:()=>xd,getOrDefault:()=>TC,joinAs:()=>IC,setAll:()=>PC,unsafeMake:()=>o4,updateAs:()=>OR,updateManyAs:()=>NC});function AC(t){return new so(t)}function CR(){return AC(new Map)}var fd=Symbol.for("effect/FiberRefs"),so=class{locals;[fd]=fd;constructor(e){this.locals=e}pipe(){return R(this,arguments)}},e4=(t,e,r,n=!1)=>{let o=t,i=e,s=r,a=n,u;for(;u===void 0;)if(jt(i)&&jt(s)){let f=Gt(i)[0],p=Un(i),x=Gt(s)[0],m=Gt(s)[1],c=Un(s);f.startTimeMillis<x.startTimeMillis?(s=c,a=!0):f.startTimeMillis>x.startTimeMillis?i=p:f.id<x.id?(s=c,a=!0):f.id>x.id?i=p:u=[m,a]}else u=[o.initial,!0];return u},hd=d(3,(t,e,r)=>{let n=new Map(t.locals);return r.locals.forEach((o,i)=>{let s=o[0][1];if(!o[0][0][W](e)){if(!n.has(i)){if(I(s,i.initial))return;n.set(i,[[e,i.join(i.initial,s)]]);return}let a=n.get(i),[u,f]=e4(i,a,o);if(f){let p=i.diff(u,s),x=a[0][1],m=i.join(x,i.patch(p)(x));if(!I(x,m)){let c,l=a[0][0];l[W](e)?c=[[l,m],...a.slice(1)]:c=[[e,m],...a],n.set(i,c)}}}}),new so(n)}),md=d(2,(t,e)=>{let r=new Map;return bR(t,r,e),new so(r)}),bR=(t,e,r)=>{t.locals.forEach((n,o)=>{let i=n[0][1],s=o.patch(o.fork)(i);I(i,s)?e.set(o,n):e.set(o,[[r,s],...n])})},RC=t=>tm(t.locals.keys()),kR=t=>kr(RC(t),e=>Qi(e,oi(t,e))),Su=d(2,(t,e)=>{let r=new Map(t.locals);return r.delete(e),new so(r)}),dd=d(2,(t,e)=>t.locals.has(e)?b(Gt(t.locals.get(e))[1]):k()),oi=d(2,(t,e)=>E(dd(t,e),Ne(()=>e.initial))),Ia=d(2,(t,{fiberId:e,fiberRef:r,value:n})=>{if(t.locals.size===0)return new so(new Map([[r,[[e,n]]]]));let o=new Map(t.locals);return wC(o,e,r,n),new so(o)}),wC=(t,e,r,n)=>{let o=t.get(r)??[],i;if(jt(o)){let[s,a]=Gt(o);if(s[W](e)){if(I(a,n))return;i=[[e,n],...o.slice(1)]}else i=[[e,n],...o]}else i=[[e,n]];t.set(r,i)},vR=d(2,(t,{entries:e,forkAs:r})=>{if(t.locals.size===0)return new so(new Map(e));let n=new Map(t.locals);return r!==void 0&&bR(t,n,r),e.forEach(([o,i])=>{i.length===1?wC(n,i[0][0],o,i[0][1]):i.forEach(([s,a])=>{wC(n,s,o,a)})}),new so(n)});var t4=fd,_R=Su;var r4=RC,n4=md,xd=dd,TC=oi,IC=hd,PC=kR,OR=Ia,NC=vR,o4=AC,LC=CR;var i4=Kw,BC=Qw,WC=Xw,HC=$w,UC=YS,zC=ZS,qC=Yw,s4=Zw;var a4=E(Ni,oF(t=>t.ordinal));var FR=dy(a4);var DR=t=>{switch(t){case"All":return i4;case"Debug":return zC;case"Error":return WC;case"Fatal":return BC;case"Info":return UC;case"Trace":return qC;case"None":return s4;case"Warning":return HC}};var wR=(t,e)=>({label:t,startTime:e}),AR=t=>e=>`${e.label.replace(/[\s="]/g,"_")}=${t-e.startTime}ms`;var RR=wR,MR=AR;var TR=Io,JC=Po;var u4=$O;var Mn=class extends u4{};var fs=Symbol.for("effect/Readable");var cie={[fs]:fs,pipe(){return R(this,arguments)}};var gd=Symbol.for("effect/Ref"),QC={_A:t=>t},KC=class extends Mn{ref;commit(){return this.get}[gd]=QC;[fs]=fs;constructor(e){super(),this.ref=e,this.get=D(()=>We(this.ref))}get;modify(e){return D(()=>{let r=We(this.ref),[n,o]=e(r);return r!==o&&Sr(o)(this.ref),n})}},Ed=t=>new KC(an(t)),Na=t=>D(()=>Ed(t)),fn=t=>t.get,ao=d(2,(t,e)=>t.modify(()=>[void 0,e])),IR=d(2,(t,e)=>t.modify(r=>[r,e]));var yd=d(2,(t,e)=>t.modify(e));var wp=d(2,(t,e)=>t.modify(r=>[void 0,e(r)]));var hn=Na,ii=fn,XC=IR;var co=yd;var Ap=ao;var Rp=wp;var PR=ld;var LR="Empty",BR="Add",WR="Remove",HR="Update",UR="AndThen",zR={_tag:LR},Mp=(t,e)=>{let r=new Map(t.locals),n=zR;for(let[o,i]of e.locals.entries()){let s=Gt(i)[1],a=r.get(o);if(a!==void 0){let u=Gt(a)[1];I(u,s)||(n=Cd({_tag:HR,fiberRef:o,patch:o.diff(u,s)})(n))}else n=Cd({_tag:BR,fiberRef:o,value:s})(n);r.delete(o)}for(let[o]of r.entries())n=Cd({_tag:WR,fiberRef:o})(n);return n},Cd=d(2,(t,e)=>({_tag:UR,first:t,second:e})),bd=d(3,(t,e,r)=>{let n=r,o=rr(t);for(;jt(o);){let i=Gt(o),s=Un(o);switch(i._tag){case LR:{o=s;break}case BR:{n=Ia(n,{fiberId:e,fiberRef:i.fiberRef,value:i.value}),o=s;break}case WR:{n=Su(n,i.fiberRef),o=s;break}case HR:{let a=oi(n,i.fiberRef);n=Ia(n,{fiberId:e,fiberRef:i.fiberRef,value:i.fiberRef.patch(i.patch)(a)}),o=s;break}case UR:{o=Lc(i.first)(Lc(i.second)(s));break}}}return n});var jR="effect/MetricLabel",$C=Symbol.for(jR),YC=class{key;value;[$C]=$C;_hash;constructor(e,r){this.key=e,this.value=r,this._hash=ye(jR+this.key+this.value)}[H](){return this._hash}[W](e){return l4(e)&&this.key===e.key&&this.value===e.value}pipe(){return R(this,arguments)}},La=(t,e)=>new YC(t,e),l4=t=>T(t,$C);var GR=d(t=>Ee(t[0]),function(){let t=arguments;return vt(t[0],oo,typeof t[1]=="string"?Jt(t[1],t[2]):e=>Object.entries(t[1]).reduce((r,[n,o])=>Jt(r,n,o),e))}),ku=t=>A(t,b),JR=t=>Zi(t,b),eb=t=>{let e,r;return typeof t=="function"?e=t:(e=t.try,r=t.catch),D(()=>{try{return e()}catch(n){throw Bw(On(r?r(n):new Yo(n)))}})},VR=d(3,(t,e,r)=>Wr(t,n=>T(n,e)&&n[e]===r.failure?r.onFailure(n):oe(n))),KR=d(2,(t,e)=>Xn(t,r=>{let n=Ji(r,o=>tu(o)?b(o):k());switch(n._tag){case"None":return ce(r);case"Some":return e(n.value.defect)}})),QR=d(2,(t,e)=>qe(t,{onFailure:r=>{let n=e(r);switch(n._tag){case"None":return ce(r);case"Some":return n.value}},onSuccess:v})),XR=d(2,(t,e)=>Xn(t,r=>{let n=Ji(r,o=>tu(o)?b(o):k());switch(n._tag){case"None":return ce(r);case"Some":{let o=e(n.value.defect);return o._tag==="Some"?o.value:ce(r)}}})),$R=d(3,(t,e,r)=>fp(t,Ri(e),r)),YR=d(2,(t,e)=>{let r;return fp(t,n=>(r??=Object.keys(e),T(n,"_tag")&&Oc(n._tag)&&r.includes(n._tag)),n=>e[n._tag](n))}),ZR=t=>hp(t,{onFailure:B,onSuccess:()=>un}),uo=yR,eM=uo(v),tM=d(2,(t,e)=>he(Dp(e),t)),_d=t=>ae((e,r)=>t({id:e.id(),status:r,interruptors:ru(e.getFiberRef(is))})),rM=_d(t=>Zs(t.interruptors)>0?Hr:Q),nM=_d(v),vu=t=>Pp(t,Od,Mp),p4=t=>Pp(t,ga(Od,su),([e,r],[n,o])=>[Mp(e,n),cn(r,o)]),oM=v({}),iM=uh(A,C),sM=ch(A),aM=ah(A),cM=d(2,(t,e)=>U(()=>{let r=t[Symbol.iterator](),n=[],o,i=v(!1),s=0;for(;(o=r.next())&&!o.done;){let a=o.value,u=s++;i=C(i,f=>f?(n.push(a),v(!0)):e(a,u))}return A(i,()=>n)})),uM=d(2,(t,e)=>U(()=>{let r=t[Symbol.iterator](),n=[],o,i=v(!0),s=0;for(;(o=r.next())&&!o.done;){let a=o.value,u=s++;i=C(i,f=>A(f?e(a,u):v(!1),p=>(p||n.push(a),p)))}return A(i,()=>n)})),lM=t=>A(Ur(),t),tb=t=>da(t,()=>C(to(),()=>tb(t))),pM=d(2,(t,e)=>A(Mt(t,B),Bc(e))),fM=d(3,(t,e,r)=>Tp(t,e,n=>Xi(()=>r(n)))),hM=d(3,(t,e,r)=>Tp(t,e,()=>Qo(r))),Tp=d(3,(t,e,r)=>C(t,n=>e(n)?v(n):r(n))),mM=d(3,(t,e,r)=>U(()=>e(t)?v(t):oe(r(t)))),dM=d(t=>Ee(t[0]),(t,e,r)=>Tp(t,e,n=>r===void 0?oe(new Fr):ar(()=>r(n)))),xM=d(2,(t,e)=>U(()=>{let r=t[Symbol.iterator](),n=r.next();return n.done?v(k()):gM(r,0,e,n.value)})),gM=(t,e,r,n)=>C(r(n,e),o=>{if(o)return v(b(n));let i=t.next();return i.done?v(k()):gM(t,e+1,r,i.value)}),EM=t=>U(()=>{let e=nr(t);return St(e)?E(Rt(e),xr(Ct(e),(r,n)=>da(r,()=>n))):Xi(()=>new lu("Received an empty collection of effects"))}),yM=d(2,(t,e)=>Yi(e(Yi(t)))),Ip=d(2,(t,e)=>kt(t,{onFailure:r=>v(e.onFailure(r)),onSuccess:r=>v(e.onSuccess(r))})),SM=d(2,(t,e)=>U(()=>CM(t[Symbol.iterator](),0,e))),CM=(t,e,r)=>{let n=t.next();return n.done?v(!0):C(r(n.value,e),o=>o?CM(t,e+1,r):v(o))},rb=t=>{let e=C(C(t,()=>to()),()=>e);return e},Od=ae(t=>v(t.getFiberRefs())),bM=t=>C(t,e=>{let n=e[Symbol.iterator]().next();return n.done?oe(new Fr):v(n.value)}),nb=t=>Ip(t,{onFailure:tn,onSuccess:tn}),kM=t=>qe(t,{onFailure:e=>ib(e,"An error was silently ignored because it is not anticipated to be useful"),onSuccess:()=>Q}),vM=t=>wd((e,r)=>IC(r,e,t)),_M=t=>Ip(t,{onFailure:Cn,onSuccess:en}),OM=t=>Ip(t,{onFailure:en,onSuccess:Cn}),ob=(t,e)=>U(()=>e.while(t)?C(e.body(t),r=>ob(r,e)):v(t)),si=t=>(...e)=>{let r=ft(t),n;for(let o=0,i=e.length;o<i;o++){let s=e[o];Cm(s)&&(n!==void 0?n=He(n,s):n=s,e=[...e.slice(0,o),...e.slice(o+1)],o--)}return n===void 0&&(n=un),ae(o=>(o.log(e,n,r),Q))},FM=si(),DM=si(qC),ib=si(zC),wM=si(UC),AM=si(HC),RM=si(WC),MM=si(BC),TM=d(2,(t,e)=>C(yu,r=>vt(t,Ep,um(RR(e,r))))),IM=Or(oo),PM=(t,e)=>e.discard?LM(t,e.while,e.step,e.body):A(NM(t,e.while,e.step,e.body),ne),NM=(t,e,r,n)=>U(()=>e(t)?C(n(t),o=>A(NM(r(t),e,r,n),um(o))):D(()=>Kn())),LM=(t,e,r,n)=>U(()=>e(t)?C(n(t),()=>LM(r(t),e,r,n)):Q),BM=d(3,(t,e,r)=>U(()=>{let n=t[Symbol.iterator](),o=[],i=v(e),s,a=0;for(;!(s=n.next()).done;){let u=a++,f=s.value;i=C(i,p=>A(r(p,f,u),([x,m])=>(o.push(m),x)))}return A(i,u=>[u,o])})),_u=d(2,(t,e)=>qe(t,{onFailure:r=>Xo(()=>e(r)),onSuccess:v})),Fd=t=>E(It(),C(e=>E(p4(t),eo(e),sb,A(r=>he(r,E(ut(e),C(([n,o])=>ke(ga(Ba(n[0]),es(n[1])),o)))))))),WM=t=>kt(t,{onFailure:e=>v(e),onSuccess:v}),Dd=t=>A(t,e=>!e),HM=t=>C(t,e=>{switch(e._tag){case"None":return Q;case"Some":return oe(new Fr)}}),sb=t=>A(hn(!0),e=>Ue(ts(t,XC(e,!1)))),UM=t=>kt(t,{onFailure:()=>v(k()),onSuccess:e=>v(b(e))}),zM=d(2,(t,e)=>da(t,()=>ar(e))),qM=d(2,(t,e)=>da(t,()=>D(e))),jM=t=>qe(t,{onFailure:e=>{let r=ne(op(e));return r.length===0?ce(e):oe(r)},onSuccess:v}),Ba=t=>wd((e,r)=>E(t,bd(e,r))),GM=t=>t.length>=1?sr((e,r)=>{try{t(r).then(n=>e(ve(n)),n=>e(ei(n)))}catch(n){e(ei(n))}}):sr(e=>{try{t().then(r=>e(ve(r)),r=>e(ei(r)))}catch(r){e(ei(r))}}),Ou=d(3,(t,e,r)=>ln(n=>zr(t,Le(n,e,r)))),JM=d(3,(t,e,r)=>ln(n=>C(r,o=>zr(t,E(n,Le(e,o)))))),VM=ud(v),KM=d(3,(t,e,r)=>ne(t).reduce((n,o,i)=>C(n,s=>r(s,o,i)),v(e))),QM=d(3,(t,e,r)=>ne(t).reduceRight((n,o,i)=>C(n,s=>r(o,s,i)),v(e))),XM=d(3,(t,e,r)=>C(D(()=>t[Symbol.iterator]()),n=>$M(n,0,e,r.while,r.body))),$M=(t,e,r,n,o)=>{let i=t.next();return!i.done&&n(r)?C(o(r,i.value,e),s=>$M(t,e+1,s,n,o)):v(r)},YM=d(2,(t,e)=>U(()=>ZM(t,e))),ZM=(t,e)=>C(t,r=>e<=0?v(r):he(to(),ZM(t,e-1))),eT=t=>qe(t,{onFailure:oe,onSuccess:v}),tT=t=>U(()=>PC(t)),Wa=Dp,Ha=v(k()),rT=t=>v(b(t)),Pp=d(3,(t,e,r)=>C(e,n=>C(t,o=>A(e,i=>[r(n,i),o])))),nT=d(t=>Ee(t[0]),function(){return ab(arguments[0],typeof arguments[1]=="string"?[La(arguments[1],arguments[2])]:Object.entries(arguments[1]).map(([t,e])=>La(t,e)))}),ab=d(2,(t,e)=>vt(t,io,r=>bn(r,e))),oT=d(2,(t,e)=>U(()=>{let r=t[Symbol.iterator](),n=[],o,i=v(!1),s=0;for(;(o=r.next())&&!o.done;){let a=o.value,u=s++;i=C(i,f=>f?v(!0):(n.push(a),e(a,u)))}return A(i,()=>n)})),iT=d(2,(t,e)=>U(()=>{let r=t[Symbol.iterator](),n=[],o,i=v(!0),s=0;for(;(o=r.next())&&!o.done;){let a=o.value,u=s++;i=C(i,f=>E(f?e(a,u):v(!1),A(p=>(p&&n.push(a),p))))}return A(i,()=>n)})),sT=d(2,(t,{onFailure:e,onSuccess:r})=>qe(t,{onFailure:n=>{let o=Fn(n);switch(o._tag){case"Left":return he(e(o.left),ce(n));case"Right":return ce(n)}},onSuccess:n=>ke(r(n),n)})),aT=d(2,(t,e)=>Xn(t,r=>Se(HS(r),{onNone:()=>ce(r),onSome:n=>he(e(n),ce(r))}))),cb=d(2,(t,e)=>qe(t,{onFailure:r=>{let n=Fn(r);switch(n._tag){case"Left":return he(e(n.left),ce(r));case"Right":return ce(r)}},onSuccess:v})),cT=d(3,(t,e,r)=>cb(t,n=>Ri(n,e)?r(n):Q)),uT=d(2,(t,e)=>qe(t,{onFailure:r=>he(e(r),ce(r)),onSuccess:v})),lT=t=>ub(t,ER),ub=d(2,(t,e)=>Pp(t,e,(r,n)=>Hl(n-r))),f4=PR,pT=f4(v),lb=t=>{let e,r;return typeof t=="function"?e=t:(e=t.try,r=t.catch),e.length>=1?sr((n,o)=>{try{e(o).then(i=>n(ve(i)),i=>n(r?ar(()=>r(i)):oe(new Yo(i))))}catch(i){n(r?ar(()=>r(i)):oe(new Yo(i)))}}):sr(n=>{try{e().then(o=>n(ve(o)),o=>n(r?ar(()=>r(o)):oe(new Yo(o))))}catch(o){n(r?ar(()=>r(o)):oe(new Yo(o)))}})},fT=d(2,(t,e)=>C(t,r=>eb({try:()=>e.try(r),catch:e.catch}))),hT=d(2,(t,e)=>C(t,r=>lb({try:e.try.length>=1?n=>e.try(r,n):()=>e.try(r),catch:e.catch}))),mT=d(2,(t,e)=>U(()=>e()?Ha:ku(t))),dT=d(2,(t,e)=>C(e,r=>r?Ha:ku(t))),xT=t=>_u(t,zS),wd=t=>ae(e=>(e.setFiberRefs(t(e.id(),e.getFiberRefs())),Q)),gT=d(3,(t,e,r)=>Da(t,n=>Le(n,e,r(nn(n,e))))),Ad=d(2,(t,e)=>U(()=>e()?A(t,b):v(k()))),ET=d(3,(t,e,r)=>C(Or(e),n=>r(n)?A(t,o=>[n,b(o)]):v([n,k()]))),yT=d(3,(t,e,r)=>C(ii(e),n=>r(n)?A(t,o=>[n,b(o)]):v([n,k()]))),ST=d(2,(t,e)=>e(t)),CT=(t,e)=>(...r)=>C(t,n=>e(n)(...r)),bT=(t,e)=>(...r)=>A(t,n=>e(n)(...r)),pb=t=>new Proxy({},{get(e,r,n){return(...o)=>C(t,i=>i[r](...o))}}),fb=t=>new Proxy({},{get(e,r,n){return C(t,o=>Ee(o[r])?o[r]:v(o[r]))}}),kT=t=>({functions:pb(t),constants:fb(t)}),vT=t=>A(Ur(),on(t)),hb=t=>C(Ur(),on(t)),_T=function(){let t=arguments;return nb(C(mb,e=>D(()=>{if(typeof t[0]=="string")e.attribute(t[0],t[1]);else for(let r in t[0])e.attribute(r,t[0][r])})))},OT=d(t=>Ee(t[0]),function(){let t=arguments;return vt(t[0],Sa,typeof t[1]=="string"?Jt(t[1],t[2]):e=>Object.entries(t[1]).reduce((r,[n,o])=>Jt(r,n,o),e))}),FT=hb(pr),mb=C(Ur(),t=>{let e=t.unsafeMap.get(pr.key);return e!==void 0&&e._tag==="Span"?v(e):oe(new Fr)}),DT=d(t=>Ee(t[0]),(t,e,r)=>vt(t,Sp,Li({_tag:"SpanLink",span:e,attributes:r??{}}))),wT=BigInt(0),Rd=(t,e,r)=>{if(t.getFiberRef(ya)===!1)return bA(e);let o=t.getFiberRef(Vt),i=t.getFiberRef(Ze),s=wt(i,ni),a=wt(i,SR),u=t.getFiberRef($o),f=t.getFiberRefs(),p=xd(f,Sa),x=xd(f,Sp),m=r.parent?b(r.parent):r.root?k():on(o,pr),c=x._tag==="Some"?r.links!==void 0?[...yr(x.value),...r.links??[]]:yr(x.value):r.links??Lr(),l=s.span(e,m,r.context??Dt(),c,u?a.unsafeCurrentTimeNanos():wT,r.kind??"internal");return typeof r.captureStackTrace=="function"&&ap.set(l,r.captureStackTrace),p._tag==="Some"&&GD(p.value,(h,g)=>l.attribute(g,h)),r.attributes!==void 0&&Object.entries(r.attributes).forEach(([h,g])=>l.attribute(h,g)),l},AT=(t,e)=>(e=qr(e),ae(r=>v(Rd(r,t,e)))),RT=Or(Sa),MT=Or(Sp),db=(t,e,r,n)=>D(()=>{t.status._tag!=="Ended"&&(jm(e)&&ap.has(t)&&t.attribute("code.stacktrace",ap.get(t)()),t.end(n?r.unsafeCurrentTimeNanos():wT,e))}),kd=(t,...e)=>{let r=qr(e.length===1?void 0:e[0]),n=e[e.length-1];return ae(o=>{let i=Rd(o,t,r),s=o.getFiberRef($o),a=wt(o.getFiberRef(Ze),lr);return Ht(n(i),u=>db(i,u,a,s))})},vd=d(2,(t,e)=>Ou(t,pr,e)),xb=function(){let t=typeof arguments[0]!="string",e=t?arguments[1]:arguments[0],r=qr(t?arguments[2]:arguments[1]);if(t){let n=arguments[0];return kd(e,r,o=>vd(n,o))}return n=>kd(e,r,o=>vd(n,o))},TT=t=>function(){let e=t.captureStackTrace??!1;if(t.captureStackTrace!==!1){let r=Error.stackTraceLimit;Error.stackTraceLimit=2;let n=new Error;Error.stackTraceLimit=r;let o=!1;e=()=>{if(o!==!1)return o;if(n.stack)return o=n.stack.trim().split(`
`).slice(2).join(`
`).trim(),o}}return U(()=>{let r=typeof t.options=="function"?t.options.apply(null,arguments):t.options;return xb(U(()=>rt(()=>t.body.apply(this,arguments))),r.name,{...r,captureStackTrace:e})})},IT=t=>t==null?oe(new Fr):v(t),PT=t=>Wr(A(t,b),e=>nC(e)?Ha:oe(e));var NT="Sequential",LT="Parallel",h4="ParallelN",lo={_tag:NT},BT={_tag:LT},WT=t=>({_tag:h4,parallelism:t}),gb=t=>t._tag===NT,Eb=t=>t._tag===LT;var Du=lo,Td=BT,Id=WT;var Ua=Mp;var za=bd;var Nd="effect/FiberStatus",hs=Symbol.for(Nd),Pd="Done",HT="Running",UT="Suspended",m4=ye(`${Nd}-${Pd}`),Cb=class{[hs]=hs;_tag=Pd;[H](){return m4}[W](e){return Ld(e)&&e._tag===Pd}},bb=class{runtimeFlags;[hs]=hs;_tag=HT;constructor(e){this.runtimeFlags=e}[H](){return E(L(Nd),G(L(this._tag)),G(L(this.runtimeFlags)),re(this))}[W](e){return Ld(e)&&e._tag===HT&&this.runtimeFlags===e.runtimeFlags}},kb=class{runtimeFlags;blockingOn;[hs]=hs;_tag=UT;constructor(e,r){this.runtimeFlags=e,this.blockingOn=r}[H](){return E(L(Nd),G(L(this._tag)),G(L(this.runtimeFlags)),G(L(this.blockingOn)),re(this))}[W](e){return Ld(e)&&e._tag===UT&&this.runtimeFlags===e.runtimeFlags&&I(this.blockingOn,e.blockingOn)}},zT=new Cb,qT=t=>new bb(t),jT=(t,e)=>new kb(t,e),Ld=t=>T(t,hs),GT=t=>t._tag===Pd;var JT=zT,vb=qT,VT=jT;var KT=GT;var x4=Symbol.for("effect/Micro"),Bd=Symbol.for("effect/Micro/MicroExit");var XT=Symbol.for("effect/Micro/MicroCause");var g4={_E:B},Wd=class extends globalThis.Error{_tag;traces;[XT];constructor(e,r,n){let o=`MicroCause.${e}`,i,s,a;if(r instanceof globalThis.Error){i=`(${o}) ${r.name}`,s=r.message;let u=s.split(`
`).length;a=r.stack?`(${o}) ${r.stack.split(`
`).slice(0,u+3).join(`
`)}`:`${i}: ${s}`}else i=o,s=Mo(r,0),a=`${i}: ${s}`;n.length>0&&(a+=`
    ${n.join(`
    `)}`),super(s),this._tag=e,this.traces=n,this[XT]=g4,this.name=i,this.stack=a}pipe(){return R(this,arguments)}toString(){return this.stack}[ee](){return this.stack}};var Ob=class extends Wd{defect;constructor(e,r=[]){super("Die",e,r),this.defect=e}},E4=(t,e=[])=>new Ob(t,e),Fb=class extends Wd{constructor(e=[]){super("Interrupt","interrupted",e)}},y4=(t=[])=>new Fb(t);var eI=t=>t._tag==="Interrupt";var $T=Symbol.for("effect/Micro/MicroFiber"),S4={_A:B,_E:B},Hd=class{context;interruptible;[$T];_stack=[];_observers=[];_exit;_children;currentOpCount=0;constructor(e,r=!0){this.context=e,this.interruptible=r,this[$T]=S4}getRef(e){return zF(this.context,e)}addObserver(e){return this._exit?(e(this._exit),tn):(this._observers.push(e),()=>{let r=this._observers.indexOf(e);r>=0&&this._observers.splice(r,1)})}_interrupted=!1;unsafeInterrupt(){this._exit||(this._interrupted=!0,this.interruptible&&this.evaluate(Rb))}unsafePoll(){return this._exit}evaluate(e){if(this._exit)return;if(this._yielded!==void 0){let o=this._yielded;this._yielded=void 0,o()}let r=this.runLoop(e);if(r===wu)return;let n=YT.interruptChildren&&YT.interruptChildren(this);if(n!==void 0)return this.evaluate(qa(n,()=>r));this._exit=r;for(let o=0;o<this._observers.length;o++)this._observers[o](r);this._observers.length=0}runLoop(e){let r=!1,n=e;this.currentOpCount=0;try{for(;;){if(this.currentOpCount++,!r&&this.getRef(Tu).shouldYield(this)){r=!0;let o=n;n=qa(O4,()=>o)}if(n=n[Db](this),n===wu){let o=this._yielded;return Bd in o?(this._yielded=void 0,o):wu}}}catch(o){return T(n,Db)?Gd(o):Gd(`MicroFiber.runLoop: Not a valid effect: ${String(n)}`)}}getCont(e){for(;;){let r=this._stack.pop();if(!r)return;let n=r[Ud]&&r[Ud](this);if(n)return{[e]:n};if(r[e])return r}}_yielded=void 0;yieldWith(e){return this._yielded=e,wu}children(){return this._children??=new Set}},YT=J("effect/Micro/fiberMiddleware",()=>({interruptChildren:void 0}));var C4=t=>Np(()=>{for(let n of t)n.unsafeInterrupt();let e=t[Symbol.iterator](),r=Np(()=>{let n=e.next();for(;!n.done;){if(n.value.unsafePoll()){n=e.next();continue}let o=n.value;return nI(i=>{o.addObserver(s=>{i(r)})})}return Mu});return r}),tI=Symbol.for("effect/Micro/identifier"),Ae=Symbol.for("effect/Micro/args"),Db=Symbol.for("effect/Micro/evaluate"),ms=Symbol.for("effect/Micro/successCont"),Au=Symbol.for("effect/Micro/failureCont"),Ud=Symbol.for("effect/Micro/ensureCont"),wu=Symbol.for("effect/Micro/Yield"),b4={_A:B,_E:B,_R:B},k4={...TR,_op:"Micro",[x4]:b4,pipe(){return R(this,arguments)},[Symbol.iterator](){return new Us(new Wn(this))},toJSON(){return{_id:"Micro",op:this[tI],...Ae in this?{args:this[Ae]}:void 0}},toString(){return le(this)},[ee](){return le(this)}};function v4(t){return Gd("Micro.evaluate: Not implemented")}var Vd=t=>({...k4,[tI]:t.op,[Db]:t.eval??v4,[ms]:t.contA,[Au]:t.contE,[Ud]:t.ensure}),ds=t=>{let e=Vd(t);return function(){let r=Object.create(e);return r[Ae]=t.single===!1?arguments:arguments[0],r}},rI=t=>{let e={...Vd(t),[Bd]:Bd,_tag:t.op,get[t.prop](){return this[Ae]},toJSON(){return{_id:"MicroExit",_tag:t.op,[t.prop]:this[Ae]}},[W](r){return T4(r)&&r._tag===t.op&&I(this[Ae],r[Ae])},[H](){return re(this,G(ye(t.op))(L(this[Ae])))}};return function(r){let n=Object.create(e);return n[Ae]=r,n[ms]=void 0,n[Au]=void 0,n[Ud]=void 0,n}},Ru=rI({op:"Success",prop:"value",eval(t){let e=t.getCont(ms);return e?e[ms](this[Ae],t):t.yieldWith(this)}}),zd=rI({op:"Failure",prop:"cause",eval(t){let e=t.getCont(Au);for(;eI(this[Ae])&&e&&t.interruptible;)e=t.getCont(Au);return e?e[Au](this[Ae],t):t.yieldWith(this)}});var qd=ds({op:"Sync",eval(t){let e=this[Ae](),r=t.getCont(ms);return r?r[ms](e,t):t.yieldWith(Qd(e))}}),Np=ds({op:"Suspend",eval(t){return this[Ae]()}}),_4=ds({op:"Yield",eval(t){let e=!1;return t.getRef(Tu).scheduleTask(()=>{e||t.evaluate(Mu)},this[Ae]??0),t.yieldWith(()=>{e=!0})}}),O4=_4(0);var jd=Ru(void 0);var Kd=ds({op:"WithMicroFiber",eval(t){return this[Ae](t)}});var F4=ds({op:"Async",single:!1,eval(t){let e=this[Ae][0],r=!1,n=!1,o=this[Ae][1]?new AbortController:void 0,i=e(s=>{r||(r=!0,n?t.evaluate(s):n=s)},o?.signal);return n!==!1?n:(n=!0,t._yielded=()=>{r=!0},o===void 0&&i===void 0||t._stack.push(D4(()=>(r=!0,o?.abort(),i??Mu))),wu)}}),D4=ds({op:"AsyncFinalizer",ensure(t){t.interruptible&&(t.interruptible=!1,t._stack.push(Mb(!0)))},contE(t,e){return eI(t)?qa(this[Ae](),()=>zd(t)):zd(t)}}),nI=t=>F4(t,t.length>=2);var w4=d(2,(t,e)=>M4(t,r=>e));var A4=t=>B4(t,{onFailure:Xd,onSuccess:Qd});var qa=d(2,(t,e)=>{let r=Object.create(R4);return r[Ae]=t,r[ms]=e,r}),R4=Vd({op:"OnSuccess",eval(t){return t._stack.push(this),this[Ae]}});var M4=d(2,(t,e)=>qa(t,r=>Ru(e(r)))),T4=t=>T(t,Bd),Qd=Ru,Xd=zd,Rb=Xd(y4());var Gd=t=>Xd(E4(t));var Mu=Qd(void 0),I4=t=>{for(let e of t)if(e._tag==="Failure")return e;return Mu},P4="setImmediate"in globalThis?globalThis.setImmediate:t=>setTimeout(t,0),Jd=class{tasks=[];running=!1;scheduleTask(e,r){this.tasks.push(e),this.running||(this.running=!0,P4(this.afterScheduled))}afterScheduled=()=>{this.running=!1,this.runTasks()};runTasks(){let e=this.tasks;this.tasks=[];for(let r=0,n=e.length;r<n;r++)e[r]()}shouldYield(e){return e.currentOpCount>=e.getRef(wb)}flush(){for(;this.tasks.length>0;)this.runTasks()}};var N4=d(2,(t,e)=>Kd(r=>{let n=r.context;return r.context=e(n),W4(t,()=>(r.context=n,jd))}));var oI=d(2,(t,e)=>N4(t,Er(e)));var wb=class extends Wl()("effect/Micro/currentMaxOpsBeforeYield",{defaultValue:()=>2048}){},Ab=class extends Wl()("effect/Micro/currentConcurrency",{defaultValue:()=>"unbounded"}){},Tu=class extends Wl()("effect/Micro/currentScheduler",{defaultValue:()=>new Jd}){};var iI=d(2,(t,e)=>{let r=Object.create(L4);return r[Ae]=t,r[ms]=e.onSuccess,r[Au]=e.onFailure,r}),L4=Vd({op:"OnSuccessAndFailure",eval(t){return t._stack.push(this),this[Ae]}}),B4=d(2,(t,e)=>iI(t,{onFailure:r=>qd(()=>e.onFailure(r)),onSuccess:r=>qd(()=>e.onSuccess(r))}));var _b=Symbol.for("effect/Micro/MicroScope");var ZT=class t{[_b];state={_tag:"Open",finalizers:new Set};constructor(){this[_b]=_b}unsafeAddFinalizer(e){this.state._tag==="Open"&&this.state.finalizers.add(e)}addFinalizer(e){return Np(()=>this.state._tag==="Open"?(this.state.finalizers.add(e),jd):e(this.state.exit))}unsafeRemoveFinalizer(e){this.state._tag==="Open"&&this.state.finalizers.delete(e)}close(e){return Np(()=>{if(this.state._tag==="Open"){let r=Array.from(this.state.finalizers).reverse();return this.state={_tag:"Closed",exit:e},qa(q4(r,n=>A4(n(e))),I4)}return jd})}get fork(){return qd(()=>{let e=new t;if(this.state._tag==="Closed")return e.state=this.state,e;function r(n){return e.close(n)}return this.state.finalizers.add(r),e.unsafeAddFinalizer(n=>qd(()=>this.unsafeRemoveFinalizer(r))),e})}};var W4=d(2,(t,e)=>U4(r=>iI(r(t),{onFailure:n=>qa(e(Xd(n)),()=>zd(n)),onSuccess:n=>qa(e(Qd(n)),()=>Ru(n))})));var Mb=ds({op:"SetInterruptible",ensure(t){if(t.interruptible=this[Ae],t._interrupted&&t.interruptible)return()=>Rb}}),H4=t=>Kd(e=>e.interruptible?t:(e.interruptible=!0,e._stack.push(Mb(!1)),e._interrupted?Rb:t)),U4=t=>Kd(e=>e.interruptible?(e.interruptible=!1,e._stack.push(Mb(!0)),t(H4)):t(B));var z4=ds({op:"While",contA(t,e){return this[Ae].step(t),this[Ae].while()?(e._stack.push(this),this[Ae].body()):Mu},eval(t){return this[Ae].while()?(t._stack.push(this),this[Ae].body()):Mu}}),q4=(t,e,r)=>Kd(n=>{let o=r?.concurrency==="inherit"?n.getRef(Ab):r?.concurrency??1,i=o==="unbounded"?Number.POSITIVE_INFINITY:Math.max(1,o),s=ne(t),a=s.length;if(a===0)return r?.discard?jd:Ru([]);let u=r?.discard?void 0:new Array(a),f=0;return i===1?w4(z4({while:()=>f<s.length,body:()=>e(s[f],f),step:u?p=>u[f++]=p:p=>f++}),u):nI(p=>{let x=new Set,m,c=0,l=0,h=!1,g=!1;function y(){for(h=!0;c<i&&f<a;){let S=f,F=s[S];f++,c++;try{let w=j4(n,e(F,S),!0,!0);x.add(w),w.addObserver(M=>{x.delete(w),!g&&(M._tag==="Failure"?m===void 0&&(m=M,a=f,x.forEach(z=>z.unsafeInterrupt())):u!==void 0&&(u[S]=M.value),l++,c--,l===a?p(m??Ru(u)):!h&&c<i&&y())})}catch(w){m=Gd(w),a=f,x.forEach(M=>M.unsafeInterrupt())}}h=!1}return y(),Np(()=>(g=!0,f=a,C4(x)))})});var j4=(t,e,r=!1,n=!1)=>{let o=new Hd(t.context,t.interruptible);return n||(t.children().add(o),o.addObserver(()=>t.children().delete(o))),r?o.evaluate(e):t.getRef(Tu).scheduleTask(()=>o.evaluate(e),0),o};var sI=(t,e)=>{let r=new Hd(Tu.context(e?.scheduler??new Jd));if(r.evaluate(t),e?.signal)if(e.signal.aborted)r.unsafeInterrupt();else{let n=()=>r.unsafeInterrupt();e.signal.addEventListener("abort",n,{once:!0}),r.addObserver(()=>e.signal.removeEventListener("abort",n))}return r};var $d=class{buckets=[];scheduleTask(e,r){let n=this.buckets.length,o,i=0;for(;i<n&&this.buckets[i][0]<=r;i++)o=this.buckets[i];o&&o[0]===r?o[1].push(e):i===n?this.buckets.push([r,[e]]):this.buckets.splice(i,0,[r,[e]])}},Tb=class{maxNextTickBeforeTimer;running=!1;tasks=new $d;constructor(e){this.maxNextTickBeforeTimer=e}starveInternal(e){let r=this.tasks.buckets;this.tasks.buckets=[];for(let[n,o]of r)for(let i=0;i<o.length;i++)o[i]();this.tasks.buckets.length===0?this.running=!1:this.starve(e)}starve(e=0){e>=this.maxNextTickBeforeTimer?setTimeout(()=>this.starveInternal(0),0):Promise.resolve(void 0).then(()=>this.starveInternal(e+1))}shouldYield(e){return e.currentOpCount>e.getFiberRef(gp)?e.getFiberRef(no):!1}scheduleTask(e,r){this.tasks.scheduleTask(e,r),this.running||(this.running=!0,this.starve())}},cI=J(Symbol.for("effect/Scheduler/defaultScheduler"),()=>new Tb(2048)),Yd=class{tasks=new $d;deferred=!1;scheduleTask(e,r){this.deferred?cI.scheduleTask(e,r):this.tasks.scheduleTask(e,r)}shouldYield(e){return e.currentOpCount>e.getFiberRef(gp)?e.getFiberRef(no):!1}flush(){for(;this.tasks.buckets.length>0;){let e=this.tasks.buckets;this.tasks.buckets=[];for(let[r,n]of e)for(let o=0;o<n.length;o++)n[o]()}this.deferred=!0}};var ai=J(Symbol.for("effect/FiberRef/currentScheduler"),()=>Ge(cI)),uI=d(2,(t,e)=>Ye(t,ai,e));var ex=J(Symbol.for("effect/FiberRef/currentRequestMap"),()=>Ge(new Map));var Ib=(t,e,r,n)=>{switch(t){case void 0:return e();case"unbounded":return r();case"inherit":return Tt(yp,o=>o==="unbounded"?r():o>1?n(o):e());default:return t>1?n(t):e()}},Lp=(t,e,r)=>{switch(t){case void 0:return e();case"unbounded":return r();case"inherit":return Tt(yp,n=>n==="unbounded"||n>1?r():e());default:return t>1?r():e()}};var tx="InterruptSignal",rx="Stateful",nx="Resume",ox="YieldNow",ix=t=>({_tag:tx,cause:t}),Iu=t=>({_tag:rx,onFiber:t}),ja=t=>({_tag:nx,effect:t}),lI=()=>({_tag:ox});var V4="effect/FiberScope",sx=Symbol.for(V4),Pb=class{[sx]=sx;fiberId=Cr;roots=new Set;add(e,r){this.roots.add(r),r.addObserver(()=>{this.roots.delete(r)})}},Nb=class{fiberId;parent;[sx]=sx;constructor(e,r){this.fiberId=e,this.parent=r}add(e,r){this.parent.tell(Iu(n=>{n.addChild(r),r.addObserver(()=>{n.removeChild(r)})}))}},fI=t=>new Nb(t.id(),t),xs=J(Symbol.for("effect/FiberScope/Global"),()=>new Pb);var K4="effect/Fiber",Pu=Symbol.for(K4),Bp={_E:t=>t,_A:t=>t},Q4={[Pu]:Bp,pipe(){return R(this,arguments)}},X4="effect/Fiber",Lb=Symbol.for(X4);var Wp=t=>t.await;var ax=t=>t.inheritAll;var Bb=d(2,(t,e)=>t.interruptAsFork(e)),jr=t=>Ea(cr(t.await),t.inheritAll);var jie={...Po,commit(){return jr(this)},...Q4,id:()=>Cr,await:rs,children:v([]),inheritAll:rs,poll:v(k()),interruptAsFork:()=>rs};var gs="effect/FiberCurrent";var $4="effect/Logger",mI=Symbol.for($4),dI={_Message:t=>t,_Output:t=>t},cx=t=>({[mI]:dI,log:t,pipe(){return R(this,arguments)}});var Vie={[mI]:dI,log:tn,pipe(){return R(this,arguments)}};var xI=cx(({annotations:t,cause:e,date:r,fiberId:n,logLevel:o,message:i,spans:s})=>{let a=r.getTime(),f=[`timestamp=${r.toISOString()}`,`level=${o.label}`,`fiber=${sm(n)}`].join(" "),p=yF(i);for(let x=0;x<p.length;x++){let m=Mo(p[x]);m.length>0&&(f=f+" message=",f=Hb(m,f))}if(e!=null&&e._tag!=="Empty"&&(f=f+" cause=",f=Hb(Vi(e,{renderErrorCause:!0}),f)),Vl(s)){f=f+" ";let x=!0;for(let m of s)x?x=!1:f=f+" ",f=f+E(m,MR(a))}if(UD(t)>0){f=f+" ";let x=!0;for(let[m,c]of t)x?x=!1:f=f+" ",f=f+e9(m),f=f+"=",f=Hb(Mo(c),f)}return f}),Y4=t=>`"${t.replace(/\\([\s\S])|(")/g,"\\$1$2")}"`,Z4=/^[^\s"=]+$/,Hb=(t,e)=>e+(t.match(Z4)?t:Y4(t));var e9=t=>t.replace(/[\s="]/g,"_");var Ga={bold:"1",red:"31",green:"32",yellow:"33",blue:"34",cyan:"36",white:"37",gray:"90",black:"30",bgBrightRed:"101"},Kie={None:[],All:[],Trace:[Ga.gray],Debug:[Ga.blue],Info:[Ga.green],Warning:[Ga.yellow],Error:[Ga.red],Fatal:[Ga.bgBrightRed,Ga.black]};var gI=typeof process=="object"&&process!==null&&typeof process.stdout=="object"&&process.stdout!==null,Qie=gI&&process.stdout.isTTY===!0,Xie=gI||"Deno"in globalThis;var EI="effect/MetricBoundaries",Ub=Symbol.for(EI),zb=class{values;[Ub]=Ub;constructor(e){this.values=e,this._hash=E(ye(EI),G(mr(this.values)))}_hash;[H](){return this._hash}[W](e){return r9(e)&&I(this.values,e.values)}pipe(){return R(this,arguments)}},r9=t=>T(t,Ub),n9=t=>{let e=E(t,Ll(xe(Number.POSITIVE_INFINITY)),Dy);return new zb(e)};var yI=t=>E(yy(t.count-1,e=>t.start*Math.pow(t.factor,e)),jn,n9);var i9="effect/MetricKeyType",Hp=Symbol.for(i9),kI="effect/MetricKeyType/Counter",qb=Symbol.for(kI),vI="effect/MetricKeyType/Frequency",jb=Symbol.for(vI),_I="effect/MetricKeyType/Gauge",Gb=Symbol.for(_I),OI="effect/MetricKeyType/Histogram",Jb=Symbol.for(OI),FI="effect/MetricKeyType/Summary",Vb=Symbol.for(FI),Up={_In:t=>t,_Out:t=>t},Kb=class{incremental;bigint;[Hp]=Up;[qb]=qb;constructor(e,r){this.incremental=e,this.bigint=r,this._hash=ye(kI)}_hash;[H](){return this._hash}[W](e){return Xb(e)}pipe(){return R(this,arguments)}},s9=ye(vI),SI=class{preregisteredWords;[Hp]=Up;[jb]=jb;constructor(e){this.preregisteredWords=e}[H](){return s9}[W](e){return $b(e)}pipe(){return R(this,arguments)}},a9=ye(_I),CI=class{bigint;[Hp]=Up;[Gb]=Gb;constructor(e){this.bigint=e}[H](){return a9}[W](e){return Yb(e)}pipe(){return R(this,arguments)}},Qb=class{boundaries;[Hp]=Up;[Jb]=Jb;constructor(e){this.boundaries=e,this._hash=E(ye(OI),G(L(this.boundaries)))}_hash;[H](){return this._hash}[W](e){return Zb(e)&&I(this.boundaries,e.boundaries)}pipe(){return R(this,arguments)}},bI=class{maxAge;maxSize;error;quantiles;[Hp]=Up;[Vb]=Vb;constructor(e,r,n,o){this.maxAge=e,this.maxSize=r,this.error=n,this.quantiles=o,this._hash=E(ye(FI),G(L(this.maxAge)),G(L(this.maxSize)),G(L(this.error)),G(mr(this.quantiles)))}_hash;[H](){return this._hash}[W](e){return e0(e)&&I(this.maxAge,e.maxAge)&&this.maxSize===e.maxSize&&this.error===e.error&&I(this.quantiles,e.quantiles)}pipe(){return R(this,arguments)}},DI=t=>new Kb(t?.incremental??!1,t?.bigint??!1);var wI=t=>new Qb(t);var Xb=t=>T(t,qb),$b=t=>T(t,jb),Yb=t=>T(t,Gb),Zb=t=>T(t,Jb),e0=t=>T(t,Vb);var c9="effect/MetricKey",RI=Symbol.for(c9),u9={_Type:t=>t},l9=Wc(I),zp=class{name;keyType;description;tags;[RI]=u9;constructor(e,r,n,o=[]){this.name=e,this.keyType=r,this.description=n,this.tags=o,this._hash=E(ye(this.name+this.description),G(L(this.keyType)),G(mr(this.tags)))}_hash;[H](){return this._hash}[W](e){return p9(e)&&this.name===e.name&&I(this.keyType,e.keyType)&&I(this.description,e.description)&&l9(this.tags,e.tags)}pipe(){return R(this,arguments)}},p9=t=>T(t,RI),MI=(t,e)=>new zp(t,DI(e),ft(e?.description));var TI=(t,e,r)=>new zp(t,wI(e),ft(r));var II=d(2,(t,e)=>e.length===0?t:new zp(t.name,t.keyType,t.description,bn(t.tags,e)));var h9="effect/MetricState",qp=Symbol.for(h9),PI="effect/MetricState/Counter",t0=Symbol.for(PI),NI="effect/MetricState/Frequency",r0=Symbol.for(NI),LI="effect/MetricState/Gauge",n0=Symbol.for(LI),BI="effect/MetricState/Histogram",o0=Symbol.for(BI),WI="effect/MetricState/Summary",i0=Symbol.for(WI),jp={_A:t=>t},s0=class{count;[qp]=jp;[t0]=t0;constructor(e){this.count=e}[H](){return E(L(PI),G(L(this.count)),re(this))}[W](e){return d9(e)&&this.count===e.count}pipe(){return R(this,arguments)}},m9=Wc(I),a0=class{occurrences;[qp]=jp;[r0]=r0;constructor(e){this.occurrences=e}_hash;[H](){return E(ye(NI),G(mr(ne(this.occurrences.entries()))),re(this))}[W](e){return x9(e)&&m9(ne(this.occurrences.entries()),ne(e.occurrences.entries()))}pipe(){return R(this,arguments)}},c0=class{value;[qp]=jp;[n0]=n0;constructor(e){this.value=e}[H](){return E(L(LI),G(L(this.value)),re(this))}[W](e){return g9(e)&&this.value===e.value}pipe(){return R(this,arguments)}},u0=class{buckets;count;min;max;sum;[qp]=jp;[o0]=o0;constructor(e,r,n,o,i){this.buckets=e,this.count=r,this.min=n,this.max=o,this.sum=i}[H](){return E(L(BI),G(L(this.buckets)),G(L(this.count)),G(L(this.min)),G(L(this.max)),G(L(this.sum)),re(this))}[W](e){return E9(e)&&I(this.buckets,e.buckets)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return R(this,arguments)}},l0=class{error;quantiles;count;min;max;sum;[qp]=jp;[i0]=i0;constructor(e,r,n,o,i,s){this.error=e,this.quantiles=r,this.count=n,this.min=o,this.max=i,this.sum=s}[H](){return E(L(WI),G(L(this.error)),G(L(this.quantiles)),G(L(this.count)),G(L(this.min)),G(L(this.max)),G(L(this.sum)),re(this))}[W](e){return y9(e)&&this.error===e.error&&I(this.quantiles,e.quantiles)&&this.count===e.count&&this.min===e.min&&this.max===e.max&&this.sum===e.sum}pipe(){return R(this,arguments)}},HI=t=>new s0(t),UI=t=>new a0(t),zI=t=>new c0(t),qI=t=>new u0(t.buckets,t.count,t.min,t.max,t.sum),jI=t=>new l0(t.error,t.quantiles,t.count,t.min,t.max,t.sum);var d9=t=>T(t,t0),x9=t=>T(t,r0),g9=t=>T(t,n0),E9=t=>T(t,o0),y9=t=>T(t,i0);var C9="effect/MetricHook",b9=Symbol.for(C9),k9={_In:t=>t,_Out:t=>t},Gp=t=>({[b9]:k9,pipe(){return R(this,arguments)},...t});var GI=BigInt(0),VI=t=>{let e=t.keyType.bigint?GI:0,r=t.keyType.incremental?t.keyType.bigint?o=>o>=GI:o=>o>=0:o=>!0,n=o=>{r(o)&&(e=e+o)};return Gp({get:()=>HI(e),update:n,modify:n})},KI=t=>{let e=new Map;for(let n of t.keyType.preregisteredWords)e.set(n,0);let r=n=>{let o=e.get(n)??0;e.set(n,o+1)};return Gp({get:()=>UI(e),update:r,modify:r})},QI=(t,e)=>{let r=e;return Gp({get:()=>zI(r),update:n=>{r=n},modify:n=>{r=r+n}})},XI=t=>{let e=t.keyType.boundaries.values,r=e.length,n=new Uint32Array(r+1),o=new Float32Array(r),i=0,s=0,a=Number.MAX_VALUE,u=Number.MIN_VALUE;E(e,Ks(Ni),kn((x,m)=>{o[m]=x}));let f=x=>{let m=0,c=r;for(;m!==c;){let l=Math.floor(m+(c-m)/2),h=o[l];x<=h?c=l:m=l,c===m+1&&(x<=o[m]?c=m:m=c)}n[m]=n[m]+1,i=i+1,s=s+x,x<a&&(a=x),x>u&&(u=x)},p=()=>{let x=Nl(r),m=0;for(let c=0;c<r;c++){let l=o[c],h=n[c];m=m+h,x[c]=[l,m]}return x};return Gp({get:()=>qI({buckets:p(),count:i,min:a,max:u,sum:s}),update:f,modify:f})},$I=t=>{let{error:e,maxAge:r,maxSize:n,quantiles:o}=t.keyType,i=E(o,Ks(Ni)),s=Nl(n),a=0,u=0,f=0,p=Number.MAX_VALUE,x=Number.MIN_VALUE,m=l=>{let h=[],g=0;for(;g!==n-1;){let y=s[g];if(y!=null){let[S,F]=y,w=Wi(l-S);qy(w,zy)&&w<=r&&h.push(F)}g=g+1}return v9(e,i,Ks(h,Ni))},c=(l,h)=>{if(n>0){a=a+1;let g=a%n;s[g]=[h,l]}u=u+1,f=f+l,l<p&&(p=l),l>x&&(x=l)};return Gp({get:()=>jI({error:e,quantiles:m(Date.now()),count:u,min:p,max:x,sum:f}),update:([l,h])=>c(l,h),modify:([l,h])=>c(l,h)})},v9=(t,e,r)=>{let n=r.length;if(!jt(e))return Lr();let o=e[0],i=e.slice(1),s=JI(t,n,k(),0,o,r),a=rr(s);return i.forEach(u=>{a.push(JI(t,n,s.value,s.consumed,u,s.rest))}),kn(a,u=>[u.quantile,u.value])},JI=(t,e,r,n,o,i)=>{let s=t,a=e,u=r,f=n,p=o,x=i,m=t,c=e,l=r,h=n,g=o,y=i;for(;;){if(!jt(x))return{quantile:p,value:k(),consumed:f,rest:[]};if(p===1)return{quantile:p,value:b(by(x)),consumed:f+x.length,rest:[]};let S=kF(x,Z=>Z<=x[0]),F=p*a,w=s/2*F,M=f+S[0].length,z=Math.abs(M-F);if(M<F-w){m=s,c=a,l=Pi(x),h=M,g=p,y=S[1],s=m,a=c,u=l,f=h,p=g,x=y;continue}if(M>F+w)return{quantile:p,value:u,consumed:f,rest:x};switch(u._tag){case"None":{m=s,c=a,l=Pi(x),h=M,g=p,y=S[1],s=m,a=c,u=l,f=h,p=g,x=y;continue}case"Some":{let Z=Math.abs(F-u.value);if(z<Z){m=s,c=a,l=Pi(x),h=M,g=p,y=S[1],s=m,a=c,u=l,f=h,p=g,x=y;continue}return{quantile:p,value:b(u.value),consumed:f,rest:x}}}}throw new Error("BUG: MetricHook.resolveQuantiles - please report an issue at https://github.com/Effect-TS/effect/issues")};var O9="effect/MetricPair",F9=Symbol.for(O9),D9={_Type:t=>t};var YI=(t,e)=>({[F9]:D9,metricKey:t,metricState:e,pipe(){return R(this,arguments)}});var A9="effect/MetricRegistry",ZI=Symbol.for(A9),p0=class{[ZI]=ZI;map=Ra();snapshot(){let e=[];for(let[r,n]of this.map)e.push(YI(r,n.get()));return e}get(e){let r=E(this.map,dt(e),Wt);if(r==null){if(Xb(e.keyType))return this.getCounter(e);if(Yb(e.keyType))return this.getGauge(e);if($b(e.keyType))return this.getFrequency(e);if(Zb(e.keyType))return this.getHistogram(e);if(e0(e.keyType))return this.getSummary(e);throw new Error("BUG: MetricRegistry.get - unknown MetricKeyType - please report an issue at https://github.com/Effect-TS/effect/issues")}else return r}getCounter(e){let r=E(this.map,dt(e),Wt);if(r==null){let n=VI(e);E(this.map,An(e))||E(this.map,wr(e,n)),r=n}return r}getFrequency(e){let r=E(this.map,dt(e),Wt);if(r==null){let n=KI(e);E(this.map,An(e))||E(this.map,wr(e,n)),r=n}return r}getGauge(e){let r=E(this.map,dt(e),Wt);if(r==null){let n=QI(e,e.keyType.bigint?BigInt(0):0);E(this.map,An(e))||E(this.map,wr(e,n)),r=n}return r}getHistogram(e){let r=E(this.map,dt(e),Wt);if(r==null){let n=XI(e);E(this.map,An(e))||E(this.map,wr(e,n)),r=n}return r}getSummary(e){let r=E(this.map,dt(e),Wt);if(r==null){let n=$I(e);E(this.map,An(e))||E(this.map,wr(e,n)),r=n}return r}},eP=()=>new p0;var M9="effect/Metric",T9=Symbol.for(M9),I9={_Type:t=>t,_In:t=>t,_Out:t=>t},tP=J(Symbol.for("effect/Metric/globalMetricRegistry"),()=>eP()),rP=function(t,e,r,n){let o=Object.assign(i=>Ut(i,s=>N9(o,s)),{[T9]:I9,keyType:t,unsafeUpdate:e,unsafeValue:r,unsafeModify:n,register(){return this.unsafeValue([]),this},pipe(){return R(this,arguments)}});return o};var Jp=(t,e)=>nP(MI(t,e));var nP=t=>{let e,r=new WeakMap,n=o=>{if(o.length===0)return e!==void 0||(e=tP.get(t)),e;let i=r.get(o);return i!==void 0||(i=tP.get(II(t,o)),r.set(o,i)),i};return rP(t.keyType,(o,i)=>n(i).update(o),o=>n(o).get(),(o,i)=>n(i).modify(o))};var oP=(t,e,r)=>nP(TI(t,e,r));var iP=d(3,(t,e,r)=>P9(t,[La(e,r)]));var P9=d(2,(t,e)=>rP(t.keyType,(r,n)=>t.unsafeUpdate(r,bn(e,n)),r=>t.unsafeValue(bn(e,r)),(r,n)=>t.unsafeModify(r,bn(e,n))));var N9=d(2,(t,e)=>Tt(io,r=>D(()=>t.unsafeUpdate(e,r))));var B9="effect/Request",f0=Symbol.for(B9),W9={_E:t=>t,_A:t=>t},_se={...Ti,[f0]:W9},sP=t=>T(t,f0);var h0=d(2,(t,e)=>Tt(ex,r=>D(()=>{if(r.has(t)){let n=r.get(t);n.state.completed||(n.state.completed=!0,Fa(n.result,e))}})));var Nu=class{count=0;observers=new Set;interrupted=!1;addObserver(e){this.observers.add(e)}removeObserver(e){this.observers.delete(e)}increment(){this.count++,this.observers.forEach(e=>e(this.count))}decrement(){this.count--,this.observers.forEach(e=>e(this.count))}};var Es={Forward:0,Backward:1},ux=class t{self;stack;direction;count=0;constructor(e,r,n){this.self=e,this.stack=r,this.direction=n}clone(){return new t(this.self,this.stack.slice(),this.direction)}reversed(){return new t(this.self,this.stack.slice(),this.direction===Es.Forward?Es.Backward:Es.Forward)}next(){let e=this.entry;switch(this.count++,this.direction===Es.Forward?this.moveNext():this.movePrev(),e._tag){case"None":return{done:!0,value:this.count};case"Some":return{done:!1,value:e.value}}}get key(){return this.stack.length>0?b(this.stack[this.stack.length-1].key):k()}get value(){return this.stack.length>0?b(this.stack[this.stack.length-1].value):k()}get entry(){return ze(Ah(this.stack),e=>[e.key,e.value])}get index(){let e=0,r=this.stack;if(r.length===0){let n=this.self._root;return n!=null?n.count:0}else r[r.length-1].left!=null&&(e=r[r.length-1].left.count);for(let n=r.length-2;n>=0;--n)r[n+1]===r[n].right&&(++e,r[n].left!=null&&(e+=r[n].left.count));return e}moveNext(){let e=this.stack;if(e.length===0)return;let r=e[e.length-1];if(r.right!=null)for(r=r.right;r!=null;)e.push(r),r=r.left;else for(e.pop();e.length>0&&e[e.length-1].right===r;)r=e[e.length-1],e.pop()}get hasNext(){let e=this.stack;if(e.length===0)return!1;if(e[e.length-1].right!=null)return!0;for(let r=e.length-1;r>0;--r)if(e[r-1].left===e[r])return!0;return!1}movePrev(){let e=this.stack;if(e.length===0)return;let r=e[e.length-1];if(r!=null&&r.left!=null)for(r=r.left;r!=null;)e.push(r),r=r.right;else for(e.pop();e.length>0&&e[e.length-1].left===r;)r=e[e.length-1],e.pop()}get hasPrev(){let e=this.stack;if(e.length===0)return!1;if(e[e.length-1].left!=null)return!0;for(let r=e.length-1;r>0;--r)if(e[r-1].right===e[r])return!0;return!1}};var V={Red:0,Black:1},Tn=({color:t,count:e,key:r,left:n,right:o,value:i})=>({color:t,key:r,value:i,left:n,right:o,count:e});function m0(t,e){t.key=e.key,t.value=e.value,t.left=e.left,t.right=e.right,t.color=e.color,t.count=e.count}var ci=({count:t,key:e,left:r,right:n,value:o},i)=>({color:i,key:e,value:o,left:r,right:n,count:t}),Je=t=>{t.count=1+(t.left?.count??0)+(t.right?.count??0)};var aP="effect/RedBlackTree",d0=Symbol.for(aP),z9={_Key:t=>t,_Value:t=>t},q9={[d0]:z9,[H](){let t=L(aP);for(let e of this)t^=E(L(e[0]),G(L(e[1])));return re(this,t)},[W](t){if(cP(t)){if((this._root?.count??0)!==(t._root?.count??0))return!1;let e=Array.from(t);return Array.from(this).every((r,n)=>{let o=e[n];return I(r[0],o[0])&&I(r[1],o[1])})}return!1},[Symbol.iterator](){let t=[],e=this._root;for(;e!=null;)t.push(e),e=e.left;return new ux(this,t,Es.Forward)},toString(){return le(this.toJSON())},toJSON(){return{_id:"RedBlackTree",values:Array.from(this).map(ue)}},[ee](){return this.toJSON()},pipe(){return R(this,arguments)}},Vp=(t,e)=>{let r=Object.create(q9);return r._ord=t,r._root=e,r},cP=t=>T(t,d0);var uP=d(2,(t,e)=>{let r=t._ord,n=t._root;for(;n!==void 0;){let o=r(e,n.key);if(I(e,n.key))return b(n.value);o<=0?n=n.left:n=n.right}return k()});var x0=d(2,(t,e)=>q(uP(t,e))),lP=d(3,(t,e,r)=>{let n=t._ord,o=t._root,i=[],s=[];for(;o!=null;){let a=n(e,o.key);i.push(o),s.push(a),a<=0?o=o.left:o=o.right}i.push({color:V.Red,key:e,value:r,left:void 0,right:void 0,count:1});for(let a=i.length-2;a>=0;--a){let u=i[a];s[a]<=0?i[a]={color:u.color,key:u.key,value:u.value,left:i[a+1],right:u.right,count:u.count+1}:i[a]={color:u.color,key:u.key,value:u.value,left:u.left,right:i[a+1],count:u.count+1}}for(let a=i.length-1;a>1;--a){let u=i[a-1],f=i[a];if(u.color===V.Black||f.color===V.Black)break;let p=i[a-2];if(p.left===u)if(u.left===f){let x=p.right;if(x&&x.color===V.Red)u.color=V.Black,p.right=ci(x,V.Black),p.color=V.Red,a-=1;else{if(p.color=V.Red,p.left=u.right,u.color=V.Black,u.right=p,i[a-2]=u,i[a-1]=f,Je(p),Je(u),a>=3){let m=i[a-3];m.left===p?m.left=u:m.right=u}break}}else{let x=p.right;if(x&&x.color===V.Red)u.color=V.Black,p.right=ci(x,V.Black),p.color=V.Red,a-=1;else{if(u.right=f.left,p.color=V.Red,p.left=f.right,f.color=V.Black,f.left=u,f.right=p,i[a-2]=f,i[a-1]=u,Je(p),Je(u),Je(f),a>=3){let m=i[a-3];m.left===p?m.left=f:m.right=f}break}}else if(u.right===f){let x=p.left;if(x&&x.color===V.Red)u.color=V.Black,p.left=ci(x,V.Black),p.color=V.Red,a-=1;else{if(p.color=V.Red,p.right=u.left,u.color=V.Black,u.left=p,i[a-2]=u,i[a-1]=f,Je(p),Je(u),a>=3){let m=i[a-3];m.right===p?m.right=u:m.left=u}break}}else{let x=p.left;if(x&&x.color===V.Red)u.color=V.Black,p.left=ci(x,V.Black),p.color=V.Red,a-=1;else{if(u.left=f.right,p.color=V.Red,p.right=f.left,f.color=V.Black,f.right=u,f.left=p,i[a-2]=f,i[a-1]=u,Je(p),Je(u),Je(f),a>=3){let m=i[a-3];m.right===p?m.right=f:m.left=f}break}}}return i[0].color=V.Black,Vp(t._ord,i[0])}),pP=t=>fP(t,Es.Forward);var fP=(t,e)=>{let r=t[Symbol.iterator](),n=0;return{[Symbol.iterator]:()=>fP(t,e),next:()=>{n++;let o=r.key;switch(e===Es.Forward?r.moveNext():r.movePrev(),o._tag){case"None":return{done:!0,value:n};case"Some":return{done:!1,value:o.value}}}}};var hP=d(2,(t,e)=>{if(!x0(t,e))return t;let r=t._ord,n=r,o=t._root,i=[];for(;o!==void 0;){let u=n(e,o.key);i.push(o),I(e,o.key)?o=void 0:u<=0?o=o.left:o=o.right}if(i.length===0)return t;let s=new Array(i.length),a=i[i.length-1];s[s.length-1]={color:a.color,key:a.key,value:a.value,left:a.left,right:a.right,count:a.count};for(let u=i.length-2;u>=0;--u)a=i[u],a.left===i[u+1]?s[u]={color:a.color,key:a.key,value:a.value,left:s[u+1],right:a.right,count:a.count}:s[u]={color:a.color,key:a.key,value:a.value,left:a.left,right:s[u+1],count:a.count};if(a=s[s.length-1],a.left!==void 0&&a.right!==void 0){let u=s.length;for(a=a.left;a.right!=null;)s.push(a),a=a.right;let f=s[u-1];s.push({color:a.color,key:f.key,value:f.value,left:a.left,right:a.right,count:a.count}),s[u-1].key=a.key,s[u-1].value=a.value;for(let p=s.length-2;p>=u;--p)a=s[p],s[p]={color:a.color,key:a.key,value:a.value,left:a.left,right:s[p+1],count:a.count};s[u-1].left=s[u]}if(a=s[s.length-1],a.color===V.Red){let u=s[s.length-2];u.left===a?u.left=void 0:u.right===a&&(u.right=void 0),s.pop();for(let f=0;f<s.length;++f)s[f].count--;return Vp(r,s[0])}else if(a.left!==void 0||a.right!==void 0){a.left!==void 0?m0(a,a.left):a.right!==void 0&&m0(a,a.right),a.color=V.Black;for(let u=0;u<s.length-1;++u)s[u].count--;return Vp(r,s[0])}else{if(s.length===1)return Vp(r,void 0);{for(let f=0;f<s.length;++f)s[f].count--;let u=s[s.length-2];j9(s),u.left===a?u.left=void 0:u.right=void 0}}return Vp(r,s[0])});var j9=t=>{let e,r,n,o;for(let i=t.length-1;i>=0;--i){if(e=t[i],i===0){e.color=V.Black;return}if(r=t[i-1],r.left===e){if(n=r.right,n!==void 0&&n.right!==void 0&&n.right.color===V.Red){if(n=r.right=Tn(n),o=n.right=Tn(n.right),r.right=n.left,n.left=r,n.right=o,n.color=r.color,e.color=V.Black,r.color=V.Black,o.color=V.Black,Je(r),Je(n),i>1){let s=t[i-2];s.left===r?s.left=n:s.right=n}t[i-1]=n;return}else if(n!==void 0&&n.left!==void 0&&n.left.color===V.Red){if(n=r.right=Tn(n),o=n.left=Tn(n.left),r.right=o.left,n.left=o.right,o.left=r,o.right=n,o.color=r.color,r.color=V.Black,n.color=V.Black,e.color=V.Black,Je(r),Je(n),Je(o),i>1){let s=t[i-2];s.left===r?s.left=o:s.right=o}t[i-1]=o;return}if(n!==void 0&&n.color===V.Black)if(r.color===V.Red){r.color=V.Black,r.right=ci(n,V.Red);return}else{r.right=ci(n,V.Red);continue}else if(n!==void 0){if(n=Tn(n),r.right=n.left,n.left=r,n.color=r.color,r.color=V.Red,Je(r),Je(n),i>1){let s=t[i-2];s.left===r?s.left=n:s.right=n}t[i-1]=n,t[i]=r,i+1<t.length?t[i+1]=e:t.push(e),i=i+2}}else{if(n=r.left,n!==void 0&&n.left!==void 0&&n.left.color===V.Red){if(n=r.left=Tn(n),o=n.left=Tn(n.left),r.left=n.right,n.right=r,n.left=o,n.color=r.color,e.color=V.Black,r.color=V.Black,o.color=V.Black,Je(r),Je(n),i>1){let s=t[i-2];s.right===r?s.right=n:s.left=n}t[i-1]=n;return}else if(n!==void 0&&n.right!==void 0&&n.right.color===V.Red){if(n=r.left=Tn(n),o=n.right=Tn(n.right),r.left=o.right,n.right=o.left,o.right=r,o.left=n,o.color=r.color,r.color=V.Black,n.color=V.Black,e.color=V.Black,Je(r),Je(n),Je(o),i>1){let s=t[i-2];s.right===r?s.right=o:s.left=o}t[i-1]=o;return}if(n!==void 0&&n.color===V.Black)if(r.color===V.Red){r.color=V.Black,r.left=ci(n,V.Red);return}else{r.left=ci(n,V.Red);continue}else if(n!==void 0){if(n=Tn(n),r.left=n.right,n.right=r,n.color=r.color,r.color=V.Red,Je(r),Je(n),i>1){let s=t[i-2];s.right===r?s.right=n:s.left=n}t[i-1]=n,t[i]=r,i+1<t.length?t[i+1]=e:t.push(e),i=i+2}}}};var mP=x0,dP=lP,xP=pP;var gP=hP;var g0=Symbol.for("effect/SortedSet"),J9={[g0]:{_A:t=>t},[H](){return E(L(this.keyTree),G(L(g0)),re(this))},[W](t){return V9(t)&&I(this.keyTree,t.keyTree)},[Symbol.iterator](){return xP(this.keyTree)},toString(){return le(this.toJSON())},toJSON(){return{_id:"SortedSet",values:Array.from(this).map(ue)}},[ee](){return this.toJSON()},pipe(){return R(this,arguments)}},yP=t=>{let e=Object.create(J9);return e.keyTree=t,e},V9=t=>T(t,g0);var SP=d(2,(t,e)=>mP(t.keyTree,e)?t:yP(dP(t.keyTree,e,!0)));var CP=d(2,(t,e)=>yP(gP(t.keyTree,e)));var K9="effect/Supervisor",Wu=Symbol.for(K9),Kp={_T:t=>t},Lu=class t{underlying;value0;[Wu]=Kp;constructor(e,r){this.underlying=e,this.value0=r}get value(){return this.value0}onStart(e,r,n,o){this.underlying.onStart(e,r,n,o)}onEnd(e,r){this.underlying.onEnd(e,r)}onEffect(e,r){this.underlying.onEffect(e,r)}onSuspend(e){this.underlying.onSuspend(e)}onResume(e){this.underlying.onResume(e)}map(e){return new t(this,E(this.value,A(e)))}zip(e){return new Bu(this,e)}},Bu=class t{left;right;_tag="Zip";[Wu]=Kp;constructor(e,r){this.left=e,this.right=r}get value(){return ga(this.left.value,this.right.value)}onStart(e,r,n,o){this.left.onStart(e,r,n,o),this.right.onStart(e,r,n,o)}onEnd(e,r){this.left.onEnd(e,r),this.right.onEnd(e,r)}onEffect(e,r){this.left.onEffect(e,r),this.right.onEffect(e,r)}onSuspend(e){this.left.onSuspend(e),this.right.onSuspend(e)}onResume(e){this.left.onResume(e),this.right.onResume(e)}map(e){return new Lu(this,E(this.value,A(e)))}zip(e){return new t(this,e)}},S0=t=>T(t,Wu)&&Ri(t,"Zip"),E0=class{[Wu]=Kp;fibers=new Set;get value(){return D(()=>Array.from(this.fibers))}onStart(e,r,n,o){this.fibers.add(o)}onEnd(e,r){this.fibers.delete(r)}onEffect(e,r){}onSuspend(e){}onResume(e){}map(e){return new Lu(this,E(this.value,A(e)))}zip(e){return new Bu(this,e)}onRun(e,r){return e()}},y0=class{effect;[Wu]=Kp;constructor(e){this.effect=e}get value(){return this.effect}onStart(e,r,n,o){}onEnd(e,r){}onEffect(e,r){}onSuspend(e){}onResume(e){}map(e){return new Lu(this,E(this.value,A(e)))}zip(e){return new Bu(this,e)}onRun(e,r){return e()}},kP=class{ref;[Wu]=Kp;constructor(e){this.ref=e}get value(){return D(()=>We(this.ref))}onStart(e,r,n,o){E(this.ref,Sr(E(We(this.ref),SP(o))))}onEnd(e,r){E(this.ref,Sr(E(We(this.ref),CP(r))))}onEffect(e,r){}onSuspend(e){}onResume(e){}map(e){return new Lu(this,E(this.value,A(e)))}zip(e){return new Bu(this,e)}onRun(e,r){return e()}},Q9=()=>new E0,vP=D(Q9),X9=t=>new y0(t),Ja=J("effect/Supervisor/none",()=>X9(Q));var _P=Gi;var FP="Empty",DP="AddSupervisor",wP="RemoveSupervisor",AP="AndThen",Hu={_tag:FP},px=(t,e)=>({_tag:AP,first:t,second:e}),$9=(t,e)=>Y9(e,xe(t)),Y9=(t,e)=>{let r=t,n=e;for(;St(n);){let o=Ct(n);switch(o._tag){case FP:{n=Rt(n);break}case DP:{r=r.zip(o.supervisor),n=Rt(n);break}case wP:{r=C0(r,o.supervisor),n=Rt(n);break}case AP:{n=Be(o.first)(Be(o.second)(Rt(n)));break}}}return r},C0=(t,e)=>I(t,e)?Ja:S0(t)?C0(t.left,e).zip(C0(t.right,e)):t,fx=t=>I(t,Ja)?Jn():S0(t)?E(fx(t.left),Uo(fx(t.right))):Ys(t),Z9=(t,e)=>{if(I(t,e))return Hu;let r=fx(t),n=fx(e),o=E(n,tS(r),ta(Hu,(s,a)=>px(s,{_tag:DP,supervisor:a}))),i=E(r,tS(n),ta(Hu,(s,a)=>px(s,{_tag:wP,supervisor:a})));return px(o,i)},RP=_P({empty:Hu,patch:$9,combine:px,diff:Z9});var n5=Jp("effect_fiber_started",{incremental:!0}),MP=Jp("effect_fiber_active"),o5=Jp("effect_fiber_successes",{incremental:!0}),i5=Jp("effect_fiber_failures",{incremental:!0}),s5=iP(oP("effect_fiber_lifetimes",yI({start:.5,factor:2,count:35})),"time_unit","milliseconds"),Qp="Continue",a5="Done",TP="Yield",c5={_E:t=>t,_A:t=>t},hx=t=>{throw new Error(`BUG: FiberRuntime - ${Mo(t)} - please report an issue at https://github.com/Effect-TS/effect/issues`)},ui=Symbol.for("effect/internal/fiberRuntime/YieldedOp"),li=J("effect/internal/fiberRuntime/yieldedOpChannel",()=>({currentOp:null})),Xp={[Mc]:(t,e,r)=>rt(()=>e.effect_instruction_i1(r)),OnStep:(t,e,r)=>ve(ve(r)),[Tc]:(t,e,r)=>rt(()=>e.effect_instruction_i2(r)),[Tl]:(t,e,r)=>(t.patchRuntimeFlags(t.currentRuntimeFlags,e.patch),jo(t.currentRuntimeFlags)&&t.isInterrupted()?ge(t.getInterruptedCause()):ve(r)),[Ic]:(t,e,r)=>(rt(()=>e.effect_instruction_i2(r)),rt(()=>e.effect_instruction_i0())?(t.pushStack(e),rt(()=>e.effect_instruction_i1())):Q),[Js]:(t,e,r)=>{let n=rt(()=>e.effect_instruction_i0.next(r));return n.done?ve(n.value):(t.pushStack(e),Fc(n.value))}},u5={[tx]:(t,e,r,n)=>(t.processNewInterruptSignal(n.cause),jo(e)?ge(n.cause):r),[nx]:(t,e,r,n)=>{throw new Error("It is illegal to have multiple concurrent run loops in a single fiber")},[rx]:(t,e,r,n)=>(n.onFiber(t,vb(e)),r),[ox]:(t,e,r,n)=>C(to(),()=>r)},l5=t=>kr(Ew(t),e=>po(Sw(e),([r,n])=>{let o=new Map,i=[];for(let a of n){i.push(yr(a));for(let u of a)o.set(u.request,u)}let s=i.flat();return Ye(k5(r.runAll(i),s,()=>s.forEach(a=>{a.listeners.interrupted=!0})),ex,o)},!1,!1)),$p=class extends Mn{[Pu]=Bp;[Lb]=c5;_fiberRefs;_fiberId;_queue=new Array;_children=null;_observers=new Array;_running=!1;_stack=[];_asyncInterruptor=null;_asyncBlockingOn=null;_exitValue=null;_steps=[];_isYielding=!1;currentRuntimeFlags;currentOpCount=0;currentSupervisor;currentScheduler;currentTracer;currentSpan;currentContext;currentDefaultServices;constructor(e,r,n){if(super(),this.currentRuntimeFlags=n,this._fiberId=e,this._fiberRefs=r,FS(n)){let o=this.getFiberRef(io);n5.unsafeUpdate(1,o),MP.unsafeUpdate(1,o)}this.refreshRefCache()}commit(){return jr(this)}id(){return this._fiberId}resume(e){this.tell(ja(e))}get status(){return this.ask((e,r)=>r)}get runtimeFlags(){return this.ask((e,r)=>KT(r)?e.currentRuntimeFlags:r.runtimeFlags)}scope(){return fI(this)}get children(){return this.ask(e=>Array.from(e.getChildren()))}getChildren(){return this._children===null&&(this._children=new Set),this._children}getInterruptedCause(){return this.getFiberRef(is)}fiberRefs(){return this.ask(e=>e.getFiberRefs())}ask(e){return U(()=>{let r=as(this._fiberId);return this.tell(Iu((n,o)=>{Fa(r,D(()=>e(n,o)))})),ut(r)})}tell(e){this._queue.push(e),this._running||(this._running=!0,this.drainQueueLaterOnExecutor())}get await(){return sr(e=>{let r=n=>e(v(n));return this.tell(Iu((n,o)=>{n._exitValue!==null?r(this._exitValue):n.addObserver(r)})),D(()=>this.tell(Iu((n,o)=>{n.removeObserver(r)})))},this.id())}get inheritAll(){return ae((e,r)=>{let n=e.id(),o=e.getFiberRefs(),i=r.runtimeFlags,s=this.getFiberRefs(),a=hd(o,n,s);e.setFiberRefs(a);let u=e.getFiberRef(NP),f=E(cn(i,u),RS(Qn),RS(xm));return es(f)})}get poll(){return D(()=>ft(this._exitValue))}unsafePoll(){return this._exitValue}interruptAsFork(e){return D(()=>this.tell(ix(or(e))))}unsafeInterruptAsFork(e){this.tell(ix(or(e)))}addObserver(e){this._exitValue!==null?e(this._exitValue):this._observers.push(e)}removeObserver(e){this._observers=this._observers.filter(r=>r!==e)}getFiberRefs(){return this.setFiberRef(NP,this.currentRuntimeFlags),this._fiberRefs}unsafeDeleteFiberRef(e){this._fiberRefs=Su(this._fiberRefs,e)}getFiberRef(e){return this._fiberRefs.locals.has(e)?this._fiberRefs.locals.get(e)[0][1]:e.initial}setFiberRef(e,r){this._fiberRefs=Ia(this._fiberRefs,{fiberId:this._fiberId,fiberRef:e,value:r}),this.refreshRefCache()}refreshRefCache(){this.currentDefaultServices=this.getFiberRef(Ze),this.currentTracer=this.currentDefaultServices.unsafeMap.get(ni.key),this.currentSupervisor=this.getFiberRef(Sx),this.currentScheduler=this.getFiberRef(ai),this.currentContext=this.getFiberRef(Vt),this.currentSpan=this.currentContext.unsafeMap.get(pr.key)}setFiberRefs(e){this._fiberRefs=e,this.refreshRefCache()}addChild(e){this.getChildren().add(e)}removeChild(e){this.getChildren().delete(e)}transferChildren(e){let r=this._children;if(this._children=null,r!==null&&r.size>0)for(let n of r)n._exitValue===null&&e.add(this.currentRuntimeFlags,n)}drainQueueOnCurrentThread(){let e=!0;for(;e;){let r=Qp,n=globalThis[gs];globalThis[gs]=this;try{for(;r===Qp;)r=this._queue.length===0?a5:this.evaluateMessageWhileSuspended(this._queue.splice(0,1)[0])}finally{this._running=!1,globalThis[gs]=n}this._queue.length>0&&!this._running?(this._running=!0,r===TP?(this.drainQueueLaterOnExecutor(),e=!1):e=!0):e=!1}}drainQueueLaterOnExecutor(){this.currentScheduler.scheduleTask(this.run,this.getFiberRef(no))}drainQueueWhileRunning(e,r){let n=r;for(;this._queue.length>0;){let o=this._queue.splice(0,1)[0];n=u5[o._tag](this,e,n,o)}return n}isInterrupted(){return!bm(this.getFiberRef(is))}addInterruptedCause(e){let r=this.getFiberRef(is);this.setFiberRef(is,He(r,e))}processNewInterruptSignal(e){this.addInterruptedCause(e),this.sendInterruptSignalToAllChildren()}sendInterruptSignalToAllChildren(){if(this._children===null||this._children.size===0)return!1;let e=!1;for(let r of this._children)r.tell(ix(or(this.id()))),e=!0;return e}interruptAllChildren(){if(this.sendInterruptSignalToAllChildren()){let e=this._children.values();this._children=null;let r=!1;return au({while:()=>!r,body:()=>{let o=e.next();return o.done?D(()=>{r=!0}):Ue(o.value.await)},step:()=>{}})}return null}reportExitValue(e){if(FS(this.currentRuntimeFlags)){let r=this.getFiberRef(io),n=this.id().startTimeMillis,o=Date.now();switch(s5.unsafeUpdate(o-n,r),MP.unsafeUpdate(-1,r),e._tag){case ot:{o5.unsafeUpdate(1,r);break}case nt:{i5.unsafeUpdate(1,r);break}}}if(e._tag==="Failure"){let r=this.getFiberRef(uu);!fa(e.cause)&&r._tag==="Some"&&this.log("Fiber terminated with an unhandled error",e.cause,r)}}setExitValue(e){this._exitValue=e,this.reportExitValue(e);for(let r=this._observers.length-1;r>=0;r--)this._observers[r](e);this._observers=[]}getLoggers(){return this.getFiberRef(WP)}log(e,r,n){let o=q(n)?n.value:this.getFiberRef(Um),i=this.getFiberRef(BP);if(FR(i,o))return;let s=this.getFiberRef(Ep),a=this.getFiberRef(oo),u=this.getLoggers(),f=this.getFiberRefs();if(Zs(u)>0){let p=wt(this.getFiberRef(Ze),lr),x=new Date(p.unsafeCurrentTimeMillis());GO(f,()=>{for(let m of u)m.log({fiberId:this.id(),logLevel:o,message:e,cause:r,context:f,spans:s,annotations:a,date:x})})}}evaluateMessageWhileSuspended(e){switch(e._tag){case ox:return TP;case tx:return this.processNewInterruptSignal(e.cause),this._asyncInterruptor!==null&&(this._asyncInterruptor(ge(e.cause)),this._asyncInterruptor=null),Qp;case nx:return this._asyncInterruptor=null,this._asyncBlockingOn=null,this.evaluateEffect(e.effect),Qp;case rx:return e.onFiber(this,this._exitValue!==null?JT:VT(this.currentRuntimeFlags,this._asyncBlockingOn)),Qp;default:return hx(e)}}evaluateEffect(e){this.currentSupervisor.onResume(this);try{let r=jo(this.currentRuntimeFlags)&&this.isInterrupted()?ge(this.getInterruptedCause()):e;for(;r!==null;){let n=r,o=this.runLoop(n);if(o===ui){let i=li.currentOp;li.currentOp=null,i._op===Pc?mw(this.currentRuntimeFlags)?(this.tell(lI()),this.tell(ja(Kt)),r=null):r=Kt:i._op===js&&(r=null)}else{this.currentRuntimeFlags=E(this.currentRuntimeFlags,_S(xm));let i=this.interruptAllChildren();i!==null?r=C(i,()=>o):(this._queue.length===0?this.setExitValue(o):this.tell(ja(o)),r=null)}}}finally{this.currentSupervisor.onSuspend(this)}}start(e){if(this._running)this.tell(ja(e));else{this._running=!0;let r=globalThis[gs];globalThis[gs]=this;try{this.evaluateEffect(e)}finally{this._running=!1,globalThis[gs]=r,this._queue.length>0&&this.drainQueueLaterOnExecutor()}}}startFork(e){this.tell(ja(e))}patchRuntimeFlags(e,r){let n=Go(e,r);return globalThis[gs]=this,this.currentRuntimeFlags=n,n}initiateAsync(e,r){let n=!1,o=i=>{n||(n=!0,this.tell(ja(i)))};jo(e)&&(this._asyncInterruptor=o);try{r(o)}catch(i){o(ce(ht(i)))}}pushStack(e){this._stack.push(e),e._op==="OnStep"&&this._steps.push({refs:this.getFiberRefs(),flags:this.currentRuntimeFlags})}popStack(){let e=this._stack.pop();if(e)return e._op==="OnStep"&&this._steps.pop(),e}getNextSuccessCont(){let e=this.popStack();for(;e;){if(e._op!==Rc)return e;e=this.popStack()}}getNextFailCont(){let e=this.popStack();for(;e;){if(e._op!==Mc&&e._op!==Ic&&e._op!==Js)return e;e=this.popStack()}}[JO](e){return D(()=>nn(this.currentContext,e))}Left(e){return oe(e.left)}None(e){return oe(new Fr)}Right(e){return ve(e.right)}Some(e){return ve(e.value)}Micro(e){return iu(r=>{let n=r,o=sI(oI(e,this.currentContext));return o.addObserver(i=>{if(i._tag==="Success")return n(ve(i.value));switch(i.cause._tag){case"Interrupt":return n(ge(or(Cr)));case"Fail":return n(oe(i.cause.error));case"Die":return n(Ko(i.cause.defect))}}),iu(i=>{n=s=>{i(Q)},o.unsafeInterrupt()})})}[Eh](e){let r=rt(()=>e.effect_instruction_i0()),n=this.getNextSuccessCont();return n!==void 0?(n._op in Xp||hx(n),Xp[n._op](this,n,r)):(li.currentOp=ve(r),ui)}[ot](e){let r=e,n=this.getNextSuccessCont();return n!==void 0?(n._op in Xp||hx(n),Xp[n._op](this,n,r.effect_instruction_i0)):(li.currentOp=r,ui)}[nt](e){let r=e.effect_instruction_i0,n=this.getNextFailCont();if(n!==void 0)switch(n._op){case Rc:case Tc:return jo(this.currentRuntimeFlags)&&this.isInterrupted()?ge(vm(r)):rt(()=>n.effect_instruction_i1(r));case"OnStep":return jo(this.currentRuntimeFlags)&&this.isInterrupted()?ge(vm(r)):ve(ge(r));case Tl:return this.patchRuntimeFlags(this.currentRuntimeFlags,n.patch),jo(this.currentRuntimeFlags)&&this.isInterrupted()?ge(He(r,this.getInterruptedCause())):ge(r);default:hx(n)}else return li.currentOp=ge(r),ui}[yh](e){return rt(()=>e.effect_instruction_i0(this,vb(this.currentRuntimeFlags)))}Blocked(e){let r=this.getFiberRefs(),n=this.currentRuntimeFlags;if(this._steps.length>0){let o=[],i=this._steps[this._steps.length-1],s=this.popStack();for(;s&&s._op!=="OnStep";)o.push(s),s=this.popStack();this.setFiberRefs(i.refs),this.currentRuntimeFlags=i.flags;let a=Ua(i.refs,r),u=cn(i.flags,n);return ve(Jo(e.effect_instruction_i0,ae(f=>{for(;o.length>0;)f.pushStack(o.pop());return f.setFiberRefs(za(f.id(),f.getFiberRefs())(a)),f.currentRuntimeFlags=Go(u)(f.currentRuntimeFlags),e.effect_instruction_i1})))}return $e(o=>C(Ka(Tm(e.effect_instruction_i0)),()=>o(e.effect_instruction_i1)))}RunBlocked(e){return l5(e.effect_instruction_i0)}[To](e){let r=e.effect_instruction_i0,n=this.currentRuntimeFlags,o=Go(n,r);if(jo(o)&&this.isInterrupted())return ge(this.getInterruptedCause());if(this.patchRuntimeFlags(this.currentRuntimeFlags,r),e.effect_instruction_i1){let i=cn(o,n);return this.pushStack(new Fm(i,e)),rt(()=>e.effect_instruction_i1(n))}else return Kt}[Mc](e){return this.pushStack(e),e.effect_instruction_i0}OnStep(e){return this.pushStack(e),e.effect_instruction_i0}[Rc](e){return this.pushStack(e),e.effect_instruction_i0}[Tc](e){return this.pushStack(e),e.effect_instruction_i0}[js](e){return this._asyncBlockingOn=e.effect_instruction_i1,this.initiateAsync(this.currentRuntimeFlags,e.effect_instruction_i0),li.currentOp=e,ui}[Pc](e){return this._isYielding=!1,li.currentOp=e,ui}[Ic](e){let r=e.effect_instruction_i0,n=e.effect_instruction_i1;return r()?(this.pushStack(e),n()):Kt}[Js](e){return Xp[Js](this,e,void 0)}[Gs](e){return rt(()=>e.commit())}runLoop(e){let r=e;for(this.currentOpCount=0;;){if(this.currentRuntimeFlags&hw&&this.currentSupervisor.onEffect(this,r),this._queue.length>0&&(r=this.drainQueueWhileRunning(this.currentRuntimeFlags,r)),!this._isYielding){this.currentOpCount+=1;let n=this.currentScheduler.shouldYield(this);if(n!==!1){this._isYielding=!0,this.currentOpCount=0;let o=r;r=C(to({priority:n}),()=>o)}}try{if(r=this.currentTracer.context(()=>Ls()!==r[Vo]._V?Qo(`Cannot execute an Effect versioned ${r[Vo]._V} with a Runtime of version ${Ls()}`):this[r._op](r),this),r===ui){let n=li.currentOp;return n._op===Pc||n._op===js?ui:(li.currentOp=null,n._op===ot||n._op===nt?n:ge(ht(n)))}}catch(n){r!==ui&&!T(r,"_op")||!(r._op in this)?r=Qo(`Not a valid effect: ${Mo(r)}`):Lw(n)?r=ge(n.cause):rC(n)?r=ge(He(ht(n),or(Cr))):r=Ko(n)}}}run=()=>{this.drainQueueOnCurrentThread()}},BP=J("effect/FiberRef/currentMinimumLogLevel",()=>Ge(DR("Info"))),p5=t=>cx(e=>{let r=TC(e.context,Ze);wt(r,ri).unsafe.log(t.log(e))});var f5=J(Symbol.for("effect/Logger/defaultLogger"),()=>p5(xI));var h5=J(Symbol.for("effect/Logger/tracerLogger"),()=>cx(({annotations:t,cause:e,context:r,fiberId:n,logLevel:o,message:i})=>{let s=on(oi(r,Vt),pr);if(s._tag==="None"||s.value._tag==="ExternalSpan")return;let a=nn(oi(r,Ze),lr),u={};for(let[f,p]of t)u[f]=p;u["effect.fiberId"]=BD(n),u["effect.logLevel"]=o.label,e!==null&&e._tag!=="Empty"&&(u["effect.cause"]=Vi(e,{renderErrorCause:!0})),s.value.event(Mo(Array.isArray(i)?i[0]:i),a.unsafeCurrentTimeNanos(),u)}));var WP=J(Symbol.for("effect/FiberRef/currentLoggers"),()=>eC(Ys(f5,h5)));var HP=function(){if(typeof arguments[0]=="string")return Xt(oo,Jt(arguments[0],arguments[1]));let t=Object.entries(arguments[0]);return Xt(oo,zD(e=>{for(let r=0;r<t.length;r++){let[n,o]=t[r];Jt(e,n,o)}return e}))},Uu=d(t=>Ee(t[0]),(t,e)=>Dn(Ut(t,r=>fo(n=>e(r,n))))),UP=d(t=>Ee(t[0]),(t,e)=>gn(t,fo(r=>e(r)))),fo=t=>ae(e=>{let r=e.getFiberRefs(),n=e.currentRuntimeFlags;return C(w0,o=>ss(o,i=>ae(s=>{let a=s.getFiberRefs(),u=s.currentRuntimeFlags,f=Ua(a,r),p=cn(u,n),x=Ua(r,a);return s.setFiberRefs(za(f,s.id(),r)),gn(Hm(t(i),p),D(()=>{s.setFiberRefs(za(x,s.id(),s.getFiberRefs()))}))})))}),zP=t=>Ye(up,b(xs))(t),IP=Symbol.for("effect/Effect/existsPar/found"),qP=d(t=>rn(t[0])&&!Ee(t[0]),(t,e,r)=>Lp(r?.concurrency,()=>U(()=>jP(t[Symbol.iterator](),0,e)),()=>kt(Gr(t,(n,o)=>Lm(e(n,o),{onTrue:()=>oe(IP),onFalse:()=>Q}),r),{onFailure:n=>n===IP?v(!0):oe(n),onSuccess:()=>v(!1)}))),jP=(t,e,r)=>{let n=t.next();return n.done?v(!1):E(C(r(n.value,e),o=>o?v(o):jP(t,e+1,r)))},GP=d(t=>rn(t[0])&&!Ee(t[0]),(t,e,r)=>{let n=r?.negate?(o,i)=>A(e(o,i),RF):e;return Lp(r?.concurrency,()=>U(()=>ne(t).reduceRight((o,i,s)=>ro(o,U(()=>n(i,s)),(a,u)=>u?[i,...a]:a),D(()=>new Array))),()=>A(Gr(t,(o,i)=>A(n(o,i),s=>s?b(o):k()),r),FF))}),m5=t=>{if(Array.isArray(t)||rn(t))return[t,k()];let e=Object.keys(t),r=e.length;return[e.map(n=>t[n]),b(n=>{let o={};for(let i=0;i<r;i++)o[e[i]]=n[i];return o})]},d5=(t,e,r)=>{let n=[];for(let o of t)n.push($n(o));return C(Gr(n,B,{concurrency:r?.concurrency,batching:r?.batching}),o=>{let i=k(),s=o.length,a=new Array(s),u=new Array(s),f=!1;for(let p=0;p<s;p++){let x=o[p];x._tag==="Left"?(a[p]=b(x.left),f=!0):(u[p]=x.right,a[p]=i)}return f?e._tag==="Some"?oe(e.value(a)):oe(a):r?.discard?Q:e._tag==="Some"?v(e.value(u)):v(u)})},x5=(t,e,r)=>{let n=[];for(let o of t)n.push($n(o));return r?.discard?Gr(n,B,{concurrency:r?.concurrency,batching:r?.batching,discard:!0}):A(Gr(n,B,{concurrency:r?.concurrency,batching:r?.batching}),o=>e._tag==="Some"?e.value(o):o)},ys=(t,e)=>{let[r,n]=m5(t);return e?.mode==="validate"?d5(r,n,e):e?.mode==="either"?x5(r,n,e):e?.discard!==!0&&n._tag==="Some"?A(Gr(r,B,e),n.value):Gr(r,B,e)},JP=t=>e=>ys(e,t),VP=(t,e)=>A(ys(ne(t).map(Xe),e),Bc(r=>Gm(r)?b(r.effect_instruction_i0):k())),k0=d(2,(t,e)=>Array.from({length:e},()=>t)),KP=d(t=>Ee(t[0]),(t,e,r)=>ys(k0(t,e),r)),Gr=d(t=>rn(t[0]),(t,e,r)=>ae(n=>{let o=r?.batching===!0||r?.batching==="inherit"&&n.getFiberRef(cu);return r?.discard?Ib(r.concurrency,()=>Va(Du,r?.concurrentFinalizers)(i=>o?po(t,(s,a)=>i(e(s,a)),!0,!1,1):kr(t,(s,a)=>i(e(s,a)))),()=>Va(Td,r?.concurrentFinalizers)(i=>po(t,(s,a)=>i(e(s,a)),o,!1)),i=>Va(Id(i),r?.concurrentFinalizers)(s=>po(t,(a,u)=>s(e(a,u)),o,!1,i))):Ib(r?.concurrency,()=>Va(Du,r?.concurrentFinalizers)(i=>o?b0(t,1,(s,a)=>i(e(s,a)),!0):Mt(t,(s,a)=>i(e(s,a)))),()=>Va(Td,r?.concurrentFinalizers)(i=>mx(t,(s,a)=>i(e(s,a)),o)),i=>Va(Id(i),r?.concurrentFinalizers)(s=>b0(t,i,(a,u)=>s(e(a,u)),o)))})),mx=(t,e,r)=>U(()=>{let n=ne(t),o=new Array(n.length);return he(po(n,(s,a)=>C(e(s,a),u=>D(()=>o[a]=u)),r,!1),v(o))}),po=(t,e,r,n,o)=>$e(i=>Wm(s=>ae(a=>{let u=Array.from(t).reverse(),f=u.length;if(f===0)return Q;let p=0,x=!1,m=o?Math.min(u.length,o):u.length,c=new Set,l=new Array,h=()=>c.forEach(te=>{te.currentScheduler.scheduleTask(()=>{te.unsafeInterruptAsFork(a.id())},0)}),g=new Array,y=new Array,S=new Array,F=()=>{let te=l.filter(({exit:fe})=>fe._tag==="Failure").sort((fe,Fe)=>fe.index<Fe.index?-1:fe.index===Fe.index?0:1).map(({exit:fe})=>fe);return te.length===0&&te.push(Kt),te},w=(te,fe=!1)=>{let Fe=Dn(s(te)),De=g5(Fe,a,a.currentRuntimeFlags,xs);return a.currentScheduler.scheduleTask(()=>{fe&&De.unsafeInterruptAsFork(a.id()),De.resume(Fe)},0),De},M=()=>{n||(f-=u.length,u=[]),x=!0,h()},z=r?Nm:Xe,Z=w(sr(te=>{let fe=(De,Bt)=>{De._op==="Blocked"?S.push(De):(l.push({index:Bt,exit:De}),De._op==="Failure"&&!x&&M())},Fe=()=>{if(u.length>0){let De=u.pop(),Bt=p++,Fi=()=>{let tr=u.pop();return Bt=p++,C(to(),()=>C(z(i(e(tr,Bt))),Ao))},Ao=tr=>u.length>0&&(fe(tr,Bt),u.length>0)?Fi():v(tr),bc=C(z(i(e(De,Bt))),Ao),Zr=w(bc);g.push(Zr),c.add(Zr),x&&Zr.currentScheduler.scheduleTask(()=>{Zr.unsafeInterruptAsFork(a.id())},0),Zr.addObserver(tr=>{let Ps;if(tr._op==="Failure"?Ps=tr:Ps=tr.effect_instruction_i0,y.push(Zr),c.delete(Zr),fe(Ps,Bt),l.length===f)te(v(Ne(Zo(F(),{parallel:!0}),()=>Kt)));else if(S.length+l.length===f){let Dl=S.map(Ns=>Ns.effect_instruction_i0).reduce(PS);te(v(Jo(Dl,po([Ne(Zo(F(),{parallel:!0}),()=>Kt),...S.map(Ns=>Ns.effect_instruction_i1)],Ns=>Ns,r,!0,o))))}else Fe()})}};for(let De=0;De<m;De++)Fe()}));return Ue(Ht(cr(i(jr(Z))),va({onFailure:()=>{M();let te=S.length+1,fe=Math.min(typeof o=="number"?o:S.length,S.length),Fe=Array.from(S);return sr(De=>{let Bt=[],Fi=0,Ao=0,bc=(tr,Ps)=>Dl=>{Bt[tr]=Dl,Fi++,Fi===te&&De(Pl(Zo(Bt,{parallel:!0}))),Fe.length>0&&Ps&&Zr()},Zr=()=>{w(Fe.pop(),!0).addObserver(bc(Ao,!0)),Ao++};Z.addObserver(bc(Ao,!1)),Ao++;for(let tr=0;tr<fe;tr++)Zr()})},onSuccess:()=>Mt(y,te=>te.inheritAll)})))}))),b0=(t,e,r,n)=>U(()=>{let o=ne(t),i=new Array(o.length);return he(po(o,(a,u)=>A(r(a,u),f=>i[u]=f),n,!1,e),v(i))}),mn=t=>ae((e,r)=>v(XP(t,e,r.runtimeFlags))),Ka=t=>E5(t,xs),QP=d(2,(t,e)=>mn(Bm(t,r=>{let n=Fn(r);switch(n._tag){case"Left":return e(n.left);case"Right":return ce(n.right)}}))),XP=(t,e,r,n=null)=>{let o=dx(t,e,r,n);return o.resume(t),o},g5=(t,e,r,n=null)=>dx(t,e,r,n),dx=(t,e,r,n=null)=>{let o=am(),i=e.getFiberRefs(),s=md(i,o),a=new $p(o,s,r),u=oi(s,Vt),f=a.currentSupervisor;return f.onStart(u,t,b(e),a),a.addObserver(x=>f.onEnd(x,a)),(n!==null?n:E(e.getFiberRef(up),Ne(()=>e.scope()))).add(r,a),a},E5=(t,e)=>ae((r,n)=>v(XP(t,r,n.runtimeFlags,e))),v0=d(t=>wi(t[2]),(t,e,r,n)=>Lp(n?.concurrency,()=>ne(t).reduce((o,i,s)=>ro(o,i,(a,u)=>r(a,u,s)),v(e)),()=>C(hn(e),o=>C(Gr(t,(i,s)=>C(i,a=>Rp(o,u=>r(u,a,s))),n),()=>ii(o))))),_0=d(t=>rn(t[0]),(t,e,r)=>E(Gr(t,(n,o)=>$n(e(n,o)),r),A(n=>zw(n,B)))),$P=d(t=>rn(t[0]),(t,e,r)=>C(_0(t,e,{concurrency:r?.concurrency,batching:r?.batching}),([n,o])=>n.length===0?r?.discard?Q:v(o):oe(n))),YP=t=>{let e=nr(t);if(!St(e))return Xi(()=>new lu("Received an empty collection of effects"));let r=Ct(e),n=Rt(e),o=i=>E(ax(i[1]),ke(i[0]));return E(It(),C(i=>E(hn(n.length),C(s=>$e(a=>E(mn(Zn(r)),C(u=>E(n,Mt(f=>mn(Zn(f))),A(f=>jn(f)),A(f=>E(f,Be(u))),Ut(f=>E(f,xr(Q,(p,x)=>E(p,he(E(Wp(x),C(y5(f,x,i,s)),mn,Ue)))))),C(f=>E(a(E(Ie(i),C(o))),vr(()=>E(f,xr(Q,(p,x)=>E(p,Ea(ns(x))))))))))))))))},y5=(t,e,r,n)=>o=>_a(o,{onFailure:i=>E(co(n,s=>[s===0?E(cs(r,i),Ue):Q,s-1]),cr),onSuccess:i=>E(us(r,[i,e]),C(s=>s?E(nr(t),xr(Q,(a,u)=>u===e?a:E(a,Ea(ns(u))))):Q))}),ZP=d(t=>rn(t[0])&&!Ee(t[0]),(t,e,r,n)=>Lp(n?.concurrency,()=>ne(t).reduce((o,i,s)=>ro(o,i,(a,u)=>r(a,u,s)),e),()=>U(()=>E(v0([e,...t],k(),(o,i,s)=>{switch(o._tag){case"None":return b(i);case"Some":return b(r(o.value,i,s))}},n),A(o=>{switch(o._tag){case"None":throw new Error("BUG: Effect.reduceEffect - please report an issue at https://github.com/Effect-TS/effect/issues");case"Some":return o.value}}))))),xx=t=>ln(e=>Se(on(e,ho),{onNone:()=>t,onSome:r=>{switch(r.strategy._tag){case"Parallel":return t;case"Sequential":case"ParallelN":return C(ba(r,Td),n=>mo(t,n))}}})),PP=t=>e=>ln(r=>Se(on(r,ho),{onNone:()=>e,onSome:n=>n.strategy._tag==="ParallelN"&&n.strategy.parallelism===t?e:C(ba(n,Id(t)),o=>mo(e,o))})),e1=t=>e=>Va(t,!0)(e),Va=(t,e)=>r=>ln(n=>Se(on(n,ho),{onNone:()=>r(B),onSome:o=>{if(e===!0){let i=t._tag==="Parallel"?xx:t._tag==="Sequential"?gx:PP(t.parallelism);switch(o.strategy._tag){case"Parallel":return i(r(xx));case"Sequential":return i(r(gx));case"ParallelN":return i(r(PP(o.strategy.parallelism)))}}else return r(B)}})),xn=t=>C(ho,t),Yp=t=>C(Qa(),e=>Ht(t(e),r=>e.close(r))),Ex=t=>C(Qa(),e=>f1(t,e)),gx=t=>ln(e=>Se(on(e,ho),{onNone:()=>t,onSome:r=>{switch(r.strategy._tag){case"Sequential":return t;case"Parallel":case"ParallelN":return C(ba(r,Du),n=>mo(t,n))}}})),t1=(t,e)=>O0([La(t,e)]),O0=t=>Xt(io,e=>bn(e,t)),r1=d(2,(t,e)=>Yp(r=>C(mo(t,r),e))),n1=d(t=>Ee(t[1]),(t,e,r)=>F0(t,e,(n,o)=>[n,o],r)),F0=d(t=>Ee(t[1]),(t,e,r,n)=>cr(pi(Xe(t),Xe(e),(o,i)=>Oa(o,i,{onSuccess:r,onFailure:(s,a)=>n?.concurrent?ir(s,a):He(s,a)}),n)));var o1=d(t=>rn(t[0]),(t,e,r)=>Yi(Gr(t,(n,o)=>Yi(e(n,o)),r))),i1=t=>Xt(Ze,Le(lr,t)),s1=t=>Xt(Ze,Le(Eu,t)),yx=t=>Xt(Ze,Le(gu,t)),a1=t=>xn(e=>C(ba(e,lo),r=>E(t,mo(r),A(n=>[br(o=>Ca(r,Jm(o))),n])))),c1=d(t=>Ee(t[1]),(t,e,r)=>pi(t,e,(n,o)=>[n,o],r)),u1=d(t=>Ee(t[1]),(t,e,r)=>r?.concurrent!==!0&&(r?.batching===void 0||r.batching===!1)?Ea(t,e):pi(t,e,(n,o)=>n,r)),l1=d(t=>Ee(t[1]),(t,e,r)=>r?.concurrent!==!0&&(r?.batching===void 0||r.batching===!1)?he(t,e):pi(t,e,(n,o)=>o,r)),pi=d(t=>Ee(t[1]),(t,e,r,n)=>A(ys([t,e],{concurrency:n?.concurrent?2:1,batching:n?.batching,concurrentFinalizers:n?.concurrentFinalizers}),([o,i])=>r(o,i))),D0=t=>t===xw?Q:E(su,C(e=>{let r=Go(e,t),n=cn(r,e);return E(es(t),he(fo(()=>es(n))),Ue)}),Dn),ho=st("effect/Scope"),w0=ho,S5=(t,e)=>{t.state._tag==="Open"&&t.state.finalizers.add(e)},C5={[zm]:zm,[qm]:qm,pipe(){return R(this,arguments)},fork(t){return D(()=>{let e=p1(t);if(this.state._tag==="Closed")return e.state=this.state,e;let r=n=>e.close(n);return this.state.finalizers.add(r),S5(e,n=>D(()=>{this.state._tag==="Open"&&this.state.finalizers.delete(r)})),e})},close(t){return U(()=>{if(this.state._tag==="Closed")return Q;let e=Array.from(this.state.finalizers.values()).reverse();return this.state={_tag:"Closed",exit:t},e.length===0?Q:gb(this.strategy)?E(Mt(e,r=>Xe(r(t))),C(r=>E(Zo(r),ze(vp),Ne(()=>Kt)))):Eb(this.strategy)?E(mx(e,r=>Xe(r(t)),!1),C(r=>E(Zo(r,{parallel:!0}),ze(vp),Ne(()=>Kt)))):E(b0(e,this.strategy.parallelism,r=>Xe(r(t)),!1),C(r=>E(Zo(r,{parallel:!0}),ze(vp),Ne(()=>Kt))))})},addFinalizer(t){return U(()=>this.state._tag==="Closed"?t(this.state.exit):(this.state.finalizers.add(t),Q))}},p1=(t=lo)=>{let e=Object.create(C5);return e.strategy=t,e.state={_tag:"Open",finalizers:new Set},e},Qa=(t=lo)=>D(()=>p1(t)),mo=d(2,(t,e)=>Da(t,Er(gr(ho,e)))),f1=d(2,(t,e)=>E(t,mo(e),Ht(r=>e.close(r)))),b5=t=>os(t,{differ:RP,fork:Hu}),fr=d(2,(t,e)=>Ue(Uu(C(Or(t),r=>ke(Qi(t,e),r)),r=>Qi(t,r)))),Xt=d(2,(t,e)=>Tt(t,r=>fr(t,e(r))));var NP=nA(dw),Sx=b5(Ja),h1=t=>Gr(t,Wp),A0=t=>({...JC,commit(){return jr(this)},[Pu]:Bp,id:()=>ne(t).reduce((r,n)=>aS(r,n.id()),Cr),await:Xe(mx(t,r=>cr(r.await),!1)),children:A(mx(t,r=>r.children,!1),Rh),inheritAll:kr(t,r=>r.inheritAll),poll:A(Mt(t,r=>r.poll),Th(b(ve(new Array)),(r,n)=>{switch(n._tag){case"None":return k();case"Some":switch(r._tag){case"None":return k();case"Some":return b(Oa(n.value,r.value,{onSuccess:(o,i)=>[o,...i],onFailure:ir}))}}})),interruptAsFork:r=>kr(t,n=>n.interruptAsFork(r))});var R0=d(3,(t,e,r)=>M0(t,e,{onSelfWin:(n,o)=>C(n.await,i=>{switch(i._tag){case ot:return C(n.inheritAll,()=>r.onSelfDone(i,o));case nt:return r.onSelfDone(i,o)}}),onOtherWin:(n,o)=>C(n.await,i=>{switch(i._tag){case ot:return C(n.inheritAll,()=>r.onOtherDone(i,o));case nt:return r.onOtherDone(i,o)}})})),m1=t=>$e(e=>br(r=>C(Ka(e(t)),n=>E(e(jr(n)),vr(()=>E(n,Bb(r))))))),Cx=d(2,(t,e)=>br(r=>R0(t,e,{onSelfDone:(n,o)=>_a(n,{onFailure:i=>E(jr(o),_u(s=>ir(i,s))),onSuccess:i=>E(o,_r(r),ke(i))}),onOtherDone:(n,o)=>_a(n,{onFailure:i=>E(jr(o),_u(s=>ir(s,i))),onSuccess:i=>E(o,_r(r),ke(i))})}))),M0=d(3,(t,e,r)=>ae((n,o)=>{let i=o.runtimeFlags,s=an(!0),a=dx(t,n,i,r.selfScope),u=dx(e,n,i,r.otherScope);return sr(f=>{a.addObserver(()=>LP(a,u,r.onSelfWin,s,f)),u.addObserver(()=>LP(u,a,r.onOtherWin,s,f)),a.startFork(t),u.startFork(e)},aS(a.id(),u.id()))})),LP=(t,e,r,n,o)=>{rm(!0,!1)(n)&&o(r(t,e))},gn=d(2,(t,e)=>$e(r=>qe(r(t),{onFailure:n=>qe(e,{onFailure:o=>ce(He(n,o)),onSuccess:()=>ce(n)}),onSuccess:n=>ke(e,n)}))),k5=(t,e,r)=>br(n=>C(C(Ka(Zn(t)),o=>sr(i=>{let s=e.map(f=>f.listeners.count),a=()=>{s.every(f=>f===0)&&e.every(f=>f.result.state.current._tag==="Pending"?!0:!!(f.result.state.current._tag==="Done"&&kp(f.result.state.current.effect)&&f.result.state.current.effect._tag==="Failure"&&np(f.result.state.current.effect.cause)))&&(u.forEach(f=>f()),r?.(),i(ns(o)))};o.addObserver(f=>{u.forEach(p=>p()),i(f)});let u=e.map((f,p)=>{let x=m=>{s[p]=m,a()};return f.listeners.addObserver(x),()=>f.listeners.removeObserver(x)});return a(),D(()=>{u.forEach(f=>f())})})),()=>U(()=>{let o=e.flatMap(i=>i.state.completed?[]:[i]);return kr(o,i=>h0(i.request,Jm(n)))})));var dn=(t,e)=>(e=qr(e),Dn(ae(r=>{let n=nn(r.getFiberRef(Vt),ho),o=Rd(r,t,e),i=r.getFiberRef($o),s=wt(r.getFiberRef(Ze),lr);return ke(ss(n,a=>db(o,a,s,i)),o)}))),bx=t=>Xt(Ze,Le(ni,t)),d1=function(){let t=typeof arguments[0]!="string",e=t?arguments[1]:arguments[0],r=qr(t?arguments[2]:arguments[1]);if(t){let n=arguments[0];return C(dn(e,qr(r)),o=>Ou(n,pr,o))}return n=>C(dn(e,qr(r)),o=>Ou(n,pr,o))};var x1=(t,e,r,n)=>Zc({_tag:"Complete",key:t,exit:e,entryStats:r,timeToLiveMillis:n}),g1=(t,e)=>Zc({_tag:"Pending",key:t,deferred:e}),v5=(t,e)=>Zc({_tag:"Refreshing",deferred:t,complete:e}),T0=Symbol.for("effect/Cache/MapKey"),I0=class{current;[T0]=T0;previous=void 0;next=void 0;constructor(e){this.current=e}[H](){return E(L(this.current),G(L(this.previous)),G(L(this.next)),re(this))}[W](e){return this===e?!0:_5(e)&&I(this.current,e.current)&&I(this.previous,e.previous)&&I(this.next,e.next)}},zu=t=>new I0(t),_5=t=>T(t,T0),P0=class{head=void 0;tail=void 0;add(e){if(e!==this.tail)if(this.tail===void 0)this.head=e,this.tail=e;else{let r=e.previous,n=e.next;n!==void 0&&(e.next=void 0,r!==void 0?(r.next=n,n.previous=r):(this.head=n,this.head.previous=void 0)),this.tail.next=e,e.previous=this.tail,this.tail=e}}remove(){let e=this.head;if(e!==void 0){let r=e.next;r!==void 0?(e.next=void 0,this.head=r,this.head.previous=void 0):(this.head=void 0,this.tail=void 0)}return e}},O5=()=>new P0,F5=(t,e,r,n,o,i)=>({map:t,keys:e,accesses:r,updating:n,hits:o,misses:i}),D5=()=>F5(Ra(),O5(),du(),an(!1),0,0),w5="effect/Cache",A5=Symbol.for(w5),R5={_Key:t=>t,_Error:t=>t,_Value:t=>t},M5="effect/ConsumerCache",T5=Symbol.for(M5),I5={_Key:t=>t,_Error:t=>t,_Value:t=>t},P5=t=>t,kx=t=>({loadedMillis:t}),N0=class{capacity;context;fiberId;lookup;timeToLive;[A5]=R5;[T5]=I5;cacheState;constructor(e,r,n,o,i){this.capacity=e,this.context=r,this.fiberId=n,this.lookup=o,this.timeToLive=i,this.cacheState=D5()}get(e){return A(this.getEither(e),Fh)}get cacheStats(){return D(()=>P5({hits:this.cacheState.hits,misses:this.cacheState.misses,size:Zm(this.cacheState.map)}))}getOption(e){return U(()=>Se(dt(this.cacheState.map,e),{onNone:()=>{let r=zu(e);return this.trackAccess(r),this.trackMiss(),v(k())},onSome:r=>this.resolveMapValue(r)}))}getOptionComplete(e){return U(()=>Se(dt(this.cacheState.map,e),{onNone:()=>{let r=zu(e);return this.trackAccess(r),this.trackMiss(),v(k())},onSome:r=>this.resolveMapValue(r,!0)}))}contains(e){return D(()=>An(this.cacheState.map,e))}entryStats(e){return D(()=>{let r=dt(this.cacheState.map,e);if(q(r))switch(r.value._tag){case"Complete":{let n=r.value.entryStats.loadedMillis;return b(kx(n))}case"Pending":return k();case"Refreshing":{let n=r.value.complete.entryStats.loadedMillis;return b(kx(n))}}return k()})}getEither(e){return U(()=>{let r=e,n,o,i=Wt(dt(this.cacheState.map,r));return i===void 0&&(o=sC(this.fiberId),n=zu(r),An(this.cacheState.map,r)?i=Wt(dt(this.cacheState.map,r)):wr(this.cacheState.map,r,g1(n,o))),i===void 0?(this.trackAccess(n),this.trackMiss(),A(this.lookupValueOf(e,o),be)):C(this.resolveMapValue(i),Se({onNone:()=>this.getEither(e),onSome:s=>v(Pe(s))}))})}invalidate(e){return D(()=>{Ma(this.cacheState.map,e)})}invalidateWhen(e,r){return D(()=>{let n=dt(this.cacheState.map,e);q(n)&&n.value._tag==="Complete"&&n.value.exit._tag==="Success"&&r(n.value.exit.value)&&Ma(this.cacheState.map,e)})}get invalidateAll(){return D(()=>{this.cacheState.map=Ra()})}refresh(e){return uo(r=>U(()=>{let n=e,o=sC(this.fiberId),i=Wt(dt(this.cacheState.map,n));if(i===void 0&&(An(this.cacheState.map,n)?i=Wt(dt(this.cacheState.map,n)):wr(this.cacheState.map,n,g1(zu(n),o))),i===void 0)return Ue(this.lookupValueOf(e,o));switch(i._tag){case"Complete":{if(this.hasExpired(r,i.timeToLiveMillis)){let s=Wt(dt(this.cacheState.map,n));return I(s,i)&&Ma(this.cacheState.map,n),Ue(this.get(e))}return E(this.lookupValueOf(e,o),Ad(()=>{let s=Wt(dt(this.cacheState.map,n));if(I(s,i)){let a=v5(o,i);return wr(this.cacheState.map,n,a),!0}return!1}),Ue)}case"Pending":return Ie(i.deferred);case"Refreshing":return Ie(i.deferred)}}))}set(e,r){return uo(n=>D(()=>{let o=n.unsafeCurrentTimeMillis(),i=e,s=Nt(r),a=x1(zu(i),s,kx(o),o+Gn(bt(this.timeToLive(s))));wr(this.cacheState.map,i,a)}))}get size(){return D(()=>Zm(this.cacheState.map))}get values(){return D(()=>{let e=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&e.push(r[1].exit.value);return e})}get entries(){return D(()=>{let e=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&e.push([r[0],r[1].exit.value]);return e})}get keys(){return D(()=>{let e=[];for(let r of this.cacheState.map)r[1]._tag==="Complete"&&r[1].exit._tag==="Success"&&e.push(r[0]);return e})}resolveMapValue(e,r=!1){return uo(n=>{switch(e._tag){case"Complete":return this.trackAccess(e.key),this.hasExpired(n,e.timeToLiveMillis)?(Ma(this.cacheState.map,e.key.current),v(k())):(this.trackHit(),A(e.exit,b));case"Pending":return this.trackAccess(e.key),this.trackHit(),r?v(k()):A(Ie(e.deferred),b);case"Refreshing":return this.trackAccess(e.complete.key),this.trackHit(),this.hasExpired(n,e.complete.timeToLiveMillis)?r?v(k()):A(Ie(e.deferred),b):A(e.complete.exit,b)}})}trackHit(){this.cacheState.hits=this.cacheState.hits+1}trackMiss(){this.cacheState.misses=this.cacheState.misses+1}trackAccess(e){if(ls(this.cacheState.accesses,e),rm(this.cacheState.updating,!1,!0)){let r=!0;for(;r;){let o=Rn(this.cacheState.accesses,Ot);o===Ot?r=!1:this.cacheState.keys.add(o)}let n=Zm(this.cacheState.map);for(r=n>this.capacity;r;){let o=this.cacheState.keys.remove();o!==void 0?An(this.cacheState.map,o.current)&&(Ma(this.cacheState.map,o.current),n=n-1,r=n>this.capacity):r=!1}Sr(this.cacheState.updating,!1)}}hasExpired(e,r){return e.unsafeCurrentTimeMillis()>r}lookupValueOf(e,r){return uo(n=>U(()=>{let o=e;return E(this.lookup(e),zr(this.context),Xe,C(i=>{let s=n.unsafeCurrentTimeMillis(),a=kx(s),u=x1(zu(o),i,a,s+Gn(bt(this.timeToLive(i))));return wr(this.cacheState.map,o,u),he(kA(r,i),i)}),vr(()=>he(vA(r),D(()=>{Ma(this.cacheState.map,o)}))))}))}};var E1=(t,e,r)=>new N0(t,Dt(),om,e,n=>bt(r(n)));var Zp=On,Xa=ht,y1=or;var vx=np,_x=fa;var qu=Fn,Ox=Ow;var Ss=_m;var S1=aA;var C1=sp;var N={};Di(N,{Do:()=>dJ,EffectTypeId:()=>g7,Service:()=>dK,Tag:()=>mK,acquireRelease:()=>Jr,acquireReleaseInterruptible:()=>xG,acquireUseRelease:()=>zk,addFinalizer:()=>gG,all:()=>hf,allSuccesses:()=>k7,allWith:()=>b7,allowInterrupt:()=>rG,andThen:()=>AJ,annotateCurrentSpan:()=>nK,annotateLogs:()=>lV,annotateLogsScoped:()=>pV,annotateSpans:()=>rK,ap:()=>UV,as:()=>Ei,asSome:()=>XN,asSomeError:()=>uG,asVoid:()=>So,async:()=>Qu,asyncEffect:()=>B7,awaitAllChildren:()=>vG,bind:()=>xJ,bindAll:()=>gJ,bindTo:()=>EJ,blocked:()=>zV,cacheRequestResult:()=>JV,cached:()=>ff,cachedFunction:()=>S7,cachedInvalidateWithTTL:()=>y7,cachedWithTTL:()=>E7,catch:()=>q7,catchAll:()=>sg,catchAllCause:()=>$u,catchAllDefect:()=>j7,catchIf:()=>G7,catchSome:()=>J7,catchSomeCause:()=>KN,catchSomeDefect:()=>V7,catchTag:()=>ag,catchTags:()=>cg,cause:()=>K7,checkInterruptible:()=>nG,clock:()=>$N,clockWith:()=>qG,configProviderWith:()=>nJ,console:()=>JG,consoleWith:()=>VG,context:()=>Yu,contextWith:()=>eL,contextWithEffect:()=>sJ,currentParentSpan:()=>iK,currentSpan:()=>oK,custom:()=>W7,daemonChildren:()=>_G,delay:()=>XG,descriptor:()=>OG,descriptorWith:()=>FG,die:()=>xi,dieMessage:()=>oc,dieSync:()=>JN,diffFiberRefs:()=>DG,disconnect:()=>oG,dropUntil:()=>Lk,dropWhile:()=>Bk,either:()=>CJ,ensuring:()=>Co,ensuringChild:()=>wG,ensuringChildren:()=>AG,eventually:()=>Q7,every:()=>v7,exists:()=>_7,exit:()=>xt,fail:()=>Ve,failCause:()=>Yt,failCauseSync:()=>GN,failSync:()=>jN,fiberId:()=>RG,fiberIdWith:()=>Gk,filter:()=>HN,filterMap:()=>O7,filterOrDie:()=>kJ,filterOrDieMessage:()=>vJ,filterOrElse:()=>tL,filterOrFail:()=>rL,finalizersMask:()=>SG,findFirst:()=>UN,firstSuccessOf:()=>gV,flatMap:()=>K,flatten:()=>bo,flip:()=>lG,flipWith:()=>pG,fn:()=>xK,forEach:()=>yo,forever:()=>oL,fork:()=>MG,forkAll:()=>TG,forkDaemon:()=>fg,forkIn:()=>Nn,forkScoped:()=>hg,forkWithErrorHandler:()=>IG,fromFiber:()=>PG,fromFiberEffect:()=>NG,fromNullable:()=>fK,functionWithSpan:()=>lK,gen:()=>gi,getFiberRefs:()=>GJ,getRuntimeFlags:()=>bV,head:()=>F7,if:()=>bJ,ignore:()=>Hk,ignoreLogged:()=>X7,inheritFiberRefs:()=>JJ,interrupt:()=>ks,interruptWith:()=>iG,interruptible:()=>Ar,interruptibleMask:()=>sG,intoDeferred:()=>mg,isEffect:()=>Eo,isFailure:()=>ZJ,isSuccess:()=>eV,iterate:()=>LJ,labelMetrics:()=>FV,labelMetricsScoped:()=>wV,let:()=>yJ,liftPredicate:()=>cG,linkSpans:()=>cK,locally:()=>Qk,locallyScoped:()=>KJ,locallyScopedWith:()=>QJ,locallyWith:()=>VJ,log:()=>tV,logAnnotations:()=>fV,logDebug:()=>oV,logError:()=>aV,logFatal:()=>cV,logInfo:()=>iV,logTrace:()=>nV,logWarning:()=>sV,logWithLevel:()=>rV,loop:()=>BJ,makeLatch:()=>TV,makeSemaphore:()=>xg,makeSpan:()=>aL,makeSpanScoped:()=>uK,map:()=>ie,mapAccum:()=>fG,mapBoth:()=>Uk,mapError:()=>ic,mapErrorCause:()=>hG,mapInputContext:()=>Jk,match:()=>Sf,matchCause:()=>_s,matchCauseEffect:()=>Vr,matchEffect:()=>iL,merge:()=>mG,mergeAll:()=>D7,metricLabels:()=>AV,negate:()=>dG,never:()=>ig,none:()=>H7,onError:()=>qk,onExit:()=>EG,onInterrupt:()=>aG,once:()=>C7,option:()=>SJ,optionFromOptional:()=>hK,orDie:()=>el,orDieWith:()=>mV,orElse:()=>sL,orElseFail:()=>dV,orElseSucceed:()=>xV,parallelErrors:()=>$7,parallelFinalizers:()=>yG,partition:()=>w7,patchFiberRefs:()=>XJ,patchRuntimeFlags:()=>kV,promise:()=>Wk,provide:()=>Zu,provideService:()=>aJ,provideServiceEffect:()=>cJ,race:()=>Ef,raceAll:()=>RJ,raceFirst:()=>nL,raceWith:()=>yf,random:()=>EV,randomWith:()=>yV,reduce:()=>zN,reduceEffect:()=>A7,reduceRight:()=>R7,reduceWhile:()=>M7,repeat:()=>dg,repeatN:()=>WJ,repeatOrElse:()=>HJ,replicate:()=>T7,replicateEffect:()=>I7,request:()=>GV,retry:()=>QN,retryOrElse:()=>Z7,runCallback:()=>PV,runFork:()=>IV,runPromise:()=>NV,runPromiseExit:()=>LV,runRequestBlock:()=>qV,runSync:()=>Os,runSyncExit:()=>BV,runtime:()=>tl,sandbox:()=>Y7,schedule:()=>UJ,scheduleForked:()=>zJ,scheduleFrom:()=>qJ,scope:()=>ug,scopeWith:()=>jk,scoped:()=>pg,scopedWith:()=>lg,sequentialFinalizers:()=>CG,serviceConstants:()=>pJ,serviceFunction:()=>uJ,serviceFunctionEffect:()=>lJ,serviceFunctions:()=>Vk,serviceMembers:()=>fJ,serviceOption:()=>Kk,serviceOptional:()=>hJ,setFiberRefs:()=>$J,sleep:()=>$G,spanAnnotations:()=>sK,spanLinks:()=>aK,step:()=>jV,succeed:()=>me,succeedNone:()=>VN,succeedSome:()=>U7,summarized:()=>MJ,supervised:()=>LG,suspend:()=>Re,sync:()=>_e,tagMetrics:()=>OV,tagMetricsScoped:()=>DV,takeUntil:()=>P7,takeWhile:()=>qN,tap:()=>Rr,tapBoth:()=>TJ,tapDefect:()=>IJ,tapError:()=>PJ,tapErrorCause:()=>sc,tapErrorTag:()=>NJ,timed:()=>YG,timedWith:()=>ZG,timeout:()=>eJ,timeoutFail:()=>YN,timeoutFailCause:()=>ZN,timeoutOption:()=>tJ,timeoutTo:()=>rJ,tracer:()=>XV,tracerWith:()=>$V,transplant:()=>BG,try:()=>mf,tryMap:()=>df,tryMapPromise:()=>eG,tryPromise:()=>Pn,uninterruptible:()=>vs,uninterruptibleMask:()=>xf,unless:()=>_J,unlessEffect:()=>OJ,unsafeMakeLatch:()=>MV,unsafeMakeSemaphore:()=>Xk,unsandbox:()=>tG,updateFiberRefs:()=>YJ,updateService:()=>mJ,useSpan:()=>$k,using:()=>bG,validate:()=>WV,validateAll:()=>N7,validateFirst:()=>L7,validateWith:()=>HV,void:()=>Me,when:()=>gf,whenEffect:()=>FJ,whenFiberRef:()=>DJ,whenRef:()=>wJ,whileLoop:()=>jJ,withClock:()=>GG,withClockScoped:()=>jG,withConcurrency:()=>WG,withConfigProvider:()=>oJ,withConfigProviderScoped:()=>iJ,withConsole:()=>QG,withConsoleScoped:()=>KG,withEarlyRelease:()=>kG,withFiberRuntime:()=>Xu,withLogSpan:()=>uV,withMaxOpsBeforeYield:()=>zG,withMetric:()=>RV,withParentSpan:()=>Yk,withRandom:()=>SV,withRandomScoped:()=>CV,withRequestBatching:()=>VV,withRequestCache:()=>QV,withRequestCaching:()=>KV,withRuntimeFlagsPatch:()=>vV,withRuntimeFlagsPatchScoped:()=>_V,withScheduler:()=>HG,withSchedulingPriority:()=>UG,withSpan:()=>cL,withSpanScoped:()=>pK,withTracer:()=>YV,withTracerEnabled:()=>eK,withTracerScoped:()=>ZV,withTracerTiming:()=>tK,withUnhandledErrorLogLevel:()=>hV,yieldNow:()=>z7,zip:()=>ko,zipLeft:()=>gg,zipRight:()=>Oe,zipWith:()=>yi});var N5="effect/ScheduleInterval",ef=Symbol.for(N5),L0={[ef]:ef,startMillis:0,endMillis:0},B0=(t,e)=>t>e?L0:{[ef]:ef,startMillis:t,endMillis:e},b1=d(2,(t,e)=>k1(t,e)===t),k1=d(2,(t,e)=>t.endMillis<=e.startMillis?t:e.endMillis<=t.startMillis?e:t.startMillis<e.startMillis?t:e.startMillis<t.startMillis?e:t.endMillis<=e.endMillis?t:e);var v1=t=>t.startMillis>=t.endMillis;var _1=d(2,(t,e)=>{let r=Math.max(t.startMillis,e.startMillis),n=Math.min(t.endMillis,e.endMillis);return B0(r,n)});var O1=t=>B0(t,Number.POSITIVE_INFINITY);var W0=L0,F1=b1;var D1=v1;var w1=_1;var A1=O1;var W5="effect/ScheduleIntervals",U0=Symbol.for(W5),z0=t=>({[U0]:U0,intervals:t});var R1=d(2,(t,e)=>H5(t.intervals,e.intervals,mt())),H5=(t,e,r)=>{let n=t,o=e,i=r;for(;St(n)&&St(o);){let s=E(Ct(n),w1(Ct(o))),a=D1(s)?i:E(i,Be(s));E(Ct(n),F1(Ct(o)))?n=Rt(n):o=Rt(o),i=a}return z0(Br(i))},Fx=t=>E(t.intervals,Qs,Ne(()=>W0)).startMillis,M1=t=>E(t.intervals,Qs,Ne(()=>W0)).endMillis,T1=d(2,(t,e)=>Fx(t)<Fx(e)),I1=t=>St(t.intervals);var P1=z0;var N1=R1,Dx=Fx,q0=M1,L1=T1,B1=I1;var j0="Continue",W1="Done",H1=t=>({_tag:j0,intervals:t}),U1=t=>({_tag:j0,intervals:P1(xe(t))}),z1={_tag:W1},q1=t=>t._tag===j0,j1=t=>t._tag===W1;var G1=H1;var J1=U1,ju=z1,G0=q1,$a=j1;var Ax=ho,Ya=Cp,V1=ss,Cs=Ca,Rx=mo,Mx=ba;var Tx=Qa;var q5="effect/Schedule",X1=Symbol.for(q5),$1=t=>T(t,X1),j5="effect/ScheduleDriver",G5=Symbol.for(j5),J5={_Out:t=>t,_In:t=>t,_R:t=>t},V5={_Out:t=>t,_In:t=>t,_R:t=>t},V0=class{initial;step;[X1]=J5;constructor(e,r){this.initial=e,this.step=r}pipe(){return R(this,arguments)}},K0=class{schedule;ref;[G5]=V5;constructor(e,r){this.schedule=e,this.ref=r}get state(){return A(fn(this.ref),e=>e[1])}get last(){return C(fn(this.ref),([e,r])=>{switch(e._tag){case"None":return ar(()=>new Fr);case"Some":return v(e.value)}})}get reset(){return ao(this.ref,[k(),this.schedule.initial])}next(e){return E(A(fn(this.ref),r=>r[1]),C(r=>E(yu,C(n=>E(U(()=>this.schedule.step(n,e,r)),C(([o,i,s])=>{let a=ao(this.ref,[b(i),o]);if($a(s))return he(a,oe(k()));let u=Dx(s.intervals)-n;return u<=0?ke(a,i):E(a,he(Wa(Wi(u))),ke(i))}))))))}},tf=(t,e)=>new V0(t,e);var K5=d(2,(t,e)=>$0(t,(r,n)=>D(()=>e(r,n)))),$0=d(2,(t,e)=>tf(t.initial,(r,n,o)=>C(t.step(r,n,o),([i,s,a])=>$a(a)?v([i,s,ju]):A(e(n,s),u=>u?[i,s,a]:[i,s,ju]))));var Y0=t=>E(Na([k(),t.initial]),A(e=>new K0(t,e)));var Y1=d(2,(t,e)=>Q5(t,e,N1)),Q5=d(3,(t,e,r)=>tf([t.initial,e.initial],(n,o,i)=>E(ro(t.step(n,o,i[0]),e.step(n,o,i[1]),(s,a)=>[s,a]),C(([[s,a,u],[f,p,x]])=>G0(u)&&G0(x)?Q0(t,e,o,s,a,u.intervals,f,p,x.intervals,r):v([[s,f],[a,p],ju]))))),Q0=(t,e,r,n,o,i,s,a,u,f)=>{let p=f(i,u);return B1(p)?v([[n,s],[o,a],G1(p)]):E(i,L1(u))?C(t.step(q0(i),r,n),([x,m,c])=>$a(c)?v([[x,s],[m,a],ju]):Q0(t,e,r,x,m,c.intervals,s,a,u,f)):C(e.step(q0(u),r,s),([x,m,c])=>$a(c)?v([[n,x],[o,m],ju]):Q0(t,e,r,n,o,i,x,m,c.intervals,f))};var X5=d(2,(t,e)=>$5(t,r=>D(()=>e(r)))),$5=d(2,(t,e)=>tf(t.initial,(r,n,o)=>C(t.step(r,n,o),([i,s,a])=>A(e(s),u=>[i,u,a]))));var Y5=t=>tf(t.initial,(e,r,n)=>E(t.step(e,r,n),A(([o,i,s])=>[o,r,s])));var Z1=t=>e7(rk,e=>e<t);var Z5=(t,e)=>tf(t,(r,n,o)=>D(()=>[e(o),o,J1(A1(r))]));var e2=d(2,(t,e)=>$0(t,(r,n)=>Dd(e(r))));var t2=d(2,(t,e)=>$0(t,(r,n)=>e(r))),e7=d(2,(t,e)=>K5(t,(r,n)=>e(n)));var Ix=Symbol.for("effect/Schedule/ScheduleDefect"),X0=class{error;[Ix];constructor(e){this.error=e,this[Ix]=Ix}},t7=t=>T(t,Ix),Px=t=>Wr(t,e=>Ko(new X0(e))),r2=t=>Xn(t,e=>Se(Ji(e,r=>tu(r)&&t7(r.defect)?b(r.defect):k()),{onNone:()=>ce(e),onSome:r=>oe(r.error)})),K1=d(2,(t,e)=>Z0(t,e,(r,n)=>oe(r))),n2=d(2,(t,e)=>{if($1(e))return K1(t,e);let r=e.schedule??Y5(rk),n=e.while?t2(r,s=>{let a=e.while(s);return typeof a=="boolean"?v(a):Px(a)}):r,o=e.until?e2(n,s=>{let a=e.until(s);return typeof a=="boolean"?v(a):Px(a)}):n,i=e.times?Y1(o,Z1(e.times)).pipe(X5(s=>s[0])):o;return r2(K1(t,i))}),Z0=d(3,(t,e,r)=>C(Y0(e),n=>kt(t,{onFailure:o=>r(o,k()),onSuccess:o=>o2(t,n,r,o)}))),o2=(t,e,r,n)=>kt(e.next(n),{onFailure:()=>xa(e.last),onSuccess:o=>kt(t,{onFailure:i=>r(i,b(o)),onSuccess:i=>o2(t,e,r,i)})}),Q1=d(2,(t,e)=>ek(t,e,(r,n)=>oe(r))),i2=d(2,(t,e)=>{if($1(e))return Q1(t,e);let r=e.schedule??rk,n=e.while?t2(r,s=>{let a=e.while(s);return typeof a=="boolean"?v(a):Px(a)}):r,o=e.until?e2(n,s=>{let a=e.until(s);return typeof a=="boolean"?v(a):Px(a)}):n,i=e.times?Y1(o,Z1(e.times)):o;return r2(Q1(t,i))}),ek=d(3,(t,e,r)=>C(Y0(e),n=>s2(t,n,r))),s2=(t,e,r)=>Wr(t,n=>kt(e.next(n),{onFailure:()=>E(e.last,xa,C(o=>r(n,o))),onSuccess:()=>s2(t,e,r)})),Nx=d(2,(t,e)=>tk(t,void 0,e)),tk=d(3,(t,e,r)=>C(Y0(r),n=>a2(t,e,n))),a2=(t,e,r)=>kt(r.next(e),{onFailure:()=>xa(r.last),onSuccess:()=>C(t,n=>a2(t,n,r))});var rk=Z5(0,t=>t+1);var ok=class{permits;waiters=new Set;taken=0;constructor(e){this.permits=e}get free(){return this.permits-this.taken}take=e=>pp(r=>{if(this.free<e){let n=()=>{this.free<e||(this.waiters.delete(n),this.taken+=e,r(v(e)))};return this.waiters.add(n),D(()=>{this.waiters.delete(n)})}return this.taken+=e,r(v(e))});updateTaken=e=>ae(r=>(this.taken=e(this.taken),this.waiters.size>0&&r.getFiberRef(ai).scheduleTask(()=>{let n=this.waiters.values(),o=n.next();for(;o.done===!1&&this.free>0;)o.value(),o=n.next()},r.getFiberRef(no)),v(this.free)));release=e=>this.updateTaken(r=>r-e);releaseAll=this.updateTaken(e=>0);withPermits=e=>r=>$e(n=>C(n(this.take(e)),o=>gn(n(r),this.release(o))));withPermitsIfAvailable=e=>r=>$e(n=>U(()=>this.free<e?Ha:(this.taken+=e,gn(n(ku(r)),this.release(e)))))},Bx=t=>new ok(t),l2=t=>D(()=>Bx(t)),ik=class extends Mn{isOpen;waiters=[];scheduled=!1;constructor(e){super(),this.isOpen=e}commit(){return this.await}unsafeSchedule(e){return this.scheduled||this.waiters.length===0?Q:(this.scheduled=!0,e.currentScheduler.scheduleTask(this.flushWaiters,e.getFiberRef(no)),Q)}flushWaiters=()=>{this.scheduled=!1;let e=this.waiters;this.waiters=[];for(let r=0;r<e.length;r++)e[r](Kt)};open=ae(e=>this.isOpen?Q:(this.isOpen=!0,this.unsafeSchedule(e)));release=ae(e=>this.isOpen?Q:this.unsafeSchedule(e));await=pp(e=>this.isOpen?e(Q):(this.waiters.push(e),D(()=>{let r=this.waiters.indexOf(e);r!==-1&&this.waiters.splice(r,1)})));unsafeClose(){this.isOpen=!1}close=D(()=>{this.isOpen=!1});whenOpen=e=>he(this.await,e)},ak=t=>new ik(t??!1),p2=t=>D(()=>ak(t)),f2=t=>Wx(t,h1),h2=d(2,(t,e)=>A(ck(t,e),r=>r[0])),ck=d(2,(t,e)=>{let r=bt(e);return C(Ur(),n=>A(Hx(k()),o=>[zr(r7(t,r,o),n),n7(o)]))}),u2=(t,e,r)=>{let n=Gn(bt(e));return E(It(),Ut(o=>eo(t,o)),A(o=>b([r+n,o])))},r7=(t,e,r)=>$e(n=>E(uo(o=>o.currentTimeMillis),C(o=>a7(r,i=>{switch(i._tag){case"None":return b(u2(t,e,o));case"Some":{let[s]=i.value;return s-o<=0?b(u2(t,e,o)):k()}}})),C(o=>Y(o)?Qo("BUG: Effect.cachedInvalidate - please report an issue at https://github.com/Effect-TS/effect/issues"):n(ut(o.value[1]))))),n7=t=>ao(t,k()),m2=d(2,(t,e)=>Wx(t,r=>e(A0(r)))),Wx=d(2,(t,e)=>C(vP,r=>E(pk(t,r),gn(C(r.value,e))))),d2=d(t=>rn(t[0]),(t,e)=>e?.discard?kr(t,mn):A(Mt(t,mn),A0)),uk=d(2,(t,e)=>$e(r=>C(e.fork(lo),n=>E(r(t),Ht(o=>n.close(o)),Ka,Ut(o=>n.addFinalizer(()=>br(i=>I(i,o.id())?Q:Ue(ns(o))))))))),lk=t=>xn(e=>uk(t,e)),x2=t=>jr(t),g2=t=>U(()=>C(t,jr)),nk=Symbol.for("effect/Effect/memoizeFunction.key"),Lx=class{a;eq;[nk]=nk;constructor(e,r){this.a=e,this.eq=r}[W](e){return T(e,nk)?this.eq?this.eq(this.a,e.a):I(this.a,e.a):!1}[H](){return this.eq?0:re(this,L(this.a))}},E2=(t,e)=>E(D(()=>Ra()),C(Hx),A(r=>n=>E(r.modifyEffect(o=>{let i=E(o,dt(new Lx(n,e)));return Y(i)?E(It(),Ut(s=>E(vu(t(n)),eo(s),mn)),A(s=>[s,E(o,wr(new Lx(n,e),s))])):v([i.value,o])}),C(ut),C(([o,i])=>E(Ba(o),ke(i)))))),y2=d(2,(t,e)=>E(Xe(t),Cx(Xe(e)),r=>cr(r))),S2=d(2,(t,e)=>E(t,Nx(e),lk)),pk=d(2,(t,e)=>vt(Sx,n=>n.zip(e))(t)),C2=d(2,(t,e)=>fk(t,{onTimeout:()=>fA(e),duration:e})),fk=d(2,(t,{duration:e,onTimeout:r})=>cr(rf(t,{onTimeout:()=>ar(r),onSuccess:v,duration:e}))),b2=d(2,(t,{duration:e,onTimeout:r})=>cr(rf(t,{onTimeout:()=>Xo(r),onSuccess:v,duration:e}))),k2=d(2,(t,e)=>rf(t,{duration:e,onSuccess:b,onTimeout:k})),rf=d(2,(t,{duration:e,onSuccess:r,onTimeout:n})=>br(o=>M0(t,Zn(Wa(e)),{onSelfWin:(i,s)=>C(i.await,a=>a._tag==="Success"?C(i.inheritAll,()=>ke(_r(s,o),r(a.value))):C(_r(s,o),()=>ge(a.cause))),onOtherWin:(i,s)=>C(i.await,a=>a._tag==="Success"?C(i.inheritAll,()=>ke(_r(s,o),n())):C(_r(s,o),()=>ge(a.cause))),otherScope:xs}))),o7="effect/Ref/SynchronizedRef",i7=Symbol.for(o7),s7={_A:t=>t},sk=class extends Mn{ref;withLock;[i7]=s7;[gd]=QC;[fs]=fs;constructor(e,r){super(),this.ref=e,this.withLock=r,this.get=fn(this.ref)}get;commit(){return this.get}modify(e){return this.modifyEffect(r=>v(e(r)))}modifyEffect(e){return this.withLock(E(C(fn(this.ref),e),C(([r,n])=>ke(ao(this.ref,n),r))))}},Hx=t=>D(()=>v2(t)),v2=t=>{let e=Ed(t),r=Bx(1);return new sk(e,r.withPermits(1))},a7=d(2,(t,e)=>t.modifyEffect(r=>{let n=e(r);switch(n._tag){case"None":return v([r,r]);case"Some":return A(n.value,o=>[o,o])}}));var _2=d(t=>Ee(t[0]),(t,e,r)=>C(t,n=>ys(e(n),r).pipe(A(o=>Object.assign({},n,o)))));var F2=Symbol.for("effect/ManagedRuntime");var D2="ExtendScope",w2="Fold",hk="Fresh",A2="FromEffect",R2="Scoped",M2="Suspend",T2="Provide",mk="ProvideMerge",I2="ZipWith";var Ux=Wp;var dk=ax,mi=ns;var P2=_r;var xk=jr;var Gu=t=>(e,r)=>{let n=am(),o=[[Vt,[[n,t.context]]]];r?.scheduler&&o.push([ai,[[n,r.scheduler]]]);let i=NC(t.fiberRefs,{entries:o,forkAs:n});r?.updateRefs&&(i=r.updateRefs(i,n));let s=new $p(n,i,t.runtimeFlags),a=e;r?.scope&&(a=C(Mx(r.scope,lo),f=>he(Cp(f,br(p=>I(p,s.id())?Q:_r(s,p))),Ht(e,p=>Cs(f,p)))));let u=s.currentSupervisor;return u!==Ja&&(u.onStart(t.context,a,k(),s),s.addObserver(f=>u.onEnd(f,s))),xs.add(t.runtimeFlags,s),r?.immediate===!1?s.resume(a):s.start(a),s},Gx=t=>(e,r={})=>{let n=Gu(t)(e,r);return r.onExit&&n.addObserver(o=>{r.onExit(o)}),(o,i)=>Gx(t)(E(n,P2(o??Cr)),{...i,onExit:i?.onExit?s=>i.onExit(OA(s)):void 0})},Sk=t=>e=>{let r=bk(t)(e);if(r._tag==="Failure")throw Ck(r.effect_instruction_i0);return r.effect_instruction_i0},Ek=class extends Error{fiber;_tag="AsyncFiberException";constructor(e){super(`Fiber #${e.id().id} cannot be resolved synchronously. This is caused by using runSync on an effect that performs async work`),this.fiber=e,this.name=this._tag,this.stack=this.message}},l7=t=>{let e=Error.stackTraceLimit;Error.stackTraceLimit=0;let r=new Ek(t);return Error.stackTraceLimit=e,r};var gk=Symbol.for("effect/Runtime/FiberFailure"),qx=Symbol.for("effect/Runtime/FiberFailure/Cause"),yk=class extends Error{[gk];[qx];constructor(e){super(),this[gk]=gk,this[qx]=e;let r=Om(e);if(r.length>0){let n=r[0];this.name=n.name,this.message=n.message,this.stack=n.stack}this.name=`(FiberFailure) ${this.name}`,(this.message===void 0||this.message.length===0)&&(this.message="An error has occurred")}toJSON(){return{_id:"FiberFailure",cause:this[qx].toJSON()}}toString(){return"(FiberFailure) "+(this.stack??this.message)}[ee](){return this.toString()}},Ck=t=>{let e=Error.stackTraceLimit;Error.stackTraceLimit=0;let r=new yk(t);return Error.stackTraceLimit=e,r};var N2=t=>{let e=t;switch(e._op){case"Failure":case"Success":return e;case"Left":return pu(e.left);case"Right":return ve(e.right);case"Some":return ve(e.value);case"None":return pu(Fr())}},bk=t=>e=>{let r=N2(e);if(r)return r;let n=new Yd,o=Gu(t)(e,{scheduler:n});n.flush();let i=o.unsafePoll();return i||ei(Pm(l7(o),Qm(o)))},L2=t=>(e,r)=>Jx(t)(e,r).then(n=>{switch(n._tag){case ot:return n.effect_instruction_i0;case nt:throw Ck(n.effect_instruction_i0)}}),Jx=t=>(e,r)=>new Promise(n=>{let o=N2(e);o&&n(o);let i=Gu(t)(e);i.addObserver(s=>{n(s)}),r?.signal!==void 0&&(r.signal.aborted?i.unsafeInterruptAsFork(i.id()):r.signal.addEventListener("abort",()=>{i.unsafeInterruptAsFork(i.id())},{once:!0}))}),jx=class{context;runtimeFlags;fiberRefs;constructor(e,r,n){this.context=e,this.runtimeFlags=r,this.fiberRefs=n}pipe(){return R(this,arguments)}},B2=t=>new jx(t.context,t.runtimeFlags,t.fiberRefs),Ju=()=>ae((t,e)=>v(new jx(t.getFiberRef(Vt),e.runtimeFlags,t.getFiberRefs()))),W2=OS(Qn,vS,kS),xo=B2({context:Dt(),runtimeFlags:W2,fiberRefs:LC()});var H2=Gx(xo),U2=Gu(xo),z2=L2(xo),q2=Jx(xo),j2=Sk(xo),G2=bk(xo),J2=t=>U(()=>{let e;return C(It(),r=>C(Ju(),n=>$e(o=>he(mn(o(qe(t(i=>Gx(n)(eo(i,r))),{onFailure:i=>cs(r,i),onSuccess:i=>(e=i,Q)}))),o(vr(ut(r),()=>e??Q))))))});var V2=d(2,(t,e)=>t.modifyEffect(e));var f7="effect/Layer",Kx=Symbol.for(f7),h7={_RIn:t=>t,_E:t=>t,_ROut:t=>t},In={[Kx]:h7,pipe(){return R(this,arguments)}},m7="effect/Layer/MemoMap",nf=Symbol.for(m7),sf=t=>T(t,Kx),_k=t=>t._op_layer===hk,vk=class{ref;[nf];constructor(e){this.ref=e,this[nf]=nf}getOrElseMemoize(e,r){return E(V2(this.ref,n=>{let o=n.get(e);if(o!==void 0){let[i,s]=o,a=E(i,C(([u,f])=>E(Ba(u),ke(f))),Ht(va({onFailure:()=>Q,onSuccess:()=>ss(r,s)})));return v([a,n])}return E(Na(0),C(i=>E(It(),C(s=>E(Na(()=>Q),A(a=>{let u=$e(p=>E(Qa(),C(x=>E(p(C(Dk(e,x,!0),m=>vu(m(this)))),Xe,C(m=>{switch(m._tag){case nt:return E(cs(s,m.effect_instruction_i0),he(Ca(x,m)),he(ce(m.effect_instruction_i0)));case ot:return E(ao(a,c=>E(Ca(x,c),ts(yd(i,l=>[l===1,l-1])),Ue)),he(wp(i,c=>c+1)),he(ss(r,c=>E(D(()=>n.delete(e)),he(fn(a)),C(l=>l(c))))),he(us(s,m.effect_instruction_i0)),ke(m.effect_instruction_i0[1]))}}))))),f=[E(ut(s),Ht(_a({onFailure:()=>Q,onSuccess:()=>wp(i,p=>p+1)}))),p=>E(fn(a),C(x=>x(p)))];return[u,_k(e)?n:n.set(e,f)]}))))))}),cr)}},Ok=U(()=>A(Hx(new Map),t=>new vk(t)));var X2=t=>xn(e=>bs(t,e)),bs=d(2,(t,e)=>C(Ok,r=>C(Dk(t,e),n=>n(r)))),Fk=d(3,(t,e,r)=>C(Dk(t,r),n=>n(e))),Dk=(t,e,r=!1)=>{let n=t;switch(n._op_layer){case"Locally":return D(()=>o=>n.f(o.getOrElseMemoize(n.self,e)));case"ExtendScope":return D(()=>o=>xn(i=>o.getOrElseMemoize(n.layer,i)));case"Fold":return D(()=>o=>E(o.getOrElseMemoize(n.layer,e),qe({onFailure:i=>o.getOrElseMemoize(n.failureK(i),e),onSuccess:i=>o.getOrElseMemoize(n.successK(i),e)})));case"Fresh":return D(()=>o=>E(n.layer,bs(e)));case"FromEffect":return r?D(()=>o=>n.effect):D(()=>o=>o.getOrElseMemoize(t,e));case"Provide":return D(()=>o=>E(o.getOrElseMemoize(n.first,e),C(i=>E(o.getOrElseMemoize(n.second,e),zr(i)))));case"Scoped":return r?D(()=>o=>mo(n.effect,e)):D(()=>o=>o.getOrElseMemoize(t,e));case"Suspend":return D(()=>o=>o.getOrElseMemoize(n.evaluate(),e));case"ProvideMerge":return D(()=>o=>E(o.getOrElseMemoize(n.first,e),ro(o.getOrElseMemoize(n.second,e),n.zipK)));case"ZipWith":return D(()=>o=>E(o.getOrElseMemoize(n.first,e),pi(o.getOrElseMemoize(n.second,e),n.zipK,{concurrent:!0})))}},ec=d(2,(t,e)=>tg(t,{onFailure:e,onSuccess:di})),wk=d(2,(t,e)=>eg(t,{onFailure:e,onSuccess:di})),Ak=t=>af(Xa(t)),$2=t=>Xx(()=>Xa(t())),Y2=t=>Zx(t,()=>Dt()),Qx=()=>$t(Ur()),Z2=t=>{let e=Object.create(In);return e._op_layer=D2,e.layer=t,e},Rk=t=>af(Zp(t)),Mk=t=>Xx(()=>Zp(t())),af=t=>$t(ce(t)),Xx=t=>$t(Xo(t)),go=d(2,(t,e)=>tg(t,{onFailure:Rk,onSuccess:e})),eN=d(2,(t,e)=>go(t,wt(e))),Tk=t=>{let e=Object.create(In);return e._op_layer=hk,e.layer=t,e},tc=d(2,(t,e)=>{let r=Uc(t),n=r?t:e;return $t(A(r?e:t,i=>gr(n,i)))}),tN=t=>$t(A(t,()=>Dt()));function $t(t){let e=Object.create(In);return e._op_layer=A2,e.effect=t,e}var rN=d(3,(t,e,r)=>$x(t,Ye(e,r))),$x=d(2,(t,e)=>{let r=Object.create(In);return r._op_layer="Locally",r.self=t,r.f=e,r}),Yx=d(3,(t,e,r)=>$x(t,vt(e,r))),nN=(t,e)=>nc(fr(t,e)),oN=(t,e)=>nc(Xt(t,e)),iN=(t,e,r)=>$t(A(t,n=>gr(e,r(n)))),sN=t=>Ex(he(xn(e=>E(t,bs(e))),rs)),Zx=d(2,(t,e)=>go(t,r=>di(e(r)))),aN=d(2,(t,e)=>ec(t,r=>Mk(()=>e(r)))),eg=d(2,(t,{onFailure:e,onSuccess:r})=>{let n=Object.create(In);return n._op_layer=w2,n.layer=t,n.failureK=e,n.successK=r,n}),tg=d(2,(t,{onFailure:e,onSuccess:r})=>eg(t,{onFailure:n=>{let o=qu(n);switch(o._tag){case"Left":return e(o.left);case"Right":return af(o.right)}},onSuccess:r})),cN=t=>xn(e=>A(Fd(bs(t,e)),$t)),rg=d(2,(t,e)=>Ik(t,e,(r,n)=>Er(r,n))),ng=(...t)=>{let e=t[0];for(let r=1;r<t.length;r++)e=rg(e,t[r]);return e},uN=t=>ec(t,e=>Ak(e)),lN=d(2,(t,e)=>ec(t,e)),pN=t=>rg(Qx(),t),fN=d(4,(t,e,r,n)=>Zx(t,o=>gr(r,n(nn(o,e))))),hN=d(2,(t,e)=>lf(()=>{let r=st("effect/Layer/retry/{ state: unknown }");return E(uf(r,{state:e.initial}),go(n=>mN(t,e,r,E(n,wt(r)).state)))})),mN=(t,e,r,n)=>E(t,ec(o=>E(d7(e,r,o,n),go(i=>Tk(mN(t,e,r,E(i,wt(r)).state)))))),d7=(t,e,r,n)=>tc(e,E(yu,C(o=>E(t.step(o,r,n),C(([i,s,a])=>$a(a)?oe(r):E(Dp(Wi(Dx(a.intervals)-o)),ke({state:i}))))))),rc=d(2,(t,e)=>{let r=Uc(t),n=r?t:e;return cf(A(r?e:t,i=>gr(n,i)))}),nc=t=>cf(E(t,ke(Dt()))),cf=t=>{let e=Object.create(In);return e._op_layer=R2,e.effect=t,e},dN=cf(A(Uu(Qa(),(t,e)=>t.close(e)),t=>gr(Ax,t))),xN=t=>tc(t,t),uf=d(2,(t,e)=>{let r=Uc(t);return $t(v(gr(r?t:e,r?e:t)))}),di=t=>$t(v(t)),gN=di(Dt()),lf=t=>{let e=Object.create(In);return e._op_layer=M2,e.evaluate=t,e},og=d(2,(t,e)=>{let r=Uc(t),n=r?t:e,o=r?e:t;return $t(D(()=>gr(n,o())))}),EN=t=>$t(D(t)),yN=d(2,(t,e)=>go(t,r=>$t(ke(e(r),r)))),SN=d(2,(t,e)=>ec(t,r=>$t(C(e(r),()=>oe(r))))),CN=d(2,(t,e)=>wk(t,r=>$t(C(e(r),()=>ce(r))))),bN=t=>E(xn(e=>bs(t,e)),C(e=>E(Ju(),zr(e)))),kN=d(2,(t,e)=>C(xn(r=>Fk(t,e,r)),r=>E(Ju(),zr(r)))),Vu=d(2,(t,e)=>lf(()=>{let r=Object.create(In);return r._op_layer=T2,r.first=Object.create(In,{_op_layer:{value:mk,enumerable:!0},first:{value:Qx(),enumerable:!0},second:{value:Array.isArray(e)?ng(...e):e},zipK:{value:(n,o)=>E(n,Er(o))}}),r.second=t,r})),vN=d(2,(t,e)=>{let r=Object.create(In);return r._op_layer=mk,r.first=e,r.second=Vu(t,e),r.zipK=(n,o)=>E(n,Er(o)),r}),Ik=d(3,(t,e,r)=>lf(()=>{let n=Object.create(In);return n._op_layer=I2,n.first=t,n.second=e,n.zipK=r,n})),Pk=t=>{let e=st("effect/Layer/unwrapEffect/Layer.Layer<R1, E1, A>");return go(tc(e,t),r=>wt(r,e))},of=t=>{let e=st("effect/Layer/unwrapScoped/Layer.Layer<R1, E1, A>");return go(rc(e,t),r=>wt(r,e))},_N=d(t=>sf(t[0]),function(){let t=arguments;return Yx(t[0],oo,typeof t[1]=="string"?Jt(t[1],t[2]):e=>Object.entries(t[1]).reduce((r,[n,o])=>Jt(r,n,o),e))}),ON=d(t=>sf(t[0]),function(){let t=arguments;return Yx(t[0],Sa,typeof t[1]=="string"?Jt(t[1],t[2]):e=>Object.entries(t[1]).reduce((r,[n,o])=>Jt(r,n,o),e))}),FN=function(){let t=typeof arguments[0]!="string",e=t?arguments[1]:arguments[0],r=qr(t?arguments[2]:arguments[1]);if(t){let n=arguments[0];return of(A(r?.onEnd?Ut(dn(e,r),o=>fo(i=>r.onEnd(o,i))):dn(e,r),o=>Vx(n,o)))}return n=>of(A(r?.onEnd?Ut(dn(e,r),o=>fo(i=>r.onEnd(o,i))):dn(e,r),o=>Vx(n,o)))},Vx=d(2,(t,e)=>Vu(t,di(gr(pr,e)))),K2=d(2,(t,e)=>Yp(r=>C(bs(e,r),n=>Km(t,n)))),Q2=d(2,(t,e)=>{let r=Ua(xo.fiberRefs,e.fiberRefs),n=cn(xo.runtimeFlags,e.runtimeFlags);return $e(o=>ae(i=>{let s=i.getFiberRef(Vt),a=i.getFiberRefs(),u=za(i.id(),a)(r),f=i.currentRuntimeFlags,p=Go(n)(f),x=Ua(u,a),m=cn(p,f);return i.setFiberRefs(u),i.currentRuntimeFlags=p,gn(Km(o(t),Er(s,e.context)),ae(c=>(c.setFiberRefs(za(c.id(),c.getFiberRefs())(x)),c.currentRuntimeFlags=Go(m)(c.currentRuntimeFlags),Q)))}))}),DN=d(2,(t,e)=>Array.isArray(e)?K2(t,ng(...e)):sf(e)?K2(t,e):Py(e)?Km(t,e):F2 in e?C(e.runtimeEffect,r=>Q2(t,r)):Q2(t,e));var wN=A(Or(Ze),wt(ri)),AN=t=>Tt(Ze,e=>t(wt(e,ri))),RN=d(2,(t,e)=>vt(t,Ze,Le(ri,e))),MN=t=>Xt(Ze,Le(ri,t));var Ku=J(Symbol.for("effect/FiberRef/currentCache"),()=>Ge(E1(65536,()=>A(It(),t=>({listeners:new Nu,handle:t})),()=>Ul(60)))),pf=J(Symbol.for("effect/FiberRef/currentCacheEnabled"),()=>Ge(!1)),TN=(t,e)=>C(Ee(e)?e:v(e),r=>br(n=>{let o=new Proxy(t,{});return Tt(pf,i=>{if(i){let a=Tt(Ku,u=>C(u.getEither(o),f=>{switch(f._tag){case"Left":return f.left.listeners.interrupted?C(u.invalidateWhen(o,p=>p.handle===f.left.handle),()=>a):(f.left.listeners.increment(),$e(p=>C(Xe(Jo(gw,p(ut(f.left.handle)))),x=>(f.left.listeners.decrement(),x))));case"Right":return f.right.listeners.increment(),$e(p=>C(Xe(Jo(NS(r,LS({request:o,result:f.right.handle,listeners:f.right.listeners,ownerId:n,state:{completed:!1}})),p(ut(f.right.handle)))),()=>(f.right.listeners.decrement(),ut(f.right.handle))))}}));return a}let s=new Nu;return s.increment(),C(It(),a=>gn(Jo(NS(r,LS({request:o,result:a,listeners:s,ownerId:n,state:{completed:!1}})),ut(a)),D(()=>s.decrement())))})})),IN=(t,e)=>Tt(pf,r=>r?Tt(Ku,n=>C(n.getEither(t),o=>{switch(o._tag){case"Left":return Q;case"Right":return oC(o.right.handle,e)}})):Q),PN=d(2,(t,e)=>Ye(t,pf,e)),NN=d(2,(t,e)=>Ye(t,Ku,e));var BN=sP;var g7=Vo,Eo=Ee,E7=h2,y7=ck,ff=Fd,S7=E2,C7=sb,hf=ys,b7=JP,k7=VP,Lk=cM,Bk=uM,v7=SM,_7=qP,HN=GP,O7=pM,UN=xM,yo=Gr,F7=bM,D7=v0,w7=_0,zN=KM,A7=ZP,R7=QM,M7=XM,T7=k0,I7=KP,P7=oT,qN=iT,N7=$P,L7=o1,Qu=sr,B7=J2,W7=lp,Xu=ae,Ve=oe,jN=ar,Yt=ce,GN=Xo,xi=Ko,oc=Qo,JN=Xi,gi=qw,ig=rs,H7=HM,Wk=GM,me=v,VN=Ha,U7=rT,Re=U,_e=D,Me=Q;var z7=to,q7=VR;var sg=Wr,$u=Xn,j7=KR,G7=fp,J7=Ww,KN=QR,V7=XR,ag=$R,cg=YR,K7=ZR,Q7=tb,Hk=nb,X7=kM,$7=jM,Y7=eT,QN=i2,Z7=ek,mf=eb;var df=fT,eG=hT,Pn=lb,tG=xT,rG=rM,nG=Hw,oG=m1,ks=Hr,iG=mp,Ar=Zn,sG=Uw,aG=vr,vs=Dn,xf=$e,cG=mM,Ei=ke,XN=ku,uG=JR,So=Ue,lG=Yi,pG=yM,ie=A,fG=BM,Uk=dp,ic=Zi,hG=_u,mG=WM,dG=Dd,Jr=Uu,xG=UP,zk=Im,gG=fo,Co=gn,qk=Bm,EG=Ht,yG=xx,SG=e1,CG=gx,ug=w0,jk=xn,lg=Yp,pg=Ex,bG=r1,kG=a1,vG=f2,_G=zP,OG=nM,FG=_d,DG=vu,wG=m2,AG=Wx,RG=Yn,Gk=br,MG=mn,fg=Ka,TG=d2,Nn=uk,hg=lk,IG=QP,PG=x2,NG=g2,LG=pk,BG=Wm,WG=jw,HG=uI,UG=tC,zG=oA,$N=eM,qG=uo,jG=i1,GG=hR,JG=wN,VG=AN,KG=MN,QG=RN,XG=tM,$G=Wa,YG=lT,ZG=ub,eJ=C2,tJ=k2,YN=fk,ZN=b2,rJ=rf,nJ=dR,oJ=mR,iJ=yx,Yu=Ur,eL=lM,sJ=ln,Jk=Da,Zu=DN,aJ=Ou,cJ=JM,uJ=bT,lJ=CT,Vk=pb,pJ=fb,fJ=kT,Kk=vT,hJ=hb,mJ=gT,dJ=oM,xJ=iM,gJ=_2,EJ=sM,yJ=aM;var SJ=UM,CJ=$n,xt=Xe,mg=eo,bJ=Lm;var kJ=fM,vJ=hM,tL=Tp,rL=dM,_J=mT,OJ=dT,gf=Ad,FJ=ts,DJ=ET,wJ=yT,K=C,AJ=$i,bo=cr,RJ=YP,Ef=Cx,nL=y2,yf=R0,MJ=Pp,Rr=Ut,TJ=sT,IJ=aT,PJ=cb,NJ=cT,sc=uT,oL=rb,LJ=ob,BJ=PM,dg=n2,WJ=YM,HJ=Z0,UJ=Nx,zJ=S2,qJ=tk,jJ=au,GJ=Od,JJ=vM,Qk=Ye,VJ=vt,KJ=fr,QJ=Xt,XJ=Ba,$J=tT,YJ=wd,ZJ=_M,eV=OM,Sf=Ip,_s=hp,Vr=qe,iL=kt,tV=FM,rV=(t,...e)=>si(t)(...e),nV=DM,oV=ib,iV=wM,sV=AM,aV=RM,cV=MM,uV=TM,lV=GR,pV=HP,fV=IM,hV=iA,el=xa,mV=$S,sL=da,dV=zM,xV=qM,gV=EM,EV=VM,yV=ud,SV=xR,CV=s1,tl=Ju,bV=su,kV=es,vV=Hm,_V=D0,OV=nT,FV=ab,DV=t1,wV=O0,AV=sA,RV=ST,Xk=Bx,xg=l2,MV=ak,TV=p2,IV=U2,PV=H2,NV=z2,LV=q2,Os=j2,BV=G2,WV=n1,HV=F0,ko=c1,gg=u1,Oe=l1,yi=pi,UV=d(2,(t,e)=>yi(t,e,(r,n)=>r(n))),zV=Jo,qV=Tm,jV=Nm,GV=d(t=>BN(t[0]),TN),JV=IN,VV=Gw,KV=PN,QV=NN,XV=pT,$V=ld,YV=gR,ZV=bx,eK=Jw,tK=Vw,rK=OT,nK=_T,oK=mb,iK=FT,sK=RT,aK=MT,cK=DT,aL=AT,uK=dn,$k=kd,cL=xb,lK=TT,pK=d1,Yk=vd,fK=IT,hK=PT,uL=t=>{let e=new Map;return new Proxy(t,{get(r,n,o){if(n in r)return Reflect.get(r,n,o);if(e.has(n))return e.get(n);let i=(...a)=>$i(r,u=>typeof u[n]=="function"?(e.set(n,(...f)=>$i(r,p=>p[n](...f))),u[n](...a)):(e.set(n,$i(r,f=>f[n])),u[n])),s=$i(r,a=>a[n]);return Object.assign(i,s),Object.setPrototypeOf(i,Object.getPrototypeOf(s)),e.set(n,i),i}})},mK=t=>()=>{let e=Error.stackTraceLimit;Error.stackTraceLimit=2;let r=new Error;Error.stackTraceLimit=e;function n(){}return Object.setPrototypeOf(n,Hc),n.key=t,Object.defineProperty(n,"use",{get(){return o=>$i(this,o)}}),Object.defineProperty(n,"stack",{get(){return r.stack}}),uL(n)},dK=function(){return function(){let[t,e]=arguments,r="accessors"in e?e.accessors:!1,n=Error.stackTraceLimit;Error.stackTraceLimit=2;let o=new Error;Error.stackTraceLimit=n;let i="unchecked",s=function(p){if(i==="unchecked"){let x=Object.getPrototypeOf(p);if(x===Object.prototype||x===null)i="plain";else{let m=Object.getPrototypeOf(this);Object.setPrototypeOf(m,x),i="patched"}}if(i==="plain")Object.assign(this,p);else if(i==="patched")return Object.setPrototypeOf(p,Object.getPrototypeOf(this)),p};s.prototype._tag=t,Object.defineProperty(s,"make",{get(){return p=>new this(p)}}),Object.defineProperty(s,"use",{get(){return p=>$i(this,p)}}),s.key=t,Object.assign(s,Hc),Object.defineProperty(s,"stack",{get(){return o.stack}});let a="dependencies"in e&&e.dependencies.length>0,u=a?"DefaultWithoutDependencies":"Default",f;if("effect"in e?Object.defineProperty(s,u,{get(){return f??=tc(s,ie(e.effect,p=>new this(p)))}}):"scoped"in e?Object.defineProperty(s,u,{get(){return f??=rc(s,ie(e.scoped,p=>new this(p)))}}):"sync"in e?Object.defineProperty(s,u,{get(){return f??=og(s,()=>new this(e.sync()))}}):Object.defineProperty(s,u,{get(){return f??=uf(s,new this(e.succeed))}}),a){let p;Object.defineProperty(s,"Default",{get(){return p??=Vu(this.DefaultWithoutDependencies,e.dependencies)}})}return r===!0?uL(s):s}},xK=(t,e)=>(r,...n)=>function(...o){let i=Error.stackTraceLimit;Error.stackTraceLimit=2;let s=new Error;Error.stackTraceLimit=i;let a=!1,u=()=>{if(a!==!1)return a;if(s.stack)return a=s.stack.trim().split(`
`).slice(2).join(`
`).trim(),a},f,p;try{f=qO(r)?gi(()=>rt(()=>r.apply(this,o))):r.apply(this,o)}catch(m){p=m,f=xi(m)}try{for(let m of n)f=m(f)}catch(m){f=p?Yt(He(ht(p),ht(m))):xi(m)}let x=e&&"captureStackTrace"in e?e:{captureStackTrace:u,...e};return cL(f,t,x)};var Cf=Ge;var Eg=Vt;var lL=ya;var Fs={};Di(Fs,{LayerTypeId:()=>EK,MemoMapTypeId:()=>yK,annotateLogs:()=>bK,annotateSpans:()=>kK,build:()=>vK,buildWithMemoMap:()=>zQ,buildWithScope:()=>_K,catchAll:()=>OK,catchAllCause:()=>FK,context:()=>DK,die:()=>wK,dieSync:()=>AK,discard:()=>RK,effect:()=>bf,effectContext:()=>TK,effectDiscard:()=>MK,empty:()=>IK,extendScope:()=>PK,fail:()=>NK,failCause:()=>BK,failCauseSync:()=>WK,failSync:()=>LK,fiberRefLocallyScopedWith:()=>sQ,flatMap:()=>HK,flatten:()=>UK,fresh:()=>zK,function:()=>qK,isFresh:()=>CK,isLayer:()=>SK,launch:()=>jK,locally:()=>nQ,locallyEffect:()=>rQ,locallyScoped:()=>iQ,locallyWith:()=>oQ,makeMemoMap:()=>UQ,map:()=>GK,mapError:()=>JK,match:()=>VK,matchCause:()=>KK,memoize:()=>QK,merge:()=>XK,mergeAll:()=>$K,orDie:()=>YK,orElse:()=>ZK,parentSpan:()=>wQ,passthrough:()=>eQ,project:()=>tQ,provide:()=>bQ,provideMerge:()=>kQ,retry:()=>aQ,scope:()=>cQ,scoped:()=>uQ,scopedContext:()=>lQ,scopedDiscard:()=>Si,service:()=>pQ,setClock:()=>FQ,setConfigProvider:()=>DQ,setRequestBatching:()=>AQ,setRequestCache:()=>MQ,setRequestCaching:()=>RQ,setScheduler:()=>TQ,setTracer:()=>PQ,setTracerEnabled:()=>NQ,setTracerTiming:()=>LQ,setUnhandledErrorLogLevel:()=>BQ,span:()=>IQ,succeed:()=>fQ,succeedContext:()=>hQ,suspend:()=>mQ,sync:()=>dQ,syncContext:()=>xQ,tap:()=>gQ,tapError:()=>EQ,tapErrorCause:()=>yQ,toRuntime:()=>SQ,toRuntimeWithMemoMap:()=>CQ,unwrapEffect:()=>_Q,unwrapScoped:()=>OQ,withParentSpan:()=>HQ,withSpan:()=>WQ,zipWith:()=>vQ});var pL=t=>nc(yx(t)),fL=t=>di(gr(pr,t)),hL=(t,e)=>(e=qr(e),rc(pr,e?.onEnd?Ut(dn(t,e),r=>fo(n=>e.onEnd(r,n))):dn(t,e))),mL=t=>nc(bx(t));var EK=Kx,yK=nf,SK=sf,CK=_k,bK=_N,kK=ON,vK=X2,_K=bs,OK=ec,FK=wk,DK=Qx,wK=Ak,AK=$2,RK=Y2,bf=tc,MK=tN,TK=$t,IK=gN,PK=Z2,NK=Rk,LK=Mk,BK=af,WK=Xx,HK=go,UK=eN,zK=Tk,qK=iN;var jK=sN,GK=Zx,JK=aN,VK=tg,KK=eg,QK=cN,XK=rg,$K=ng,YK=uN,ZK=lN,eQ=pN,tQ=fN,rQ=$x,nQ=rN,oQ=Yx,iQ=nN,sQ=oN,aQ=hN,cQ=dN,uQ=rc,Si=nc,lQ=cf,pQ=xN,fQ=uf,hQ=di,mQ=lf,dQ=og,xQ=EN,gQ=yN,EQ=SN,yQ=CN,SQ=bN,CQ=kN,bQ=Vu,kQ=vN,vQ=Ik,_Q=Pk,OQ=of,FQ=t=>Si(Xt(Ze,Le(lr,t))),DQ=pL,wQ=fL,AQ=t=>Si(fr(cu,t)),RQ=t=>Si(fr(pf,t)),MQ=t=>Si(Ee(t)?C(t,e=>fr(Ku,e)):fr(Ku,t)),TQ=t=>Si(fr(ai,t)),IQ=hL,PQ=mL,NQ=t=>Si(fr(ya,t)),LQ=t=>Si(fr($o,t)),BQ=t=>Si(fr(uu,t)),WQ=FN,HQ=Vx,UQ=Ok,zQ=Fk;var qQ="effect/QueueEnqueue",dL=Symbol.for(qQ),jQ="effect/QueueDequeue",xL=Symbol.for(jQ),GQ="effect/QueueStrategy",bg=Symbol.for(GQ),JQ="effect/BackingQueue",gL=Symbol.for(JQ),ov={_A:t=>t},VQ={_A:t=>t},KQ={_In:t=>t},QQ={_Out:t=>t},Zk=class extends Mn{queue;takers;shutdownHook;shutdownFlag;strategy;[dL]=KQ;[xL]=QQ;constructor(e,r,n,o,i){super(),this.queue=e,this.takers=r,this.shutdownHook=n,this.shutdownFlag=o,this.strategy=i}pipe(){return R(this,arguments)}commit(){return this.take}capacity(){return this.queue.capacity()}get size(){return U(()=>Wr(this.unsafeSize(),()=>Hr))}unsafeSize(){return We(this.shutdownFlag)?k():b(this.queue.length()-nd(this.takers)+this.strategy.surplusSize())}get isEmpty(){return A(this.size,e=>e<=0)}get isFull(){return A(this.size,e=>e>=this.capacity())}get shutdown(){return Dn(ae(e=>(E(this.shutdownFlag,Sr(!0)),E(po(rl(this.takers),r=>Vm(r,e.id()),!1,!1),he(this.strategy.shutdown),ts(us(this.shutdownHook,void 0)),Ue))))}get isShutdown(){return D(()=>We(this.shutdownFlag))}get awaitShutdown(){return ut(this.shutdownHook)}isActive(){return!We(this.shutdownFlag)}unsafeOffer(e){if(We(this.shutdownFlag))return!1;let r;if(this.queue.length()===0){let o=E(this.takers,Rn(Ot));o!==Ot?(cc(o,e),r=!0):r=!1}else r=!1;if(r)return!0;let n=this.queue.offer(e);return ac(this.strategy,this.queue,this.takers),n}offer(e){return U(()=>{if(We(this.shutdownFlag))return Hr;let r;if(this.queue.length()===0){let o=E(this.takers,Rn(Ot));o!==Ot?(cc(o,e),r=!0):r=!1}else r=!1;if(r)return v(!0);let n=this.queue.offer(e);return ac(this.strategy,this.queue,this.takers),n?v(!0):this.strategy.handleSurplus([e],this.queue,this.takers,this.shutdownFlag)})}offerAll(e){return U(()=>{if(We(this.shutdownFlag))return Hr;let r=ne(e),n=this.queue.length()===0?ne($Q(this.takers,r.length)):Lr,[o,i]=E(r,_y(n.length));for(let a=0;a<n.length;a++){let u=n[a],f=o[a];cc(u,f)}if(i.length===0)return v(!0);let s=this.queue.offerAll(i);return ac(this.strategy,this.queue,this.takers),Bi(s)?v(!0):this.strategy.handleSurplus(s,this.queue,this.takers,this.shutdownFlag)})}get take(){return ae(e=>{if(We(this.shutdownFlag))return Hr;let r=this.queue.poll(Ot);if(r!==Ot)return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),v(r);{let n=as(e.id());return E(U(()=>(E(this.takers,ls(n)),ac(this.strategy,this.queue,this.takers),We(this.shutdownFlag)?Hr:ut(n))),vr(()=>D(()=>YQ(this.takers,n))))}})}get takeAll(){return U(()=>We(this.shutdownFlag)?Hr:D(()=>{let e=this.queue.pollUpTo(Number.POSITIVE_INFINITY);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),nr(e)}))}takeUpTo(e){return U(()=>We(this.shutdownFlag)?Hr:D(()=>{let r=this.queue.pollUpTo(e);return this.strategy.unsafeOnQueueEmptySpace(this.queue,this.takers),nr(r)}))}takeBetween(e,r){return U(()=>EL(this,e,r,mt()))}},EL=(t,e,r,n)=>r<e?v(n):E(OL(t,r),C(o=>{let i=e-o.length;return i===1?E(Sg(t),A(s=>E(n,At(o),Li(s)))):i>1?E(Sg(t),C(s=>EL(t,i-1,r-o.length-1,E(n,At(o),Li(s))))):v(E(n,At(o)))}));var yL=t=>E(D(()=>rd(t)),C(e=>kf(kg(e),FL()))),SL=t=>E(D(()=>rd(t)),C(e=>kf(kg(e),iv()))),CL=t=>E(D(()=>rd(t)),C(e=>kf(kg(e),DL()))),bL=()=>E(D(()=>du()),C(t=>kf(kg(t),iv()))),XQ=(t,e,r,n,o)=>new Zk(t,e,r,n,o),kf=(t,e)=>E(It(),A(r=>XQ(t,du(),r,an(!1),e))),ev=class{mutable;[gL]=VQ;constructor(e){this.mutable=e}poll(e){return Rn(this.mutable,e)}pollUpTo(e){return id(this.mutable,e)}offerAll(e){return hC(this.mutable,e)}offer(e){return ls(this.mutable,e)}capacity(){return NA(this.mutable)}length(){return nd(this.mutable)}},kg=t=>new ev(t);var kL=t=>t.size;var vL=t=>t.shutdown,_L=d(2,(t,e)=>t.offer(e));var Sg=t=>t.take;var OL=d(2,(t,e)=>t.takeUpTo(e));var FL=()=>new tv,iv=()=>new rv,DL=()=>new nv,tv=class{[bg]=ov;putters=du();surplusSize(){return nd(this.putters)}onCompleteTakersWithEmptyQueue(e){for(;!od(this.putters)&&!od(e);){let r=Rn(e,void 0),n=Rn(this.putters,void 0);n[2]&&cc(n[1],!0),cc(r,n[0])}}get shutdown(){return E(Yn,C(e=>E(D(()=>rl(this.putters)),C(r=>po(r,([n,o,i])=>i?E(Vm(o,e),Ue):Q,!1,!1)))))}handleSurplus(e,r,n,o){return ae(i=>{let s=as(i.id());return E(U(()=>(this.unsafeOffer(e,s),this.unsafeOnQueueEmptySpace(r,n),ac(this,r,n),We(o)?Hr:ut(s))),vr(()=>D(()=>this.unsafeRemove(s))))})}unsafeOnQueueEmptySpace(e,r){let n=!0;for(;n&&(e.capacity()===Number.POSITIVE_INFINITY||e.length()<e.capacity());){let o=E(this.putters,Rn(Ot));if(o===Ot)n=!1;else{let i=e.offer(o[0]);i&&o[2]?cc(o[1],!0):i||Cg(this.putters,E(rl(this.putters),Be(o))),ac(this,e,r)}}}unsafeOffer(e,r){let n=ne(e);for(let o=0;o<n.length;o++){let i=n[o];o===n.length-1?E(this.putters,ls([i,r,!0])):E(this.putters,ls([i,r,!1]))}}unsafeRemove(e){Cg(this.putters,E(rl(this.putters),Bh(([,r])=>r!==e)))}},rv=class{[bg]=ov;surplusSize(){return 0}get shutdown(){return Q}onCompleteTakersWithEmptyQueue(){}handleSurplus(e,r,n,o){return v(!1)}unsafeOnQueueEmptySpace(e,r){}},nv=class{[bg]=ov;surplusSize(){return 0}get shutdown(){return Q}onCompleteTakersWithEmptyQueue(){}handleSurplus(e,r,n,o){return D(()=>(this.unsafeOffer(r,e),ac(this,r,n),!0))}unsafeOnQueueEmptySpace(e,r){}unsafeOffer(e,r){let n=r[Symbol.iterator](),o,i=!0;for(;!(o=n.next()).done&&i;){if(e.capacity()===0)return;e.poll(Ot),i=e.offer(o.value)}}},cc=(t,e)=>Fa(t,v(e)),Cg=(t,e)=>E(t,hC(e)),rl=t=>E(t,id(Number.POSITIVE_INFINITY)),$Q=(t,e)=>E(t,id(e)),YQ=(t,e)=>{Cg(t,E(rl(t),Bh(r=>e!==r)))},ac=(t,e,r)=>{let n=!0;for(;n&&e.length()!==0;){let o=E(r,Rn(Ot));if(o!==Ot){let i=e.poll(Ot);i!==Ot?(cc(o,i),t.unsafeOnQueueEmptySpace(e,r)):Cg(r,E(rl(r),Be(o))),n=!0}else n=!1}n&&e.length()===0&&!od(r)&&t.onCompleteTakersWithEmptyQueue(r)};var nl=yL,vg=SL,_g=CL,vf=bL;var wL=kL;var Ci=vL,En=_L;var uc=Sg;var Og="Continue",av="Close",cv="Yield";var eX="effect/ChannelChildExecutorDecision",RL=Symbol.for(eX),tX={[RL]:RL},uv=t=>{let e=Object.create(tX);return e._tag=Og,e};var ol="ContinuationK",ML="ContinuationFinalizer";var IL=Symbol.for("effect/ChannelContinuation"),PL={_Env:t=>t,_InErr:t=>t,_InElem:t=>t,_InDone:t=>t,_OutErr:t=>t,_OutDone:t=>t,_OutErr2:t=>t,_OutElem:t=>t,_OutDone2:t=>t},_f=class{onSuccess;onHalt;_tag=ol;[IL]=PL;constructor(e,r){this.onSuccess=e,this.onHalt=r}onExit(e){return $m(e)?this.onHalt(e.cause):this.onSuccess(e.value)}},Fg=class{finalizer;_tag=ML;[IL]=PL;constructor(e){this.finalizer=e}};var Dg="PullAfterNext",lv="PullAfterAllEnqueued";var oX="effect/ChannelUpstreamPullStrategy",iX=Symbol.for(oX),sX={_A:t=>t},aX={[iX]:sX},pv=t=>{let e=Object.create(aX);return e._tag=Dg,e.emitSeparator=t,e};var wg="BracketOut",Ag="Bridge",Of="ConcatAll",Rg="Emit",Mg="Ensuring",Tg="Fail",Ig="Fold",Pg="FromEffect",Ng="PipeTo",fv="Provide",Lg="Read",Bg="Succeed",Wg="SucceedNow",Hg="Suspend";var uX="effect/Channel",hv=Symbol.for(uX),lX={_Env:t=>t,_InErr:t=>t,_InElem:t=>t,_InDone:t=>t,_OutErr:t=>t,_OutElem:t=>t,_OutDone:t=>t},Mr={[hv]:lX,pipe(){return R(this,arguments)}},Ug=t=>T(t,hv)||Eo(t),mv=d(2,(t,e)=>{let r=Object.create(Mr);return r._tag=wg,r.acquire=()=>t,r.finalizer=e,r});var zg=(t,e,r)=>{let n=Object.create(Mr);return n._tag=Of,n.combineInners=e,n.combineAll=r,n.onPull=()=>pv(k()),n.onEmit=()=>uv,n.value=()=>t,n.k=B,n},dv=d(4,(t,e,r,n)=>{let o=Object.create(Mr);return o._tag=Of,o.combineInners=r,o.combineAll=n,o.onPull=()=>pv(k()),o.onEmit=()=>uv,o.value=()=>t,o.k=e,o});var qg=d(2,(t,e)=>{let r=Object.create(Mr);return r._tag=Ag,r.input=e,r.channel=t,r}),Ff=d(2,(t,e)=>{let r=Object.create(Mr);return r._tag=Mg,r.channel=t,r.finalizer=e,r}),il=t=>zt(Zp(t));var zt=t=>xv(()=>t),xv=t=>{let e=Object.create(Mr);return e._tag=Tg,e.error=t,e},Te=d(2,(t,e)=>{let r=Object.create(Mr);return r._tag=Ig,r.channel=t,r.k=new _f(e,zt),r});var Ke=t=>{let e=Object.create(Mr);return e._tag=Pg,e.effect=()=>t,e},Tr=d(2,(t,e)=>{let r=Object.create(Mr);return r._tag=Ng,r.left=()=>t,r.right=()=>e,r});var Df=t=>vo({onInput:t.onInput,onFailure:e=>Et(qu(e),{onLeft:t.onFailure,onRight:zt}),onDone:t.onDone}),vo=t=>{let e=Object.create(Mr);return e._tag=Lg,e.more=t.onInput,e.done=new _f(t.onDone,t.onFailure),e},sl=t=>al(()=>t),lc=t=>{let e=Object.create(Mr);return e._tag=Wg,e.terminal=t,e},wf=t=>{let e=Object.create(Mr);return e._tag=Hg,e.channel=t,e},al=t=>{let e=Object.create(Mr);return e._tag=Bg,e.evaluate=t,e},Ir=lc(void 0);var et=t=>{let e=Object.create(Mr);return e._tag=Rg,e.out=t,e};var Ds="Done",ws="Emit",bi="FromEffect",As="Read";var pX=Symbol.for("effect/ChannelState"),fX={_E:t=>t,_R:t=>t},jg={[pX]:fX},pc=()=>{let t=Object.create(jg);return t._tag=Ds,t},Gg=()=>{let t=Object.create(jg);return t._tag=ws,t},cl=t=>{let e=Object.create(jg);return e._tag=bi,e.effect=t,e},Jg=(t,e,r,n)=>{let o=Object.create(jg);return o._tag=As,o.upstream=t,o.onEffect=e,o.onEmit=r,o.onDone=n,o};var Rf=t=>t._tag===bi;var BL=t=>Rf(t)?t.effect:Me,Ev=t=>Rf(t)?Hk(t.effect):void 0;var yv="PullFromChild",Vg="PullFromUpstream",Kg="DrainChildExecutors",Sv="Emit",fc=class{childExecutor;parentSubexecutor;onEmit;_tag=yv;constructor(e,r,n){this.childExecutor=e,this.parentSubexecutor=r,this.onEmit=n}close(e){let r=this.childExecutor.close(e),n=this.parentSubexecutor.close(e);return r!==void 0&&n!==void 0?yi(xt(r),xt(n),(o,i)=>E(o,Aa(i))):r!==void 0?r:n!==void 0?n:void 0}enqueuePullFromChild(e){return this}},Rs=class t{upstreamExecutor;createChild;lastDone;activeChildExecutors;combineChildResults;combineWithChildResult;onPull;onEmit;_tag=Vg;constructor(e,r,n,o,i,s,a,u){this.upstreamExecutor=e,this.createChild=r,this.lastDone=n,this.activeChildExecutors=o,this.combineChildResults=i,this.combineWithChildResult=s,this.onPull=a,this.onEmit=u}close(e){let r=this.upstreamExecutor.close(e),o=[...this.activeChildExecutors.map(i=>i!==void 0?i.childExecutor.close(e):void 0),r].reduce((i,s)=>i!==void 0&&s!==void 0?yi(i,xt(s),(a,u)=>Aa(a,u)):i!==void 0?i:s!==void 0?xt(s):void 0,void 0);return o}enqueuePullFromChild(e){return new t(this.upstreamExecutor,this.createChild,this.lastDone,[...this.activeChildExecutors,e],this.combineChildResults,this.combineWithChildResult,this.onPull,this.onEmit)}},hc=class t{upstreamExecutor;lastDone;activeChildExecutors;upstreamDone;combineChildResults;combineWithChildResult;onPull;_tag=Kg;constructor(e,r,n,o,i,s,a){this.upstreamExecutor=e,this.lastDone=r,this.activeChildExecutors=n,this.upstreamDone=o,this.combineChildResults=i,this.combineWithChildResult=s,this.onPull=a}close(e){let r=this.upstreamExecutor.close(e),o=[...this.activeChildExecutors.map(i=>i!==void 0?i.childExecutor.close(e):void 0),r].reduce((i,s)=>i!==void 0&&s!==void 0?yi(i,xt(s),(a,u)=>Aa(a,u)):i!==void 0?i:s!==void 0?xt(s):void 0,void 0);return o}enqueuePullFromChild(e){return new t(this.upstreamExecutor,this.lastDone,[...this.activeChildExecutors,e],this.upstreamDone,this.combineChildResults,this.combineWithChildResult,this.onPull)}},ul=class{value;next;_tag=Sv;constructor(e,r){this.value=e,this.next=r}close(e){let r=this.next.close(e);return r}enqueuePullFromChild(e){return this}};var WL="Pulled",HL="NoUpstream";var xX="effect/ChannelUpstreamPullRequest",gX=Symbol.for(xX),EX={_A:t=>t},UL={[gX]:EX},Cv=t=>{let e=Object.create(UL);return e._tag=WL,e.value=t,e},zL=t=>{let e=Object.create(UL);return e._tag=HL,e.activeDownstreamCount=t,e};var Mf=class t{_activeSubexecutor=void 0;_cancelled=void 0;_closeLastSubstream=void 0;_currentChannel;_done=void 0;_doneStack=[];_emitted=void 0;_executeCloseLastSubstream;_input=void 0;_inProgressFinalizer=void 0;_providedEnv;constructor(e,r,n){this._currentChannel=e,this._executeCloseLastSubstream=n,this._providedEnv=r}run(){let e;for(;e===void 0;)if(this._cancelled!==void 0)e=this.processCancellation();else if(this._activeSubexecutor!==void 0)e=this.runSubexecutor();else try{if(this._currentChannel===void 0)e=pc();else switch(Eo(this._currentChannel)&&(this._currentChannel=Ke(this._currentChannel)),this._currentChannel._tag){case wg:{e=this.runBracketOut(this._currentChannel);break}case Ag:{let r=this._currentChannel.input;if(this._currentChannel=this._currentChannel.channel,this._input!==void 0){let n=this._input;this._input=void 0;let o=()=>K(r.awaitRead(),()=>Re(()=>{let i=n.run();switch(i._tag){case Ds:return Dr(n.getDone(),{onFailure:s=>r.error(s),onSuccess:s=>r.done(s)});case ws:return K(r.emit(n.getEmit()),()=>o());case bi:return Vr(i.effect,{onFailure:s=>r.error(s),onSuccess:()=>o()});case As:return Xg(i,()=>o(),s=>r.error(s))}}));e=cl(K(fg(Ar(o())),i=>_e(()=>this.addFinalizer(s=>K(mi(i),()=>Re(()=>{let a=this.restorePipe(s,n);return a!==void 0?a:Me}))))))}break}case Of:{let r=new t(this._currentChannel.value(),this._providedEnv,o=>_e(()=>{let i=this._closeLastSubstream===void 0?Me:this._closeLastSubstream;this._closeLastSubstream=E(i,Oe(o))}));r._input=this._input;let n=this._currentChannel;this._activeSubexecutor=new Rs(r,o=>n.k(o),void 0,[],(o,i)=>n.combineInners(o,i),(o,i)=>n.combineAll(o,i),o=>n.onPull(o),o=>n.onEmit(o)),this._closeLastSubstream=void 0,this._currentChannel=void 0;break}case Rg:{this._emitted=this._currentChannel.out,this._currentChannel=this._activeSubexecutor!==void 0?void 0:Ir,e=Gg();break}case Mg:{this.runEnsuring(this._currentChannel);break}case Tg:{e=this.doneHalt(this._currentChannel.error());break}case Ig:{this._doneStack.push(this._currentChannel.k),this._currentChannel=this._currentChannel.channel;break}case Pg:{let r=this._providedEnv===void 0?this._currentChannel.effect():E(this._currentChannel.effect(),Zu(this._providedEnv));e=cl(Vr(r,{onFailure:n=>{let o=this.doneHalt(n);return o!==void 0&&Rf(o)?o.effect:Me},onSuccess:n=>{let o=this.doneSucceed(n);return o!==void 0&&Rf(o)?o.effect:Me}}));break}case Ng:{let r=this._input,n=new t(this._currentChannel.left(),this._providedEnv,o=>this._executeCloseLastSubstream(o));n._input=r,this._input=n,this.addFinalizer(o=>{let i=this.restorePipe(o,r);return i!==void 0?i:Me}),this._currentChannel=this._currentChannel.right();break}case fv:{let r=this._providedEnv;this._providedEnv=this._currentChannel.context(),this._currentChannel=this._currentChannel.inner,this.addFinalizer(()=>_e(()=>{this._providedEnv=r}));break}case Lg:{let r=this._currentChannel;e=Jg(this._input,B,n=>{try{this._currentChannel=r.more(n)}catch(o){this._currentChannel=r.done.onExit(Ym(o))}},n=>{let o=i=>r.done.onExit(i);this._currentChannel=o(n)});break}case Bg:{e=this.doneSucceed(this._currentChannel.evaluate());break}case Wg:{e=this.doneSucceed(this._currentChannel.terminal);break}case Hg:{this._currentChannel=this._currentChannel.channel();break}default:this._currentChannel._tag}}catch(r){this._currentChannel=zt(Xa(r))}return e}getDone(){return this._done}getEmit(){return this._emitted}cancelWith(e){this._cancelled=e}clearInProgressFinalizer(){this._inProgressFinalizer=void 0}storeInProgressFinalizer(e){this._inProgressFinalizer=e}popAllFinalizers(e){let r=[],n=this._doneStack.pop();for(;n;)n._tag==="ContinuationFinalizer"&&r.push(n.finalizer),n=this._doneStack.pop();let o=r.length===0?Me:kv(r,e);return this.storeInProgressFinalizer(o),o}popNextFinalizers(){let e=[];for(;this._doneStack.length!==0;){let r=this._doneStack[this._doneStack.length-1];if(r._tag===ol)return e;e.push(r),this._doneStack.pop()}return e}restorePipe(e,r){let n=this._input;return this._input=r,n!==void 0?n.close(e):Me}close(e){let r,n=this._inProgressFinalizer;n!==void 0&&(r=E(n,Co(_e(()=>this.clearInProgressFinalizer()))));let o,i=this.popAllFinalizers(e);i!==void 0&&(o=E(i,Co(_e(()=>this.clearInProgressFinalizer()))));let s=this._activeSubexecutor===void 0?void 0:this._activeSubexecutor.close(e);if(!(s===void 0&&r===void 0&&o===void 0))return E(xt(bv(s)),ko(xt(bv(r))),ko(xt(bv(o))),ie(([[a,u],f])=>E(a,Aa(u),Aa(f))),vs,K(a=>Re(()=>a)))}doneSucceed(e){if(this._doneStack.length===0)return this._done=Nt(e),this._currentChannel=void 0,pc();let r=this._doneStack[this._doneStack.length-1];if(r._tag===ol){this._doneStack.pop(),this._currentChannel=r.onSuccess(e);return}let n=this.popNextFinalizers();if(this._doneStack.length===0)return this._doneStack=n.reverse(),this._done=Nt(e),this._currentChannel=void 0,pc();let o=kv(n.map(s=>s.finalizer),Nt(e));this.storeInProgressFinalizer(o);let i=E(o,Co(_e(()=>this.clearInProgressFinalizer())),vs,K(()=>_e(()=>this.doneSucceed(e))));return cl(i)}doneHalt(e){if(this._doneStack.length===0)return this._done=Pt(e),this._currentChannel=void 0,pc();let r=this._doneStack[this._doneStack.length-1];if(r._tag===ol){this._doneStack.pop(),this._currentChannel=r.onHalt(e);return}let n=this.popNextFinalizers();if(this._doneStack.length===0)return this._doneStack=n.reverse(),this._done=Pt(e),this._currentChannel=void 0,pc();let o=kv(n.map(s=>s.finalizer),Pt(e));this.storeInProgressFinalizer(o);let i=E(o,Co(_e(()=>this.clearInProgressFinalizer())),vs,K(()=>_e(()=>this.doneHalt(e))));return cl(i)}processCancellation(){return this._currentChannel=void 0,this._done=this._cancelled,this._cancelled=void 0,pc()}runBracketOut(e){let r=vs(Vr(this.provide(e.acquire()),{onFailure:n=>_e(()=>{this._currentChannel=zt(n)}),onSuccess:n=>_e(()=>{this.addFinalizer(o=>this.provide(e.finalizer(n,o))),this._currentChannel=et(n)})}));return cl(r)}provide(e){return this._providedEnv===void 0?e:E(e,Zu(this._providedEnv))}runEnsuring(e){this.addFinalizer(e.finalizer),this._currentChannel=e.channel}addFinalizer(e){this._doneStack.push(new Fg(e))}runSubexecutor(){let e=this._activeSubexecutor;switch(e._tag){case yv:return this.pullFromChild(e.childExecutor,e.parentSubexecutor,e.onEmit,e);case Vg:return this.pullFromUpstream(e);case Kg:return this.drainChildExecutors(e);case Sv:return this._emitted=e.value,this._activeSubexecutor=e.next,Gg()}}replaceSubexecutor(e){this._currentChannel=void 0,this._activeSubexecutor=e}finishWithExit(e){let r=Dr(e,{onFailure:n=>this.doneHalt(n),onSuccess:n=>this.doneSucceed(n)});return this._activeSubexecutor=void 0,r===void 0?Me:BL(r)}finishSubexecutorWithCloseEffect(e,...r){this.addFinalizer(()=>E(r,yo(o=>E(_e(()=>o(e)),K(i=>i!==void 0?i:Me)),{discard:!0})));let n=E(e,Dr({onFailure:o=>this.doneHalt(o),onSuccess:o=>this.doneSucceed(o)}));return this._activeSubexecutor=void 0,n}applyUpstreamPullStrategy(e,r,n){switch(n._tag){case Dg:{let o=!e||r.some(i=>i!==void 0);return[n.emitSeparator,o?[void 0,...r]:r]}case lv:{let o=!e||r.some(i=>i!==void 0);return[n.emitSeparator,o?[...r,void 0]:r]}}}pullFromChild(e,r,n,o){return Jg(e,B,i=>{let s=n(i);switch(s._tag){case Og:break;case av:{this.finishWithDoneValue(e,r,s.value);break}case cv:{let a=r.enqueuePullFromChild(o);this.replaceSubexecutor(a);break}}this._activeSubexecutor=new ul(i,this._activeSubexecutor)},Dr({onFailure:i=>{let s=this.handleSubexecutorFailure(e,r,i);return s===void 0?void 0:Ev(s)},onSuccess:i=>{this.finishWithDoneValue(e,r,i)}}))}finishWithDoneValue(e,r,n){let o=r;switch(o._tag){case Vg:{let i=new Rs(o.upstreamExecutor,o.createChild,o.lastDone!==void 0?o.combineChildResults(o.lastDone,n):n,o.activeChildExecutors,o.combineChildResults,o.combineWithChildResult,o.onPull,o.onEmit);this._closeLastSubstream=e.close(Nt(n)),this.replaceSubexecutor(i);break}case Kg:{let i=new hc(o.upstreamExecutor,o.lastDone!==void 0?o.combineChildResults(o.lastDone,n):n,o.activeChildExecutors,o.upstreamDone,o.combineChildResults,o.combineWithChildResult,o.onPull);this._closeLastSubstream=e.close(Nt(n)),this.replaceSubexecutor(i);break}default:break}}handleSubexecutorFailure(e,r,n){return this.finishSubexecutorWithCloseEffect(Pt(n),o=>r.close(o),o=>e.close(o))}pullFromUpstream(e){if(e.activeChildExecutors.length===0)return this.performPullFromUpstream(e);let r=e.activeChildExecutors[0],n=new Rs(e.upstreamExecutor,e.createChild,e.lastDone,e.activeChildExecutors.slice(1),e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit);if(r===void 0)return this.performPullFromUpstream(n);this.replaceSubexecutor(new fc(r.childExecutor,n,r.onEmit))}performPullFromUpstream(e){return Jg(e.upstreamExecutor,r=>{let n=this._closeLastSubstream===void 0?Me:this._closeLastSubstream;return this._closeLastSubstream=void 0,E(this._executeCloseLastSubstream(n),Oe(r))},r=>{if(this._closeLastSubstream!==void 0){let s=this._closeLastSubstream;return this._closeLastSubstream=void 0,E(this._executeCloseLastSubstream(s),ie(()=>{let a=new t(e.createChild(r),this._providedEnv,this._executeCloseLastSubstream);a._input=this._input;let[u,f]=this.applyUpstreamPullStrategy(!1,e.activeChildExecutors,e.onPull(Cv(r)));this._activeSubexecutor=new fc(a,new Rs(e.upstreamExecutor,e.createChild,e.lastDone,f,e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit),e.onEmit),q(u)&&(this._activeSubexecutor=new ul(u.value,this._activeSubexecutor))}))}let n=new t(e.createChild(r),this._providedEnv,this._executeCloseLastSubstream);n._input=this._input;let[o,i]=this.applyUpstreamPullStrategy(!1,e.activeChildExecutors,e.onPull(Cv(r)));this._activeSubexecutor=new fc(n,new Rs(e.upstreamExecutor,e.createChild,e.lastDone,i,e.combineChildResults,e.combineWithChildResult,e.onPull,e.onEmit),e.onEmit),q(o)&&(this._activeSubexecutor=new ul(o.value,this._activeSubexecutor))},r=>{if(e.activeChildExecutors.some(i=>i!==void 0)){let i=new hc(e.upstreamExecutor,e.lastDone,[void 0,...e.activeChildExecutors],e.upstreamExecutor.getDone(),e.combineChildResults,e.combineWithChildResult,e.onPull);if(this._closeLastSubstream!==void 0){let s=this._closeLastSubstream;return this._closeLastSubstream=void 0,E(this._executeCloseLastSubstream(s),ie(()=>this.replaceSubexecutor(i)))}this.replaceSubexecutor(i);return}let n=this._closeLastSubstream,o=this.finishSubexecutorWithCloseEffect(E(r,aC(i=>e.combineWithChildResult(e.lastDone,i))),()=>n,i=>e.upstreamExecutor.close(i));return o===void 0?void 0:Ev(o)})}drainChildExecutors(e){if(e.activeChildExecutors.length===0){let i=this._closeLastSubstream;return i!==void 0&&this.addFinalizer(()=>me(i)),this.finishSubexecutorWithCloseEffect(e.upstreamDone,()=>i,s=>e.upstreamExecutor.close(s))}let r=e.activeChildExecutors[0],n=e.activeChildExecutors.slice(1);if(r===void 0){let[i,s]=this.applyUpstreamPullStrategy(!0,n,e.onPull(zL(n.reduce((a,u)=>u!==void 0?a+1:a,0))));return this.replaceSubexecutor(new hc(e.upstreamExecutor,e.lastDone,s,e.upstreamDone,e.combineChildResults,e.combineWithChildResult,e.onPull)),q(i)?(this._emitted=i.value,Gg()):void 0}let o=new hc(e.upstreamExecutor,e.lastDone,n,e.upstreamDone,e.combineChildResults,e.combineWithChildResult,e.onPull);this.replaceSubexecutor(new fc(r.childExecutor,o,r.onEmit))}},bv=t=>t!==void 0?t:Me,kv=(t,e)=>E(yo(t,r=>xt(r(e))),ie(r=>E(_A(r),Ne(()=>mu))),K(r=>Re(()=>r))),Xg=(t,e,r)=>{let n=[t],o=()=>{let i=n.pop();if(i===void 0||i.upstream===void 0)return oc("Unexpected end of input for channel execution");let s=i.upstream.run();switch(s._tag){case ws:{let a=i.onEmit(i.upstream.getEmit());return n.length===0?a===void 0?Re(e):E(a,Vr({onFailure:r,onSuccess:e})):a===void 0?Re(()=>o()):E(a,Vr({onFailure:r,onSuccess:()=>o()}))}case Ds:{let a=i.onDone(i.upstream.getDone());return n.length===0?a===void 0?Re(e):E(a,Vr({onFailure:r,onSuccess:e})):a===void 0?Re(()=>o()):E(a,Vr({onFailure:r,onSuccess:()=>o()}))}case bi:return n.push(i),E(i.onEffect(s.effect),$u(a=>Re(()=>{let u=i.onDone(Pt(a));return u===void 0?Me:u})),Vr({onFailure:r,onSuccess:()=>o()}));case As:return n.push(i),n.push(s),Re(()=>o())}};return o()},qL=d(2,(t,e)=>{let r=(n,o,i)=>zk(_e(()=>new Mf(t,void 0,B)),s=>Re(()=>Qg(s.run(),s).pipe(mg(n),Oe(Ie(n)),gg(Ie(o)))),(s,a)=>{let u=s.close(a);return u===void 0?Me:sc(u,f=>Ya(i,Yt(f)))});return xf(n=>hf([Mx(e,Du),Qt(),Qt()]).pipe(K(([o,i,s])=>n(r(i,s,o)).pipe(Nn(e),K(a=>e.addFinalizer(()=>_p(i).pipe(K(u=>u?ur(s,void 0).pipe(Oe(Ux(a)),Oe(dk(a))):ur(s,void 0).pipe(Oe(mi(a)),Oe(dk(a)))))).pipe(Oe(n(Ie(i)))))))))}),Qg=(t,e)=>{let r=t;switch(r._tag){case bi:return E(r.effect,K(()=>Qg(e.run(),e)));case ws:return Qg(e.run(),e);case Ds:return Re(()=>e.getDone());case As:return Xg(r,()=>Qg(e.run(),e),Yt)}};var vv="Done",jL="Await";var CX="effect/ChannelMergeDecision",bX=Symbol.for(CX),kX={[bX]:{_R:t=>t,_E0:t=>t,_Z0:t=>t,_E:t=>t,_Z:t=>t}};var _v=t=>{let e=Object.create(kX);return e._tag=jL,e.f=t,e};var $g="BothRunning",Yg="LeftDone",Zg="RightDone";var _X="effect/ChannelMergeState",VL=Symbol.for(_X),Ov={[VL]:VL},eE=(t,e)=>{let r=Object.create(Ov);return r._tag=$g,r.left=t,r.right=e,r},Fv=t=>{let e=Object.create(Ov);return e._tag=Yg,e.f=t,e},Dv=t=>{let e=Object.create(Ov);return e._tag=Zg,e.f=t,e};var wv="BackPressure",Av="BufferSliding";var DX="effect/ChannelMergeStrategy",KL=Symbol.for(DX),QL={[KL]:KL},XL=t=>{let e=Object.create(QL);return e._tag=wv,e},$L=t=>{let e=Object.create(QL);return e._tag=Av,e};var YL=d(2,(t,{onBackPressure:e,onBufferSliding:r})=>{switch(t._tag){case wv:return e();case Av:return r()}});var ll="Empty",Tf="Emit",If="Error",Pf="Done",eB=t=>({_tag:ll,notifyProducer:t}),Rv=t=>({_tag:Tf,notifyConsumers:t}),wX=t=>({_tag:If,cause:t}),AX=t=>({_tag:Pf,done:t}),Mv=class{ref;constructor(e){this.ref=e}awaitRead(){return bo(co(this.ref,e=>e._tag===ll?[Ie(e.notifyProducer),e]:[Me,e]))}get close(){return Gk(e=>this.error(y1(e)))}done(e){return bo(co(this.ref,r=>{switch(r._tag){case ll:return[Ie(r.notifyProducer),r];case Tf:return[yo(r.notifyConsumers,n=>ur(n,Pe(e)),{discard:!0}),AX(e)];case If:return[ks,r];case Pf:return[ks,r]}}))}emit(e){return K(Qt(),r=>bo(co(this.ref,n=>{switch(n._tag){case ll:return[Ie(n.notifyProducer),n];case Tf:{let o=n.notifyConsumers[0],i=n.notifyConsumers.slice(1);if(o!==void 0)return[ur(o,be(e)),i.length===0?eB(r):Rv(i)];throw new Error("Bug: Channel.SingleProducerAsyncInput.emit - Queue was empty! please report an issue at https://github.com/Effect-TS/effect/issues")}case If:return[ks,n];case Pf:return[ks,n]}})))}error(e){return bo(co(this.ref,r=>{switch(r._tag){case ll:return[Ie(r.notifyProducer),r];case Tf:return[yo(r.notifyConsumers,n=>Xm(n,e),{discard:!0}),wX(e)];case If:return[ks,r];case Pf:return[ks,r]}}))}get take(){return this.takeWith(e=>Pt(Ss(e,Pe)),e=>Nt(e),e=>hu(be(e)))}takeWith(e,r,n){return K(Qt(),o=>bo(co(this.ref,i=>{switch(i._tag){case ll:return[Oe(ur(i.notifyProducer,void 0),_s(Ie(o),{onFailure:e,onSuccess:Et({onLeft:n,onRight:r})})),Rv([o])];case Tf:return[_s(Ie(o),{onFailure:e,onSuccess:Et({onLeft:n,onRight:r})}),Rv([...i.notifyConsumers,o])];case If:return[me(e(i.cause)),i];case Pf:return[me(n(i.done)),i]}})))}},Tv=()=>E(Qt(),K(t=>hn(eB(t))),ie(t=>new Mv(t)));var tE=d(2,(t,e)=>dv(t,e,()=>{},()=>{}));var Nv=t=>{let e=vo({onInput:()=>e,onFailure:zt,onDone:sl});return Tr(t,e)};var Lv=d(2,(t,e)=>Ff(t,()=>e));var PX=t=>Te(t,B);var Bv=t=>_o(t.takeWith(zt,e=>Te(et(e),()=>Bv(t)),sl));var Wv=d(2,(t,e)=>Te(t,r=>al(()=>e(r))));var Hv=d(2,(t,e)=>{let r=Df({onInput:n=>Te(et(e(n)),()=>r),onFailure:il,onDone:lc});return Tr(t,r)}),oB=d(2,(t,e)=>{let r=vo({onInput:n=>E(Ke(e(n)),Te(et),Te(()=>r)),onFailure:zt,onDone:lc});return Tr(t,r)});var NX=t=>e=>LX(t)(e,tn);var LX=({bufferSize:t=16,concurrency:e,mergeStrategy:r=XL()})=>(n,o)=>rE(i=>gi(function*(){let s=e==="unbounded"?Number.MAX_SAFE_INTEGER:e,a=yield*Tv(),u=Bv(a),f=yield*nl(t);yield*Ya(i,Ci(f));let p=yield*vf();yield*Ya(i,Ci(p));let x=yield*hn(k()),m=yield*Qt(),c=(yield*xg(s)).withPermits,l=yield*pl(Tr(u,n),i);function h(y){return y.pipe(K(Et({onLeft:S=>me(b(S)),onRight:S=>Ei(En(f,me(be(S))),k())})),dg({until:S=>q(S)}),K(S=>Rp(x,Se({onNone:()=>b(S.value),onSome:F=>b(o(F,S.value))}))),$u(S=>vx(S)?Yt(S):En(f,Yt(S)).pipe(Oe(ur(m,void 0)),So)))}yield*l.pipe(Vr({onFailure:y=>En(f,Yt(y)).pipe(Oe(me(!1))),onSuccess:Et({onLeft:y=>yf(Ar(Ie(m)),Ar(c(s)(Me)),{onSelfDone:(S,F)=>Ei(mi(F),!1),onOtherDone:(S,F)=>Oe(mi(F),ii(x).pipe(K(Se({onNone:()=>En(f,me(Pe(y))),onSome:w=>En(f,me(Pe(o(w,y))))})),Ei(!1)))}),onRight:y=>YL(r,{onBackPressure:()=>gi(function*(){let S=yield*Qt(),F=lg(M=>pl(Tr(u,y),M).pipe(K(z=>Ef(xt(h(z)),xt(Ar(Ie(m))))),K(B)));return yield*ur(S,void 0).pipe(Oe(F),c(1),Nn(i)),yield*Ie(S),!(yield*_p(m))}),onBufferSliding:()=>gi(function*(){let S=yield*Qt(),F=yield*Qt(),w=yield*wL(p);yield*uc(p).pipe(K(Z=>ur(Z,void 0)),gf(()=>w>=s)),yield*En(p,S);let M=lg(Z=>pl(Tr(u,y),Z).pipe(K(te=>xt(h(te)).pipe(Ef(xt(Ar(Ie(m)))),Ef(xt(Ar(Ie(S)))))),K(B)));return yield*ur(F,void 0).pipe(Oe(M),c(1),Nn(i)),yield*Ie(F),!(yield*_p(m))})})})}),dg({while:y=>y}),Nn(i));let g=E(uc(f),bo,_s({onFailure:zt,onSuccess:Et({onLeft:lc,onRight:y=>Te(et(y),()=>g)})}),_o);return qg(g,a)})),Uv=d(3,(t,e,r)=>NX(r)(Hv(t,e)));var zv=d(2,(t,e)=>{function r(n){return gi(function*(){let o=yield*Tv(),i=Bv(o),s=yield*pl(Tr(i,t),n),a=yield*pl(Tr(i,e.other),n);function u(p,x,m){return(c,l,h)=>{function g(y){let S=y;return S._tag===vv?me(Ke(Oe(mi(x),S.effect))):ie(Ux(x),Dr({onFailure:F=>Ke(S.f(Pt(F))),onSuccess:Et({onLeft:F=>Ke(S.f(Nt(F))),onRight:F=>Nf(et(F),f(h(S.f)))})}))}return Dr(p,{onFailure:y=>g(c(Pt(y))),onSuccess:Et({onLeft:y=>g(c(Nt(y))),onRight:y=>me(Te(et(y),()=>Te(Ke(Nn(Ar(m),n)),S=>f(l(S,x)))))})})}}function f(p){switch(p._tag){case $g:{let x=Ar(xk(p.left)),m=Ar(xk(p.right));return _o(yf(x,m,{onSelfDone:(c,l)=>Oe(mi(l),u(c,p.right,s)(e.onSelfDone,eE,h=>Fv(h))),onOtherDone:(c,l)=>Oe(mi(l),u(c,p.left,a)(e.onOtherDone,(h,g)=>eE(g,h),h=>Dv(h)))}))}case Yg:return _o(ie(xt(a),Dr({onFailure:x=>Ke(p.f(Pt(x))),onSuccess:Et({onLeft:x=>Ke(p.f(Nt(x))),onRight:x=>Te(et(x),()=>f(Fv(p.f)))})})));case Zg:return _o(ie(xt(s),Dr({onFailure:x=>Ke(p.f(Pt(x))),onSuccess:Et({onLeft:x=>Ke(p.f(Nt(x))),onRight:x=>Te(et(x),()=>f(Dv(p.f)))})})))}}return Ke(Xu(p=>{let x=Xu(l=>(l.transferChildren(p.scope()),Me)),m=Ar(s).pipe(Co(x),Nn(n)),c=Ar(a).pipe(Co(x),Nn(n));return yi(m,c,(l,h)=>eE(l,h))})).pipe(Te(f),qg(o))})}return rE(r)});var qv=t=>jk(e=>qL(t,e)),jv=t=>_o(xf(e=>ie(Tx(),r=>mv(sc(e(Rx(t,r)),n=>Cs(r,Pt(n))),(n,o)=>Cs(r,o))))),iB=t=>fl(ie(ug,e=>Te(Ke(t(e)),et)));var sB=t=>K(ug,e=>pl(t,e)),pl=d(2,(t,e)=>ko(_e(()=>new Mf(t,void 0,B)),tl()).pipe(Rr(([r,n])=>V1(e,o=>{let i=r.close(o);return i!==void 0?Zu(i,n):Me})),vs,ie(([r])=>Re(()=>Iv(r.run(),r))))),Iv=(t,e)=>{let r=t;switch(r._tag){case Ds:return Dr(e.getDone(),{onFailure:Yt,onSuccess:n=>me(Pe(n))});case ws:return me(be(e.getEmit()));case bi:return E(r.effect,K(()=>Iv(e.run(),e)));case As:return Xg(r,()=>Iv(e.run(),e),n=>Yt(n))}};var _o=t=>PX(Ke(t)),fl=t=>zg(jv(t),(e,r)=>e,(e,r)=>e),rE=t=>zg(iB(t),(e,r)=>e,(e,r)=>e);var nE=t=>aB(0,t.length,t),aB=(t,e,r)=>t===e?Ir:E(et(E(r,qn(t))),Te(()=>aB(t+1,e,r))),BX=d(t=>Ug(t[1]),(t,e,r)=>r?.concurrent?zv(t,{other:e,onSelfDone:n=>_v(o=>Re(()=>uC(n,o))),onOtherDone:n=>_v(o=>Re(()=>uC(o,n)))}):Te(t,n=>Wv(e,o=>[n,o])));var Nf=d(t=>Ug(t[1]),(t,e,r)=>r?.concurrent?Wv(BX(t,e,{concurrent:!0}),n=>n[1]):Te(t,()=>e));var uB=Symbol.for("effect/Sink"),GX={_A:t=>t,_In:t=>t,_L:t=>t,_E:t=>t,_R:t=>t},Lf=class{channel;[uB]=GX;constructor(e){this.channel=e}pipe(){return R(this,arguments)}};var lB=t=>{let e=vo({onInput:r=>E(Ke(yo(r,n=>t(n),{discard:!0})),Te(()=>e)),onFailure:zt,onDone:()=>Ir});return new Lf(e)};var pB=t=>new Lf(Ke(t));var Gv=t=>Eo(t)?Gv(pB(t)):t.channel;var fB=t=>new Lf(fl(t.pipe(ie(e=>Gv(e)))));var hB=Gu;var mB=Sk;var dB=Jx;var gB=t=>Object.assign(t,{chunk(r){return this(me(r))},die(r){return this(xi(r))},dieMessage(r){return this(oc(r))},done(r){return this(Re(()=>cC(r,{onFailure:b,onSuccess:xe})))},end(){return this(Ve(k()))},fail(r){return this(Ve(b(r)))},fromEffect(r){return this(Uk(r,{onFailure:b,onSuccess:xe}))},fromEffectChunk(r){return this(E(r,ic(b)))},halt(r){return this(Yt(E(r,Ss(b))))},single(r){return this(me(xe(r)))}});var QX="effect/Take",XX=Symbol.for(QX),$X={_A:t=>t,_E:t=>t},Bf=class{exit;[XX]=$X;constructor(e){this.exit=e}pipe(){return R(this,arguments)}},oE=t=>new Bf(Nt(t));var EB=t=>Re(()=>t.exit),iE=new Bf(hu(k()));var sE=t=>new Bf(Pt(E(t,Ss(b))));var yB=t=>_s(t,{onFailure:e=>Se(Ox(e),{onNone:()=>iE,onSome:sE}),onSuccess:oE});var Jv=d(2,(t,{onEnd:e,onFailure:r,onSuccess:n})=>Dr(t.exit,{onFailure:o=>Se(Ox(o),{onNone:e,onSome:r}),onSuccess:n}));var SB=()=>Ve(k());var e$="effect/Stream",Vv=Symbol.for(e$),t$={_R:t=>t,_E:t=>t,_A:t=>t},Qr=class{channel;[Vv]=t$;constructor(e){this.channel=e}pipe(){return R(this,arguments)}},Wf=t=>T(t,Vv)||Eo(t);var r$=t=>{if(t==="unbounded")return vf();if(typeof t=="number"||t===void 0)return nl(t??16);switch(t.strategy){case"dropping":return vg(t.bufferSize??16);case"sliding":return _g(t.bufferSize??16);default:return nl(t.bufferSize??16)}};var kB=(t,e)=>E(Jr(r$(e),r=>Ci(r)),K(r=>E(tl(),K(n=>E(t(gB(o=>E(yB(o),K(i=>En(r,i)),So,dB(n)).then(i=>{if($m(i)&&!vx(i.cause))throw S1(i.cause)}))),Oe(hn(!1)),K(o=>E(ii(o),ie(i=>i?SB():E(uc(r),K(EB),qk(()=>E(Ap(o,!0),Oe(Ci(r)))))))))))),Zv,Kv(Yv));var vB=d(2,(t,e)=>{if(e.strategy==="dropping")return n$(t,e.capacity);if(e.strategy==="sliding")return o$(t,e.capacity);let r=TB(t,e);return new Qr(fl(ie(r,n=>{let o=E(Ke(uc(n)),Te(Jv({onEnd:()=>Ir,onFailure:zt,onSuccess:i=>E(et(i),Te(()=>o))})));return o})))}),n$=d(2,(t,e)=>{let r=Jr(vg(e),n=>Ci(n));return new Qr(_B(r,Kr(t)))}),o$=d(2,(t,e)=>{let r=Jr(_g(e),n=>Ci(n));return new Qr(_B(r,Kr(t)))});var _B=(t,e)=>{let r=(o,i)=>{let s=a=>E(ii(i),Rr(Ie),Oe(Qt()),K(u=>E(En(o,[a,u]),Oe(Ap(i,u)),Oe(Ie(u)))),So,Ke);return vo({onInput:a=>E(Qt(),K(u=>E(En(o,[oE(a),u]),K(f=>E(Ap(i,u),gf(()=>f))))),So,Ke,Te(()=>r(o,i))),onFailure:a=>s(sE(a)),onDone:()=>s(iE)})},n=o=>{let i=E(Ke(uc(o)),Te(([s,a])=>Nf(Ke(ur(a,void 0)),Jv(s,{onEnd:()=>Ir,onFailure:zt,onSuccess:u=>E(et(u),Te(()=>i))}))));return i};return fl(E(t,K(o=>E(Qt(),Rr(i=>ur(i,void 0)),K(i=>E(hn(i),K(s=>E(e,Tr(r(o,s)),qv,hg)),Ei(n(o))))))))};var OB=t=>$v(Ve(b(t)));var Kv=d(t=>Wf(t[0]),(t,e,r)=>{let n=r?.bufferSize??16;return r?.switch?CB(r?.concurrency,()=>bB(t,1,n,e),o=>bB(t,o,n,e)):CB(r?.concurrency,()=>new Qr(tE(Kr(t),o=>E(o,Wh(i=>Kr(e(i))),YF(Ir,(i,s)=>E(i,Nf(s)))))),o=>new Qr(E(Kr(t),tE(nE),Uv(i=>Kr(e(i)),r))))}),CB=(t,e,r)=>{switch(t){case void 0:return e();case"unbounded":return r(Number.MAX_SAFE_INTEGER);default:return t>1?r(t):e()}},bB=d(4,(t,e,r,n)=>new Qr(E(Kr(t),tE(nE),Uv(o=>Kr(n(o)),{concurrency:e,mergeStrategy:$L(),bufferSize:r})))),Qv=d(t=>Wf(t[0]),(t,e)=>Kv(t,B,e));var FB=t=>new Qr(t),Kr=t=>{if("channel"in t)return t.channel;if(Eo(t))return Kr(Xv(t));throw new TypeError("Expected a Stream.")};var Xv=t=>E(t,ic(b),$v),$v=t=>new Qr(_o(Sf(t,{onFailure:Se({onNone:()=>Ir,onSome:il}),onSuccess:e=>et(xe(e))})));var DB=(...t)=>{let e=t.length===1?t[0].evaluate:t[0],r=t.length===1?t[0].onError:t[1],n=t.length===1?t[0].releaseLockOnEnd===!0:!1;return e_(ie(Jr(_e(()=>e().getReader()),o=>n?_e(()=>o.releaseLock()):Wk(()=>o.cancel())),o=>wB(K(Pn({try:()=>o.read(),catch:i=>b(r(i))}),({done:i,value:s})=>i?Ve(k()):me(s)))))};var Yv=t=>NB(t,e=>E(ie(e,r=>b([r,e])),sg(Se({onNone:()=>me(k()),onSome:Ve})))),wB=t=>Yv(E(t,ie(xe)));var AB=d(2,(t,e)=>{let r=vo({onInput:n=>Te(et(oE(n)),()=>r),onFailure:n=>et(sE(n)),onDone:()=>et(iE)});return E(Tr(Kr(t),r),oB(n=>En(e,n)),Nv,qv,So)});var Zv=t=>new Qr(Lv(jv(E(t,ie(xe))),Me));var RB=t=>new Qr(wf(()=>Kr(t())));var MB=t=>ie(sB(Kr(t)),e=>E(e,ic(b),K(Et({onLeft:()=>Ve(k()),onRight:me})))),TB=d(t=>Wf(t[0]),(t,e)=>Rr(Jr(e?.strategy==="unbounded"?vf():e?.strategy==="dropping"?vg(e.capacity??2):e?.strategy==="sliding"?_g(e.capacity??2):nl(e?.capacity??2),r=>Ci(r)),r=>hg(AB(t,r))));var IB=d(t=>Wf(t[0]),(t,e)=>ie(tl(),r=>PB(t,r,e))),PB=d(t=>Wf(t[0]),(t,e,r)=>{let n=mB(e),o=hB(e),i,s;return new ReadableStream({start(a){s=n(Tx());let u=E(MB(t),Rx(s),n,K(f=>Bi(f)?u:me(f)));i=E(u,Rr(f=>_e(()=>{Wh(f,p=>{a.enqueue(p)})})),sc(()=>Cs(s,mu)),cg({None:()=>_e(()=>{a.close()}),Some:f=>_e(()=>{a.error(f.value)})}),So)},pull(){return new Promise(a=>{o(i,{scope:s}).addObserver(u=>a())})},cancel(){return new Promise(a=>{o(Cs(s,mu)).addObserver(u=>a())})}},r?.strategy)});var NB=(t,e)=>RB(()=>{let r=n=>_o(ie(e(n),Se({onNone:()=>Ir,onSome:([o,i])=>Te(et(o),()=>r(i))})));return new Qr(r(t))});var LB=t=>Qv(Xv(t)),e_=t=>Qv(Zv(t));var t_=Te;var r_=Ir;var BB=et;var HB="effect/Redacted",aE=J("effect/Redacted/redactedRegistry",()=>new WeakMap),n_=Symbol.for(HB),s$={[n_]:{_A:t=>t},pipe(){return R(this,arguments)},toString(){return"<redacted>"},toJSON(){return"<redacted>"},[ee](){return"<redacted>"},[H](){return E(L(HB),G(L(aE.get(this))),re(this))},[W](t){return UB(t)&&I(aE.get(this),aE.get(t))}},UB=t=>T(t,n_),zB=t=>{let e=Object.create(s$);return aE.set(e,t),e};var o_=Zc;var cE=t=>e=>{let r=e===void 0?Object.create(Ti):o_(e);return r._tag=t,r};var i_=function(){let t=Symbol.for("effect/Data/Error/plainArgs");return class extends bp{constructor(r){super(r?.message,r?.cause?{cause:r.cause}:void 0),r&&(Object.assign(this,r),Object.defineProperty(this,t,{value:r,enumerable:!1}))}toJSON(){return{...this[t],...this}}}}(),hl=t=>{class e extends i_{_tag=t}return e.prototype.name=t,e};var mc={};Di(mc,{MatcherTypeId:()=>m$,SafeRefinementId:()=>Y$,any:()=>N$,bigint:()=>U$,boolean:()=>B$,date:()=>q$,defined:()=>L$,discriminator:()=>k$,discriminatorStartsWith:()=>v$,discriminators:()=>_$,discriminatorsExhaustive:()=>O$,either:()=>Q$,exhaustive:()=>$$,instanceOf:()=>G$,instanceOfUnsafe:()=>J$,is:()=>T$,nonEmptyString:()=>M$,not:()=>R$,null:()=>H$,number:()=>P$,option:()=>X$,orElse:()=>V$,orElseAbsurd:()=>K$,record:()=>j$,string:()=>I$,symbol:()=>z$,tag:()=>F$,tagStartsWith:()=>D$,tags:()=>w$,tagsExhaustive:()=>A$,type:()=>d$,typeTags:()=>E$,undefined:()=>W$,value:()=>x$,valueTags:()=>g$,when:()=>S$,whenAnd:()=>b$,whenOr:()=>C$,withReturnType:()=>y$});var lE=Symbol.for("@effect/matcher/Matcher"),c$={[lE]:{_input:B,_filters:B,_remaining:B,_result:B,_return:B},_tag:"TypeMatcher",add(t){return pE([...this.cases,t])},pipe(){return R(this,arguments)}};function pE(t){let e=Object.create(c$);return e.cases=t,e}var u$={[lE]:{_input:B,_filters:B,_result:B,_return:B},_tag:"ValueMatcher",add(t){return this.value._tag==="Right"?this:t._tag==="When"&&t.guard(this.provided)===!0?s_(this.provided,be(t.evaluate(this.provided))):t._tag==="Not"&&t.guard(this.provided)===!1?s_(this.provided,be(t.evaluate(this.provided))):this},pipe(){return R(this,arguments)}};function s_(t,e){let r=Object.create(u$);return r.provided=t,r.value=e,r}var dl=(t,e)=>({_tag:"When",guard:t,evaluate:e}),l$=(t,e)=>({_tag:"Not",guard:t,evaluate:e}),ml=t=>{if(typeof t=="function")return t;if(Array.isArray(t)){let e=t.map(ml),r=e.length;return n=>{if(!Array.isArray(n))return!1;for(let o=0;o<r;o++)if(e[o](n[o])===!1)return!1;return!0}}else if(t!==null&&typeof t=="object"){let e=Object.entries(t).map(([n,o])=>[n,ml(o)]),r=e.length;return n=>{if(typeof n!="object"||n===null)return!1;for(let o=0;o<r;o++){let[i,s]=e[o];if(!(i in n)||s(n[i])===!1)return!1}return!0}}return e=>e===t},p$=t=>{let e=t.map(ml),r=e.length;return n=>{for(let o=0;o<r;o++)if(e[o](n)===!0)return!0;return!1}},f$=t=>{let e=t.map(ml),r=e.length;return n=>{for(let o=0;o<r;o++)if(e[o](n)===!1)return!1;return!0}},jB=()=>pE([]),GB=t=>s_(t,Pe(t)),JB=t=>{let e=hE(t)(pE([]));return r=>e(r)},VB=()=>t=>{let e=hE(t)(pE([]));return r=>e(r)},KB=()=>t=>t,QB=(t,e)=>r=>r.add(dl(ml(t),e)),XB=(...t)=>e=>{let r=t[t.length-1],n=t.slice(0,-1);return e.add(dl(p$(n),r))},$B=(...t)=>e=>{let r=t[t.length-1],n=t.slice(0,-1);return e.add(dl(f$(n),r))},a_=t=>(...e)=>{let r=e[e.length-1],n=e.slice(0,-1),o=n.length===1?i=>i[t]===n[0]:i=>n.includes(i[t]);return i=>i.add(dl(o,r))},c_=t=>(e,r)=>{let n=o=>typeof o[t]=="string"&&o[t].startsWith(e);return o=>o.add(dl(n,r))},fE=t=>e=>{let r=dl(n=>n[t]in e,n=>e[n[t]](n));return n=>n.add(r)},u_=t=>e=>{let r=fE(t)(e);return n=>f_(r(n))},YB=a_("_tag"),ZB=c_("_tag"),eW=fE("_tag"),hE=u_("_tag"),tW=(t,e)=>r=>r.add(l$(ml(t),e)),rW=t=>typeof t=="string"&&t.length>0,nW=(...t)=>{let e=t.length;return r=>{for(let n=0;n<e;n++)if(r===t[n])return!0;return!1}},oW=()=>!0,iW=t=>t!=null,l_=t=>e=>e instanceof t;var p_=t=>e=>{let r=Hf(e);return Oh(r)?r._tag==="Right"?r.right:t(r.left):n=>{let o=r(n);return o._tag==="Right"?o.right:t(o.left)}},sW=t=>p_(()=>{throw new Error("effect/Match/orElseAbsurd: absurd")})(t),Hf=t=>{if(t._tag==="ValueMatcher")return t.value;let e=t.cases.length;if(e===1){let r=t.cases[0];return n=>r._tag==="When"&&r.guard(n)===!0?be(r.evaluate(n)):r._tag==="Not"&&r.guard(n)===!1?be(r.evaluate(n)):Pe(n)}return r=>{for(let n=0;n<e;n++){let o=t.cases[n];if(o._tag==="When"&&o.guard(r)===!0)return be(o.evaluate(r));if(o._tag==="Not"&&o.guard(r)===!1)return be(o.evaluate(r))}return Pe(r)}},aW=t=>{let e=Hf(t);return Oh(e)?Et(e,{onLeft:()=>k(),onRight:b}):r=>Et(e(r),{onLeft:()=>k(),onRight:b})},qB="effect/Match/exhaustive: absurd",f_=t=>{let e=Hf(t);if(Oh(e)){if(e._tag==="Right")return e.right;throw new Error(qB)}return r=>{let n=e(r);if(n._tag==="Right")return n.right;throw new Error(qB)}};var m$=lE,d$=jB,x$=GB,g$=JB,E$=VB,y$=KB,S$=QB,C$=XB,b$=$B,k$=a_,v$=c_,_$=fE,O$=u_,F$=YB,D$=ZB,w$=eW,A$=hE,R$=tW,M$=rW,T$=nW,I$=Oc,P$=Bs,N$=oW,L$=iW,B$=IO,W$=NO;var H$=LO;var U$=lh,z$=PO,q$=WO,j$=HO,G$=l_,J$=l_,V$=p_,K$=sW,Q$=Hf,X$=aW,$$=f_,Y$=Symbol.for("effect/SafeRefinement");var h_=zB;var uW=lB;var lW=fB;var fW=kB;var hW=vB;var m_=OB;var mW=FB;var dW=DB;var xW=IB;var gW=LB,d_=e_;var CE=Ft(Ln(),1);var zf=class{message;stack;span;isPlainString;errorType;constructor(e,r,n,o,i){this.message=e,this.stack=r,this.span=n,this.isPlainString=o,this.errorType=i}};var SW=t=>{if(typeof t=="string")return{isPlainString:!0,message:t};if(t instanceof Error&&T(t,"cause")&&T(t,"_tag"))return{isPlainString:!1,type:t._tag,message:t.cause};if(t instanceof Error&&T(t,"error"))return{isPlainString:!1,type:t.name,message:t.error};if(T(t,"_tag")&&T(t,"message"))return{isPlainString:!1,type:t._tag,message:t.message};if(T(t,"toString")&&kc(t.toString)&&t.toString!==Object.prototype.toString&&t.toString!==Array.prototype.toString){let e=t.toString(),r=e.split(": ");if(r.length>1){let[n,...o]=r;return{isPlainString:!1,type:n,message:o}}return{message:e,isPlainString:!1}}return{message:`Error: ${JSON.stringify(t)}`,isPlainString:!1}};var CW=Symbol.for("effect/SpanAnnotation"),g_=t=>{let e=T(t,CW)?t[CW]:void 0,{message:r,type:n,isPlainString:o}=SW(t);return t instanceof Error?new zf(r,t.stack?.split(`
`).filter(i=>/at (.*)/.exec(i)).join(`\r
`),e,!1,n):new zf(r,void 0,e,o,n)};var xE=t=>C1(t,void 0,{emptyCase:()=>[],dieCase:(e,r)=>[g_(r)],failCase:(e,r)=>[g_(r)],interruptCase:()=>[],parallelCase:(e,r,n)=>[...r,...n],sequentialCase:(e,r,n)=>[...r,...n]});var dc=Ft(Ln(),1),bW=(t,e,r,n)=>{let o=r>1?dc.default.bgRed(dc.default.white(` #${n+1} -`)):"",i=dc.default.bgRed(dc.default.white(` ${t??"Unknown error"} `)),s=dc.default.bold(dc.default.white(` \u2022 ${e}`));return`\u{1F4A5} ${o}${i}${s}\r
`};var E_=Ft(Ln(),1);var kW=global.process!==void 0?new RegExp(global.process.cwd(),"g"):null,xl=t=>kW===null?t:t.replace(kW,".");var gl=/ {4}at /g,vW=/^(file:\/\/)?(.*.([jt])sx?)(\?.*)?:(\d*):(\d*)$/;var rY=mc.type().pipe(mc.when("effect",t=>"at "),mc.when("node",t=>"\u2502 at "),mc.exhaustive),gE=(t,e,r)=>{let n=t.split(`\r
`),o=[];for(let s of n)if(o.push(s.replace(/at .*effect_cutpoint.*\((.*)\)/,"at $1")),s.includes("effect_cutpoint"))return o.join(`\r
`);let i=o.join(`\r
`).replace(gl,rY(e));return r?xl(i):i};var _W=(t,e,r,n,{stripCwd:o})=>{r!==void 0?t.push(`\r
${e!==void 0?`\r
`:""}\u{1F6A8} Node Stacktrace\r
${E_.default.red(gE(r,"node",o===!0))}`):n||t.push(`\r
\r
${E_.default.gray("\u2139\uFE0F  Consider using a yieldable error such as Data.TaggedError and Schema.TaggedError to get a stacktrace.")}`)};var RW=Ft(Ln(),1);var SE=Ft(Ln(),1);var yE=Ft(Ln(),1);var EE=t=>Array.from(t.entries()).reduce((e,[r,n])=>r==="code.stacktrace"?{attributes:e.attributes,stacktrace:[...e.stacktrace,n]}:{attributes:new Map([...e.attributes,[r,n]]),stacktrace:e.stacktrace},{stacktrace:[],attributes:new Map});var nY=t=>t?" ":yE.default.gray("\u2502"),OW=(t,e)=>{if(t.size===0)return{formattedAttributes:"",stack:[]};let{attributes:r,stacktrace:n}=EE(t),o=Array.from(r).map(([i,s])=>`${nY(e)}     ${yE.default.blue(i)}${yE.default.gray(":")} ${s}`).join(`\r
`);return{formattedAttributes:`${o.length>0?`\r
`:""}${o}`,stack:n}};var FW=Ft(Ln(),1),DW=(t,e)=>{if(t._tag!=="Ended")return"";let r=(t.endTime-t.startTime)/BigInt(1e6);return`\r
${e?" ":FW.default.gray("\u2502")}     ~ ${r}ms`};var y_=Ft(Ln(),1),wW=t=>t?y_.default.gray("\u2570"):y_.default.gray("\u251C");var AW=(t,{stripCwd:e,reverseSpans:r})=>{let n=t,o=[];for(;n!==void 0&&n._tag==="Span";)o.push(n),n=se.getOrUndefined(n.parent);return(r===!0?o.toReversed():o).map(({name:s,attributes:a,status:u},f)=>{let p=f===0,x=f===o.length-1,m=` at ${e!==void 0?xl(s):s}`,{formattedAttributes:c,stack:l}=OW(a,x),h=p?`\r
${SE.default.gray("\u25EF")}`:"";return{message:SE.default.white(`${h}\r
${wW(x)}${SE.default.gray("\u2500")}${m}${DW(u,x)}${c}`),stack:l}}).reduce((s,a)=>({message:s.message+a.message,stack:[...s.stack,...a.stack]}),{message:"",stack:[]})};var MW=(t,e,r,{stripCwd:n,reverseSpans:o})=>{if(e!==void 0){let i=AW(e,{stripCwd:n,reverseSpans:o});return t.push(i.message),i.stack}r||t.push(`\r
${RW.default.gray(`\u2139\uFE0F  Consider using spans to improve errors reporting.\r
`)}`)};var TW=Ft(Ln(),1),IW=(t,e)=>{e&&t.push(`\r
${TW.default.gray("\u2139\uFE0F  You used a plain string to represent a failure in the error channel (E). You should consider using tagged objects (with a _tag field), or yieldable errors such as Data.TaggedError and Schema.TaggedError for better handling experience.")}`)};var PW=Ft(Ln(),1);var NW=(t,e,r,{stripCwd:n})=>{if(r===void 0||r.length===0)return;let o=`\u2502 ${gE(r.join(`\r
\u2502 `),"effect",n===!0)}`;t.push(`\r
${e!==void 0?`\r
`:""}\u{1F6A8} Spans Stacktrace\r
${PW.default.red(o)}`)};var S_=t=>t.split(`\r
`).filter(r=>r.includes(process.cwd())&&!r.includes("/node_modules/")),LW=(t,e)=>{let r=[];return t&&e!==void 0&&r.push(...S_(t)),e!==void 0&&r.push(...e),r};var qf={enabled:!0,stripCwd:!1,reverseSpans:!0};var C_=(t,e=qf)=>{if(_x(t))return"All fibers interrupted without errors.";let r=xE(t);return`\r
\u{1FAE0}  ${CE.default.bold(CE.default.yellow(CE.default.underline(`${r.length} error${r.length>1?"s":""} occured`)))}\r
\r
`+r.map(({errorType:o,message:i,stack:s,span:a,isPlainString:u},f)=>{let p=[bW(o,i,r.length,f)];IW(p,u);let x=MW(p,a,u,e),m=LW(s,x);return NW(p,a,m,e),_W(p,a,s,u,e),[...p,`\r
`].join("")}).join(`\r
`)};var BW=async(t,e=qf)=>await N.runPromise(E(t,N.sandbox,N.catchAll(r=>{if(e.enabled===!1)return N.fail(r);let n=C_(r,e);return console.error(n),N.fail("\u274C runPromise failure")})));var WW=t=>{let e=vW.exec(t);if(e===null||e.length!==7)return;let r=e[2],n=+e[5],o=+e[6];return{filePath:r,line:n,column:o}};var b_=Symbol.for("@effect/platform/Error/PlatformErrorTypeId"),HW=t=>e=>o_({[b_]:b_,_tag:t,...e}),UW=HW("BadArgument"),zW=HW("SystemError");var k_=(t,e)=>{class r extends i_{_tag=e}return r.prototype[t]=t,r.prototype.name=e,r},jf=UW,El=zW;var v_=st("@effect/platform/FileSystem"),Jf=t=>typeof t=="bigint"?t:BigInt(t);var Gf=BigInt(1024),ebe=Gf*Gf*Gf*Gf*Gf;var qW=t=>v_.of({...t,exists:e=>E(t.access(e),Ei(!0),ag("SystemError",r=>r.reason==="NotFound"?me(!1):Ve(r))),readFileString:(e,r)=>df(t.readFile(e),{try:n=>new TextDecoder(r).decode(n),catch:()=>jf({module:"FileSystem",method:"readFileString",message:"invalid encoding"})}),stream:(e,r)=>E(t.open(e,{flag:"r"}),r?.offset?Rr(n=>n.seek(r.offset,"start")):B,ie(n=>iY(n,r)),d_),sink:(e,r)=>E(t.open(e,{flag:"w",...r}),ie(n=>uW(o=>n.writeAll(o))),lW),writeFileString:(e,r,n)=>K(mf({try:()=>new TextEncoder().encode(r),catch:()=>jf({module:"FileSystem",method:"writeFileString",message:"could not encode string"})}),o=>t.writeFile(e,o,n))});var iY=(t,{bufferSize:e=16,bytesToRead:r,chunkSize:n=Jf(64*1024)}={})=>{let o=r!==void 0?Jf(r):void 0,i=Jf(n);function s(a){if(o!==void 0&&o<=a)return r_;let u=o!==void 0&&o-a<i?o-a:i;return t_(t.readAlloc(u),Se({onNone:()=>r_,onSome:f=>t_(BB(xe(f)),p=>s(a+BigInt(f.length)))}))}return hW(mW(s(BigInt(0))),{capacity:e})};var yl=Jf;var Oo=v_,jW=qW;var vE=Symbol.for("@effect/platform/FileSystem/File");var GW=IF(),JW=cE("Create"),VW=cE("Update"),KW=cE("Remove"),kE=class extends zc("@effect/platform/FileSystem/WatchBackend")(){};var aY=7,_E=({filePath:t,line:e,column:r},n=!1)=>N.gen(function*(){let i=yield*(yield*Oo).readFileString(t,"utf8"),s=e>=4?e-4:0;return i.split(`
`).splice(s,aY).map((a,u)=>{let f=u+s+1,p=n?r+1:r;return{line:f,code:a,column:f===e?p:void 0}})});var w3=Ft(require("node:path"),1);var A3=Ft(CH(),1);var O3=Ft(pO(),1);var WE=class extends hl("json-parsing-error"){};var F3=t=>E(N.sync(()=>(0,O3.parse)(t,null,!0)),N.catchAll(e=>N.fail(new WE({cause:e}))),N.withSpan("parse-json",{attributes:{data:t}}));var D3=t=>E(N.gen(function*(){let r=yield*(yield*Oo).readFileString(t,"utf8");return yield*F3(r)}),N.withSpan("read-json",{attributes:{filePath:t}}));var R3=t=>E(N.gen(function*(){if(!(yield*(yield*Oo).exists(`${t.filePath}.map`)))return{_tag:"location",...t,filePath:t.filePath.replace(process.cwd(),"")};let n=yield*D3(`${t.filePath}.map`);if(n.version===void 0||n.sources===void 0)return;let i=new A3.SourceMapConsumer(n).originalPositionFor({column:t.column,line:t.line});if(i.source===null||i.line===null||i.column===null)return;let s=w3.default.resolve(t.filePath.substring(0,t.filePath.lastIndexOf("/")),i.source),a=yield*_E({filePath:s,line:i.line,column:i.column},!0);return{_tag:"sources",runPath:`${t.filePath}:${t.line}:${t.column}`,sourcesPath:`${s}:${i.line}:${i.column+1}`,source:a}}),N.withSpan("get-sources-from-map-file",{attributes:{location:t}}));var M3=t=>N.gen(function*(){let e=WW(t);if(e===void 0)return;let{filePath:r,line:n,column:o}=e;if(r.endsWith(".ts")||r.endsWith(".tsx")){let s=yield*_E(e);return{_tag:"sources",runPath:`${r}:${n}:${o}`,sourcesPath:void 0,source:s}}return yield*R3(e)});var HE=t=>E(N.forEach(t,e=>N.gen(function*(){let r=e.trimStart().split(" "),n=r.length===2?r[1]:r[r.length-1].slice(1,-1),o=yield*M3(n);if(o===void 0)return{_tag:"stack-entry",runPath:e.replaceAll(gl,"at ")};if(o._tag==="location")return o;let i=new RegExp(`${process.cwd()}/node_modules/`);if(!o.sourcesPath?.match(i))return o})),N.map(e=>e.filter(r=>r!==void 0)));var T3=({span:t,sources:e,location:r})=>E(N.gen(function*(){if(t===void 0)return{spans:[],sources:e,location:r};let n=[],o=t;for(;o!==void 0&&o._tag==="Span";){let{name:i,attributes:s,status:a}=o,{attributes:u,stacktrace:f}=EE(s),p=yield*HE(f),x=a._tag==="Ended"?+`${(a.endTime-a.startTime)/BigInt(1e6)}`:void 0;e.push(...p.filter(m=>m._tag==="sources")),r.push(...p.filter(m=>m._tag==="location")),n.push({name:i,attributes:Object.fromEntries(u),durationInMilliseconds:x,startTime:a.startTime,endTime:a._tag==="Ended"?a.endTime:void 0}),o=se.getOrUndefined(o.parent)}return{spans:n,location:r,sources:e}}),N.withSpan("get-sources-from-span"));var I3=t=>E(N.gen(function*(){if(t===void 0)return{sources:[],location:[]};let e=S_(t),r=yield*HE(e);return{sources:r.filter(n=>n._tag==="sources"),location:r.filter(n=>n._tag==="location")}}),N.withSpan("get-sources-from-stack"));var P3=({reverseSpans:t,stripCwd:e})=>({message:r,stack:n,span:o,errorType:i,isPlainString:s})=>E(N.gen(function*(){let a=yield*I3(n),{spans:u,sources:f,location:p}=yield*T3({span:o,...a}),x;return n!==void 0&&(x=e===!0?xl(n):n),{errorType:i,message:r,stack:x?.replaceAll(gl,"at ").split(`\r
`),sources:f.length>0?f.map(({_tag:m,...c})=>c):void 0,location:p.length>0?p.map(({_tag:m,...c})=>c):void 0,spans:t===!0?u.toReversed():u,isPlainString:s}}),N.withSpan("transform-raw-error"));var N3=(t,e={reverseSpans:!0,stripCwd:!0})=>N.gen(function*(){if(_x(t))return{interrupted:!0,errors:[]};let r=xE(t);return{interrupted:!1,errors:yield*N.forEach(r,P3(e))}});var Sc=class extends at.Tag("Logger")(){},L3=Fs.succeed(Sc,{info:(t,...e)=>E(N.succeed(console.info(t,e)),N.withSpan("logger-console/info")),error:(t,...e)=>E(N.succeed(console.error(t,e)),N.withSpan("logger-console/error"))});var B3=Symbol.for("@effect/platform/Cookies");var W3=Symbol.for("@effect/platform/Cookies/Cookie");var cee={[B3]:B3,...qs,toJSON(){return{_id:"@effect/platform/Cookies",cookies:gF(this.cookies,t=>t.toJSON())}},pipe(){return R(this,arguments)}},uee=t=>{let e=Object.create(cee);return e.cookies=t,e},lee=t=>{let e={};for(let r of t)e[r.name]=r;return uee(e)},U3=t=>{let e=typeof t=="string"?[t]:t,r=[];for(let n of e){let o=pee(n.trim());q(o)&&r.push(o.value)}return lee(r)};function pee(t){let e=t.split(";").map(a=>a.trim()).filter(a=>a!=="");if(e.length===0)return k();let r=e[0].indexOf("=");if(r===-1)return k();let n=e[0].slice(0,r);if(!fee.test(n))return k();let o=e[0].slice(r+1),i=hee(o);if(e.length===1)return b(Object.assign(Object.create(H3),{name:n,value:i,valueEncoded:o}));let s={};for(let a=1;a<e.length;a++){let u=e[a],f=u.indexOf("="),p=f===-1?u:u.slice(0,f).trim(),x=f===-1?void 0:u.slice(f+1).trim();switch(p.toLowerCase()){case"domain":{if(x===void 0)break;let m=x.trim().replace(/^\./,"");m&&(s.domain=m);break}case"expires":{if(x===void 0)break;let m=new Date(x);isNaN(m.getTime())||(s.expires=m);break}case"max-age":{if(x===void 0)break;let m=parseInt(x,10);isNaN(m)||(s.maxAge=Ul(m));break}case"path":{if(x===void 0)break;x[0]==="/"&&(s.path=x);break}case"priority":{if(x===void 0)break;switch(x.toLowerCase()){case"low":s.priority="low";break;case"medium":s.priority="medium";break;case"high":s.priority="high";break}break}case"httponly":{s.httpOnly=!0;break}case"secure":{s.secure=!0;break}case"partitioned":{s.partitioned=!0;break}case"samesite":{if(x===void 0)break;switch(x.toLowerCase()){case"lax":s.sameSite="lax";break;case"strict":s.sameSite="strict";break;case"none":s.sameSite="none";break}break}}}return b(Object.assign(Object.create(H3),{name:n,value:i,valueEncoded:o,options:Object.keys(s).length>0?s:void 0}))}var fee=/^[\u0009\u0020-\u007e\u0080-\u00ff]+$/,H3={[W3]:W3,...qs,toJSON(){return{_id:"@effect/platform/Cookies/Cookie",name:this.name,value:this.value,options:this.options}}};var hee=t=>{try{return decodeURIComponent(t)}catch{return t}};var q3=(t,e,r)=>(...n)=>Qu(o=>{try{t(...n,(i,s)=>{o(i?Ve(e?e(i,n):i):me(s))})}catch(i){o(r?Ve(r(i,n)):xi(i))}});var lt=q3;var JE={};Di(JE,{Fetch:()=>_O,RequestInit:()=>OO,layer:()=>Nee});var j3=Symbol.for("@effect/platform/HttpClientError");var G3=j3;var Ol=class extends k_(G3,"RequestError"){get methodAndUrl(){return`${this.request.method} ${this.request.url}`}get message(){return this.description?`${this.reason}: ${this.description} (${this.methodAndUrl})`:`${this.reason} error (${this.methodAndUrl})`}},wo=class extends k_(G3,"ResponseError"){get methodAndUrl(){return`${this.request.method} ${this.request.url}`}get message(){let e=`${this.response.status} ${this.methodAndUrl}`;return this.description?`${this.reason}: ${this.description} (${e})`:`${this.reason} error (${e})`}};var J3=Symbol.for("@effect/platform/Headers");var nh=Object.assign(Object.create(null),{[J3]:J3,[Ml](t){return qE(this,Pa.getOrDefault(t,xO))}}),fO=t=>Object.assign(Object.create(nh),t);var hO=Object.create(nh),mO=t=>{if(t===void 0)return hO;if(Symbol.iterator in t){let r=Object.create(nh);for(let[n,o]of t)r[n.toLowerCase()]=o;return r}let e=Object.create(nh);for(let[r,n]of Object.entries(t))Array.isArray(n)?e[r.toLowerCase()]=n.join(", "):n!==void 0&&(e[r.toLowerCase()]=n);return e},V3=t=>Object.setPrototypeOf(t,nh);var zE=d(3,(t,e,r)=>{let n=fO(t);return n[e.toLowerCase()]=r,n}),K3=d(2,(t,e)=>fO({...t,...mO(e)}));var dO=d(2,(t,e)=>{let r=fO(t);return delete r[e.toLowerCase()],r}),qE=d(2,(t,e)=>{let r={...t},n=o=>{if(typeof o=="string"){let i=o.toLowerCase();i in t&&(r[i]=h_(t[i]))}else for(let i in t)o.test(i)&&(r[i]=h_(t[i]))};if(Array.isArray(e))for(let o=0;o<e.length;o++)n(e[o]);else n(e);return r}),xO=J("@effect/platform/Headers/currentRedactedNames",()=>Cf(["authorization","cookie","set-cookie","x-api-key"]));var Q3=t=>V3({b3:`${t.traceId}-${t.spanId}-${t.sampled?"1":"0"}${t.parent._tag==="Some"?`-${t.parent.value.spanId}`:""}`,traceparent:`00-${t.traceId}-${t.spanId}-${t.sampled?"01":"00"}`});var ih=t=>{let e=Symbol.iterator in t?ne(t):Object.entries(t),r=[];for(let[n,o]of e)if(Array.isArray(o))for(let i=0;i<o.length;i++)o[i]!==void 0&&r.push([n,String(o[i])]);else o!==void 0&&r.push([n,String(o)]);return r};var $3=[];var Y3=d(2,(t,e)=>{let r=ih(e),n=r.map(([o])=>o);return Ll(Mh(t,([o])=>n.includes(o)),r)});var Z3=(t,e,r)=>{try{let n=new URL(t,gee());for(let o=0;o<e.length;o++){let[i,s]=e[o];s!==void 0&&n.searchParams.append(i,s)}return r._tag==="Some"&&(n.hash=r.value),be(n)}catch(n){return Pe(n)}};var gee=()=>{if("location"in globalThis&&globalThis.location!==void 0&&globalThis.location.origin!==void 0&&globalThis.location.pathname!==void 0)return location.origin+location.pathname};var gO=Symbol.for("@effect/platform/HttpBody");var EO=class{[gO];constructor(){this[gO]=gO}[ee](){return this.toJSON()}toString(){return le(this)}},yO=class extends EO{_tag="Empty";toJSON(){return{_id:"@effect/platform/HttpBody",_tag:"Empty"}}},eU=new yO;var tU=Symbol.for("@effect/platform/HttpClientRequest"),yee={[tU]:tU,...qs,toJSON(){return{_id:"@effect/platform/HttpClientRequest",method:this.method,url:this.url,urlParams:this.urlParams,hash:this.hash,headers:Ac(this.headers),body:this.body.toJSON()}},pipe(){return R(this,arguments)}};function Oi(t,e,r,n,o,i){let s=Object.create(yee);return s.method=t,s.url=e,s.urlParams=r,s.hash=n,s.headers=o,s.body=i,s}var See=Oi("GET","",$3,k(),hO,eU),Cc=t=>(e,r)=>Cee(See,{method:t,url:e,...r??void 0}),rU=Cc("GET"),nU=Cc("POST"),oU=Cc("PUT"),iU=Cc("PATCH"),sU=Cc("DELETE"),aU=Cc("HEAD"),cU=Cc("OPTIONS"),Cee=d(2,(t,e)=>{let r=t;return e.method&&(r=kee(r,e.method)),e.url&&(r=pU(r,e.url)),e.headers&&(r=SO(r,e.headers)),e.urlParams&&(r=vee(r,e.urlParams)),e.hash&&(r=_ee(r,e.hash)),e.body&&(r=Oee(r,e.body)),e.accept&&(r=lU(r,e.accept)),e.acceptJson&&(r=bee(r)),r}),uU=d(3,(t,e,r)=>Oi(t.method,t.url,t.urlParams,t.hash,zE(t.headers,e,r),t.body)),SO=d(2,(t,e)=>Oi(t.method,t.url,t.urlParams,t.hash,K3(t.headers,e),t.body));var lU=d(2,(t,e)=>uU(t,"Accept",e)),bee=lU("application/json"),kee=d(2,(t,e)=>Oi(e,t.url,t.urlParams,t.hash,t.headers,t.body)),pU=d(2,(t,e)=>{if(typeof e=="string")return Oi(t.method,e,t.urlParams,t.hash,t.headers,t.body);let r=new URL(e.toString()),n=ih(r.searchParams),o=r.hash?b(r.hash.slice(1)):k();return r.search="",r.hash="",Oi(t.method,r.toString(),n,o,t.headers,t.body)});var vee=d(2,(t,e)=>Oi(t.method,t.url,Y3(t.urlParams,e),t.hash,t.headers,t.body)),_ee=d(2,(t,e)=>Oi(t.method,t.url,t.urlParams,b(e),t.headers,t.body));var Oee=d(2,(t,e)=>{let r=t.headers;if(e._tag==="Empty")r=dO(dO(r,"Content-Type"),"Content-length");else{let n=e.contentType;n&&(r=zE(r,"content-type",n));let o=e.contentLength;o&&(r=zE(r,"content-length",o.toString()))}return Oi(t.method,t.url,t.urlParams,t.hash,r,e)});var GE=Symbol.for("@effect/platform/HttpIncomingMessage");var fU=(t,e)=>{let r=t.headers["content-type"]??"",n;if(r.includes("application/json"))try{n=Os(t.json)}catch{}else if(r.includes("text/")||r.includes("urlencoded"))try{n=Os(t.text)}catch{}let o={...e,headers:Ac(t.headers),remoteAddress:t.remoteAddress.toJSON()};return n!==void 0&&(o.body=n),o};var CO=Symbol.for("@effect/platform/HttpClientResponse"),mU=(t,e)=>new bO(t,e),bO=class extends xh{request;source;[GE];[CO];constructor(e,r){super(),this.request=e,this.source=r,this[GE]=GE,this[CO]=CO}toJSON(){return fU(this,{_id:"@effect/platform/HttpClientResponse",request:this.request.toJSON(),status:this.status})}get status(){return this.source.status}get headers(){return mO(this.source.headers)}cachedCookies;get cookies(){return this.cachedCookies?this.cachedCookies:this.cachedCookies=U3(this.source.headers.getSetCookie())}get remoteAddress(){return k()}get stream(){return this.source.body?dW(()=>this.source.body,e=>new wo({request:this.request,response:this,reason:"Decode",cause:e})):m_(new wo({request:this.request,response:this,reason:"EmptyBody",description:"can not create stream from empty body"}))}get json(){return df(this.text,{try:e=>e===""?null:JSON.parse(e),catch:e=>new wo({request:this.request,response:this,reason:"Decode",cause:e})})}textBody;get text(){return this.textBody??=Pn({try:()=>this.source.text(),catch:e=>new wo({request:this.request,response:this,reason:"Decode",cause:e})}).pipe(ff,Os)}get urlParamsBody(){return K(this.text,e=>mf({try:()=>ih(new URLSearchParams(e)),catch:r=>new wo({request:this.request,response:this,reason:"Decode",cause:r})}))}formDataBody;get formData(){return this.formDataBody??=Pn({try:()=>this.source.formData(),catch:e=>new wo({request:this.request,response:this,reason:"Decode",cause:e})}).pipe(ff,Os)}arrayBufferBody;get arrayBuffer(){return this.arrayBufferBody??=Pn({try:()=>this.source.arrayBuffer(),catch:e=>new wo({request:this.request,response:this,reason:"Decode",cause:e})}).pipe(ff,Os)}};var dU=Symbol.for("@effect/platform/HttpClient"),xU=st("@effect/platform/HttpClient"),wee=J(Symbol.for("@effect/platform/HttpClient/tracerDisabledWhen"),()=>Cf(en));var Aee=J(Symbol.for("@effect/platform/HttpClient/currentTracerPropagation"),()=>Cf(!0));var Ree={[dU]:dU,pipe(){return R(this,arguments)},...qs,toJSON(){return{_id:"@effect/platform/HttpClient"}},get(t,e){return this.execute(rU(t,e))},head(t,e){return this.execute(aU(t,e))},post(t,e){return this.execute(nU(t,e))},put(t,e){return this.execute(oU(t,e))},patch(t,e){return this.execute(iU(t,e))},del(t,e){return this.execute(sU(t,e))},options(t,e){return this.execute(cU(t,e))}};var gU=(t,e)=>{let r=Object.create(Ree);return r.preprocess=e,r.postprocess=t,r.execute=function(n){return t(e(n))},r},EU=t=>gU(e=>K(e,r=>Xu(n=>{let o=nn(n.getFiberRef(Eg),Ax),i=new AbortController,s=Ya(o,_e(()=>i.abort())),a=Z3(r.url,r.urlParams,r.hash);if(a._tag==="Left")return Ve(new Ol({request:r,reason:"InvalidUrl",cause:a.left}));let u=a.right;return!n.getFiberRef(lL)||n.getFiberRef(wee)(r)?Oe(s,t(r,u,i.signal,n)):Oe(s,$k(`http.client ${r.method}`,{kind:"client",captureStackTrace:!1},p=>{p.attribute("http.request.method",r.method),p.attribute("server.address",u.origin),u.port!==""&&p.attribute("server.port",+u.port),p.attribute("url.full",u.toString()),p.attribute("url.path",u.pathname),p.attribute("url.scheme",u.protocol.slice(0,-1));let x=u.search.slice(1);x!==""&&p.attribute("url.query",x);let m=n.getFiberRef(xO),c=qE(r.headers,m);for(let l in c)p.attribute(`http.request.header.${l}`,String(c[l]));return r=n.getFiberRef(Aee)?SO(r,Q3(p)):r,Rr(Yk(t(r,u,i.signal,n),p),l=>{p.attribute("http.response.status_code",l.status);let h=qE(l.headers,m);for(let g in h)p.attribute(`http.response.header.${g}`,String(h[g]))})}))})),me),{del:uke,execute:lke,get:pke,head:fke,options:hke,patch:mke,post:dke,put:xke}=Vk(xU);var Mee=d(2,(t,e)=>{let r=t;return gU(n=>e(r.postprocess(n)),r.preprocess)});var yU=t=>bf(xU,K(Yu(),e=>ie(t,r=>Mee(r,Jk(n=>Er(e,n))))));var kO="@effect/platform/FetchHttpClient/Fetch",vO="@effect/platform/FetchHttpClient/FetchOptions",Iee=EU((t,e,r,n)=>{let o=n.getFiberRef(Eg),i=o.unsafeMap.get(kO)??globalThis.fetch,s=o.unsafeMap.get(vO)??{},a=new globalThis.Headers(t.headers),u=f=>ie(Pn({try:()=>i(e,{...s,method:t.method,headers:a,body:f,duplex:t.body._tag==="Stream"?"half":void 0,signal:r}),catch:p=>new Ol({request:t,reason:"Transport",cause:p})}),p=>mU(t,p));switch(t.body._tag){case"Raw":case"Uint8Array":return u(t.body.body);case"FormData":return u(t.body.formData);case"Stream":return K(xW(t.body.stream),u)}return u(void 0)}),SU=yU(me(Iee));var _O=class extends zc(kO)(){},OO=class extends zc(vO)(){},Nee=SU;var je=(t,e)=>(r,[n])=>{let o="Unknown";switch(r.code){case"ENOENT":o="NotFound";break;case"EACCES":o="PermissionDenied";break;case"EEXIST":o="AlreadyExists";break;case"EISDIR":o="BadResource";break;case"ENOTDIR":o="BadResource";break;case"EBUSY":o="Busy";break;case"ELOOP":o="BadResource";break}return El({reason:o,module:t,method:e,pathOrDescriptor:n,syscall:r.syscall,message:r.message})};var CU=Ft(require("node:crypto"),1),$=Ft(require("node:fs"),1),bU=Ft(require("node:os"),1),Fl=Ft(require("node:path"),1);var tt=t=>e=>jf({module:"FileSystem",method:t,message:e.message??String(e)}),Lee=(()=>{let t=lt($.access,je("FileSystem","access"),tt("access"));return(e,r)=>{let n=$.constants.F_OK;return r?.readable&&(n|=$.constants.R_OK),r?.writable&&(n|=$.constants.W_OK),t(e,n)}})(),Bee=(()=>{let t=lt($.cp,je("FileSystem","copy"),tt("copy"));return(e,r,n)=>t(e,r,{force:n?.overwrite??!1,preserveTimestamps:n?.preserveTimestamps??!1,recursive:!0})})(),Wee=(()=>{let t=lt($.copyFile,je("FileSystem","copyFile"),tt("copyFile"));return(e,r)=>t(e,r)})(),Hee=(()=>{let t=lt($.chmod,je("FileSystem","chmod"),tt("chmod"));return(e,r)=>t(e,r)})(),Uee=(()=>{let t=lt($.chown,je("FileSystem","chown"),tt("chown"));return(e,r,n)=>t(e,r,n)})(),zee=(()=>{let t=lt($.link,je("FileSystem","link"),tt("link"));return(e,r)=>t(e,r)})(),qee=(()=>{let t=lt($.mkdir,je("FileSystem","makeDirectory"),tt("makeDirectory"));return(e,r)=>t(e,{recursive:r?.recursive??!1,mode:r?.mode})})(),FO=t=>{let e=lt($.mkdtemp,je("FileSystem",t),tt(t));return r=>Re(()=>{let n=r?.prefix??"",o=typeof r?.directory=="string"?Fl.join(r.directory,"."):bU.tmpdir();return e(n?Fl.join(o,n):o+"/")})},jee=FO("makeTempDirectory"),DO=t=>{let e=lt($.rm,je("FileSystem",t),tt(t));return(r,n)=>e(r,{recursive:n?.recursive??!1,force:n?.force??!1})},Gee=DO("remove"),Jee=(()=>{let t=FO("makeTempDirectoryScoped"),e=DO("makeTempDirectoryScoped");return r=>Jr(t(r),n=>el(e(n,{recursive:!0})))})(),kU=t=>{let e=lt($.open,je("FileSystem",t),tt(t)),r=lt($.close,je("FileSystem",t),tt(t));return(n,o)=>E(Jr(e(n,o?.flag??"r",o?.mode),i=>el(r(i))),ie(i=>Kee(GW(i),o?.flag?.startsWith("a")??!1)))},Vee=kU("open"),Kee=(()=>{let t=f=>lt($.read,je("FileSystem",f),tt(f)),e=t("read"),r=t("readAlloc"),n=lt($.fstat,je("FileSystem","stat"),tt("stat")),o=lt($.ftruncate,je("FileSystem","truncate"),tt("truncate")),i=f=>lt($.write,je("FileSystem",f),tt(f)),s=i("write"),a=i("writeAll");class u{fd;append;[vE];semaphore=Xk(1);position=0n;constructor(p,x){this.fd=p,this.append=x,this[vE]=vE}get stat(){return ie(n(this.fd),_U)}seek(p,x){let m=yl(p);return this.semaphore.withPermits(1)(_e(()=>(x==="start"?this.position=m:x==="current"&&(this.position=this.position+m),this.position)))}read(p){return this.semaphore.withPermits(1)(ie(Re(()=>e(this.fd,{buffer:p,position:this.position})),x=>{let m=yl(x);return this.position=this.position+m,m}))}readAlloc(p){let x=Number(p);return this.semaphore.withPermits(1)(K(_e(()=>Buffer.allocUnsafeSlow(x)),m=>ie(r(this.fd,{buffer:m,position:this.position}),c=>{if(c===0)return k();if(this.position=this.position+BigInt(c),c===x)return b(m);let l=Buffer.allocUnsafeSlow(c);return m.copy(l,0,0,c),b(l)})))}truncate(p){return this.semaphore.withPermits(1)(ie(o(this.fd,p?Number(p):void 0),()=>{if(!this.append){let x=BigInt(p??0);this.position>x&&(this.position=x)}}))}write(p){return this.semaphore.withPermits(1)(ie(Re(()=>s(this.fd,p,void 0,void 0,this.append?void 0:Number(this.position))),x=>{let m=yl(x);return this.append||(this.position=this.position+m),m}))}writeAllChunk(p){return K(Re(()=>a(this.fd,p,void 0,void 0,this.append?void 0:Number(this.position))),x=>x===0?Ve(El({module:"FileSystem",method:"writeAll",reason:"WriteZero",pathOrDescriptor:this.fd,message:"write returned 0 bytes written"})):(this.append||(this.position=this.position+BigInt(x)),x<p.length?this.writeAllChunk(p.subarray(x)):Me))}writeAll(p){return this.semaphore.withPermits(1)(this.writeAllChunk(p))}}return(f,p)=>new u(f,p)})(),vU=t=>{let e=FO(t),r=kU(t),n=o=>_e(()=>CU.randomBytes(o).toString("hex"));return o=>E(ko(e(o),n(6)),ie(([i,s])=>Fl.join(i,s)),Rr(i=>pg(r(i,{flag:"w+"}))))},Qee=vU("makeTempFile"),Xee=(()=>{let t=vU("makeTempFileScoped"),e=DO("makeTempFileScoped");return r=>Jr(t(r),n=>el(e(Fl.dirname(n),{recursive:!0})))})(),$ee=(t,e)=>Pn({try:()=>$.promises.readdir(t,e),catch:r=>je("FileSystem","readDirectory")(r,[t])}),Yee=t=>Qu((e,r)=>{try{$.readFile(t,{signal:r},(n,o)=>{e(n?Ve(je("FileSystem","readFile")(n,[t])):me(o))})}catch(n){e(Ve(tt("readFile")(n)))}}),Zee=(()=>{let t=lt($.readlink,je("FileSystem","readLink"),tt("readLink"));return e=>t(e)})(),ete=(()=>{let t=lt($.realpath,je("FileSystem","realPath"),tt("realPath"));return e=>t(e)})(),tte=(()=>{let t=lt($.rename,je("FileSystem","rename"),tt("rename"));return(e,r)=>t(e,r)})(),_U=t=>({type:t.isFile()?"File":t.isDirectory()?"Directory":t.isSymbolicLink()?"SymbolicLink":t.isBlockDevice()?"BlockDevice":t.isCharacterDevice()?"CharacterDevice":t.isFIFO()?"FIFO":t.isSocket()?"Socket":"Unknown",mtime:ft(t.mtime),atime:ft(t.atime),birthtime:ft(t.birthtime),dev:t.dev,rdev:ft(t.rdev),ino:ft(t.ino),mode:t.mode,nlink:ft(t.nlink),uid:ft(t.uid),gid:ft(t.gid),size:yl(t.size),blksize:ft(yl(t.blksize)),blocks:ft(t.blocks)}),wO=(()=>{let t=lt($.stat,je("FileSystem","stat"),tt("stat"));return e=>ie(t(e),_U)})(),rte=(()=>{let t=lt($.symlink,je("FileSystem","symlink"),tt("symlink"));return(e,r)=>t(e,r)})(),nte=(()=>{let t=lt($.truncate,je("FileSystem","truncate"),tt("truncate"));return(e,r)=>t(e,r!==void 0?Number(r):void 0)})(),ote=(()=>{let t=lt($.utimes,je("FileSystem","utime"),tt("utime"));return(e,r,n)=>t(e,r,n)})(),ite=t=>fW(e=>Jr(_e(()=>{let r=$.watch(t,{},(n,o)=>{if(o)switch(n){case"rename":{e.fromEffect(Sf(wO(o),{onSuccess:i=>JW({path:o}),onFailure:i=>KW({path:o})}));return}case"change":{e.single(VW({path:o}));return}}});return r.on("error",n=>{e.fail(El({module:"FileSystem",reason:"Unknown",method:"watch",pathOrDescriptor:t,message:n.message}))}),r.on("close",()=>{e.end()}),r}),r=>_e(()=>r.close()))),ste=(t,e)=>wO(e).pipe(ie(r=>t.pipe(Nr(n=>n.register(e,r)),Ne(()=>ite(e)))),gW),ate=(t,e,r)=>Qu((n,o)=>{try{$.writeFile(t,e,{signal:o,flag:r?.flag,mode:r?.mode},i=>{n(i?Ve(je("FileSystem","writeFile")(i,[t])):Me)})}catch(i){n(Ve(tt("writeFile")(i)))}}),cte=ie(Kk(kE),t=>jW({access:Lee,chmod:Hee,chown:Uee,copy:Bee,copyFile:Wee,link:zee,makeDirectory:qee,makeTempDirectory:jee,makeTempDirectoryScoped:Jee,makeTempFile:Qee,makeTempFileScoped:Xee,open:Vee,readDirectory:$ee,readFile:Yee,readLink:Zee,realPath:ete,remove:Gee,rename:tte,stat:wO,symlink:rte,truncate:nte,utimes:ote,watch(e){return ste(t,e)},writeFile:ate})),OU=bf(Oo,cte);var FU=OU;var VE={};Di(VE,{layer:()=>pte});var pte=FU;var DU=Ft(pO(),1);var KE=class extends hl("json-parsing-error"){};var wU=t=>E(N.sync(()=>(0,DU.parse)(t,null,!0)),N.catchAll(e=>N.fail(new KE({cause:e}))),N.withSpan("parse-json",{attributes:{data:t}}));var AU=t=>E(N.gen(function*(){let r=yield*(yield*Oo).readFileString(t,"utf8");return yield*wU(r)}),N.withSpan("read-json",{attributes:{filePath:t}}));var RU=()=>E(N.gen(function*(){let{info:t}=yield*Sc,e=yield*AU("./main.js.map");return t("mapFile",e),e}),N.withSpan("read-map-file"));var MU=t=>E(N.gen(function*(){let e=yield*RU()}),N.withSpan("get-error-sources-from-map-file"));var TU=t=>E(N.gen(function*(){let{errors:e}=yield*N3(t,{});if(e.every(n=>n.location!==void 0)){let n=yield*MU(e)}}),N.scoped,N.provide(Fs.mergeAll(JE.layer,VE.layer)),N.withSpan("collect-error-details"));var AO=class extends hl("custom-error"){},fte=E(N.gen(function*(){let{info:t}=yield*Sc;yield*t("yolo"),yield*N.fail(new AO({cause:"Oh no"}))}),N.withSpan("task")),IU=()=>BW(E(N.gen(function*(){yield*fte}),N.sandbox,N.catchAll(TU),N.provide(L3),N.withSpan("action-workflow")));IU();
/*! Bundled license information:

repeat-string/index.js:
  (*!
   * repeat-string <https://github.com/jonschlinkert/repeat-string>
   *
   * Copyright (c) 2014-2015, Jon Schlinkert.
   * Licensed under the MIT License.
   *)
*/
//# sourceMappingURL=main.js.map
